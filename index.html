<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Torneado - IPN</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --ipn-guinda: #6d1f41;
            --ipn-guinda-dark: #4a1529;
            --ipn-guinda-light: #8b2955;
            --ipn-white: #ffffff;
            --ipn-cream: #f5f1e8;
            --text-dark: #2c2c2c;
            --text-light: #666666;
            --border-color: #d4cfc4;
            --shadow: rgba(109, 31, 65, 0.15);
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: var(--ipn-cream);
            color: var(--text-dark);
            min-height: 100vh;
            padding-top: 160px; /* espacio para header + nav fijo */
        }

        /* Header */
        header {
            background: var(--ipn-guinda);
            color: var(--ipn-white);
            padding: 2rem 0;
            box-shadow: 0 4px 12px var(--shadow);
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 100;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .ipn-logo {
            width: 60px;
            height: 60px;
            background: var(--ipn-white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            color: var(--ipn-guinda);
            font-size: 1.5rem;
            font-family: 'Roboto Condensed', sans-serif;
        }

        h1 {
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            letter-spacing: 1px;
        }

        /* Navigation - Mejorada con más espacio */
        nav {
            background: var(--ipn-white);
            border-bottom: 3px solid var(--ipn-guinda);
            box-shadow: 0 2px 8px var(--shadow);
            position: fixed;
            top: 113px; /* AJUSTA según la altura real del header */
            left: 0;
            width: 100%;
            z-index: 99;
            transition: transform 0.35s ease;
        }

        nav.hide-nav {
            transform: translateY(-120%);
        }

        .nav-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: center;
            gap: 0;
            overflow-x: auto;
        }

        .nav-btn {
            background: transparent;
            border: none;
            color: var(--text-dark);
            padding: 1.5rem 2.5rem;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            font-family: 'Roboto', sans-serif;
            position: relative;
            white-space: nowrap;
        }

        .nav-btn::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--ipn-guinda);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .nav-btn:hover {
            background: var(--ipn-cream);
            color: var(--ipn-guinda);
        }

        .nav-btn:hover::before {
            transform: scaleX(1);
        }

        .nav-btn.active {
            background: var(--ipn-guinda);
            color: var(--ipn-white);
            border-bottom-color: var(--ipn-guinda-dark);
        }

        .nav-btn.active::before {
            transform: scaleX(0);
        }

        /* Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 3rem 2rem;
        }

        /* Page sections */
        .page {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cards */
        .card {
            background: var(--ipn-white);
            border-radius: 8px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 12px var(--shadow);
            border-left: 4px solid var(--ipn-guinda);
        }

        .card-title {
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--ipn-guinda);
            margin-bottom: 1.5rem;
            padding-bottom: 0.8rem;
            border-bottom: 2px solid var(--border-color);
        }

        .card-content {
            line-height: 1.8;
            color: var(--text-dark);
        }

        .card-content strong {
            color: var(--ipn-guinda);
            font-weight: 600;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            background: var(--ipn-white);
        }

        thead {
            background: var(--ipn-guinda);
            color: var(--ipn-white);
        }

        th {
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            font-size: 0.95rem;
        }

        td {
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        tbody tr:hover {
            background: var(--ipn-cream);
        }

        /* Highlight box */
        .highlight-box {
            background: linear-gradient(135deg, rgba(109, 31, 65, 0.05) 0%, rgba(109, 31, 65, 0.02) 100%);
            border-left: 4px solid var(--ipn-guinda);
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 4px;
        }

        /* Material cards */
        .material-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .material-card {
            background: var(--ipn-white);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .material-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 20px var(--shadow);
            border-color: var(--ipn-guinda);
        }

        .material-name {
            font-weight: 700;
            color: var(--ipn-guinda);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .material-speed {
            color: var(--ipn-guinda-dark);
            font-size: 1.4rem;
            font-weight: 700;
            margin: 0.5rem 0;
        }

        .material-desc {
            color: var(--text-light);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .material-iso {
            display: inline-block;
            background: var(--ipn-guinda);
            color: var(--ipn-white);
            padding: 0.2rem 0.6rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-top: 0.5rem;
        }

        .material-tool {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-top: 0.8rem;
            font-style: italic;
        }

        /* Search box for materials */
        .search-box {
            width: 100%;
            padding: 1rem;
            margin-bottom: 1.5rem;
            border: 2px solid var(--border-color);
            border-radius: 4px;
            font-size: 1.1rem;
            font-family: 'Roboto', sans-serif;
            background: var(--ipn-white);
            transition: border-color 0.3s ease;
        }

        .search-box:focus {
            outline: none;
            border-color: var(--ipn-guinda);
        }

        .no-results {
            text-align: center;
            padding: 3rem;
            color: var(--text-light);
            font-style: italic;
            font-size: 1.1rem;
        }

        /* Simulation Page */
        .mode-selector {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 0 0 3rem 0;
        }

        .mode-btn {
            background: var(--ipn-white);
            border: 2px solid var(--ipn-guinda);
            color: var(--ipn-guinda);
            padding: 1rem 2.5rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 4px;
            font-family: 'Roboto Condensed', sans-serif;
            text-transform: uppercase;
        }

        .mode-btn:hover {
            background: var(--ipn-cream);
        }

        .mode-btn.active {
            background: var(--ipn-guinda);
            color: var(--ipn-white);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .simulator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        @media (max-width: 1024px) {
            .simulator-grid {
                grid-template-columns: 1fr;
            }
        }

        .sim-card {
            background: var(--ipn-white);
            border: 3px solid var(--ipn-guinda);
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 8px 24px var(--shadow);
            position: relative;
            overflow: visible;
        }

        .sim-card::before {
            content: '';
            position: absolute;
            top: -3px;
            left: -3px;
            right: -3px;
            bottom: -3px;
            background: linear-gradient(135deg, var(--ipn-guinda) 0%, var(--ipn-guinda-light) 100%);
            border-radius: 8px;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .sim-card:hover::before {
            opacity: 0.1;
        }

        .sim-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border-color);
        }

        .sim-title {
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--ipn-guinda);
        }

        .sim-badge {
            background: var(--ipn-guinda);
            color: var(--ipn-white);
            padding: 0.4rem 1rem;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
            animation: pulse-badge 2s ease-in-out infinite;
        }

        @keyframes pulse-badge {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

/* ================================================
   LATHE CANVAS — FRONT VIEW
   ================================================ */

/* ================================================
   LATHE CANVAS — EPIC FRONT VIEW v2.0
   ================================================ */

.lathe-canvas {
    width:100%; height:420px;
    background: linear-gradient(180deg,#04080f 0%,#080e18 40%,#060b14 70%,#030608 100%);
    border: 2px solid var(--ipn-guinda);
    border-radius: 10px;
    margin: 1.5rem 0;
    position: relative;
    overflow: hidden;
    box-shadow:
        inset 0 0 80px rgba(0,0,0,.8),
        0 0 0 1px rgba(109,31,65,.3),
        0 8px 40px rgba(0,0,0,.6);
    --lc-bed:68px; --lc-spindle:168px; --lc-wp-h:58px; --lc-wp-r:29px; --lc-chuck-r:41px;
}

/* === CANVAS OVERLAY para partículas JS === */
.lc-particle-canvas {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 50;
}

/* === AMBIENT ATMOSPHERE === */
.lc-ambient {
    position: absolute; inset: 0;
    pointer-events: none; z-index: 30;
    transition: all .6s ease;
}
.lc-ambient.cutting {
    background:
        radial-gradient(ellipse at 58% 44%, rgba(255,130,20,.06) 0%, transparent 55%),
        radial-gradient(ellipse at 20% 60%, rgba(60,80,200,.04) 0%, transparent 40%);
}
.lc-ambient.hot {
    background:
        radial-gradient(ellipse at 58% 44%, rgba(255,50,0,.14) 0%, transparent 50%),
        radial-gradient(ellipse at 58% 44%, rgba(255,150,0,.06) 0%, transparent 70%);
    animation: lcAmbientPulse 1.2s ease-in-out infinite;
}
@keyframes lcAmbientPulse {
    0%,100% { opacity: 1; }
    50%      { opacity: .75; }
}

/* === FLOOR REFLECTION === */
.lc-floor-reflect {
    position: absolute; bottom: 0; left: 0; right: 0;
    height: 68px; z-index: 1;
    background: linear-gradient(0deg,
        rgba(255,100,20,.03) 0%,
        transparent 100%);
    pointer-events: none;
    transition: opacity .5s;
    opacity: 0;
}
.lc-floor-reflect.active { opacity: 1; }

/* === HEAT SHIMMER OVERLAY === */
.lc-heat-shimmer {
    position: absolute; inset: 0;
    pointer-events: none; z-index: 29;
    opacity: 0; transition: opacity .8s;
    background: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 3px,
        rgba(255,80,0,.015) 3px,
        rgba(255,80,0,.015) 4px
    );
    animation: lcHeatShimmer 0.08s steps(1) infinite paused;
}
.lc-heat-shimmer.active {
    opacity: 1;
    animation-play-state: running;
}
@keyframes lcHeatShimmer {
    0%   { transform: translateY(0) skewX(0deg); }
    25%  { transform: translateY(-0.5px) skewX(0.15deg); }
    50%  { transform: translateY(0.3px) skewX(-0.1deg); }
    75%  { transform: translateY(-0.2px) skewX(0.08deg); }
    100% { transform: translateY(0.4px) skewX(-0.12deg); }
}

/* === BED === */
.lc-bed {
    position: absolute; bottom: 0; left: 0; right: 0;
    height: var(--lc-bed);
    background: linear-gradient(180deg,
        #2e3540 0%, #242a34 30%, #1c2028 70%, #141820 100%);
    border-top: 2px solid #3e4550;
    box-shadow: inset 0 8px 20px rgba(0,0,0,.6);
    z-index: 2;
}
.lc-bed::before {
    content:'';
    position: absolute; top: 8px; left: 5%; right: 5%;
    height: 8px;
    background: linear-gradient(180deg, #4a5060 0%, #363c48 100%);
    border-radius: 2px;
    box-shadow: 0 2px 6px rgba(0,0,0,.4);
}
.lc-bed::after {
    content:'';
    position: absolute; top: 20px; left: 5%; right: 5%;
    height: 3px;
    background: linear-gradient(90deg,
        transparent 0%, #5a6070 10%, #5a6070 90%, transparent 100%);
    border-radius: 1px;
}
/* Bed way reflections */
.lc-bed-ways {
    position: absolute; top: 26px; left: 10%; right: 10%; height: 2px;
    background: linear-gradient(90deg, transparent, rgba(150,170,200,.12), transparent);
    animation: lcBedWaySheen 4s ease-in-out infinite;
}
@keyframes lcBedWaySheen {
    0%,100% { opacity: .4; transform: scaleX(.8); }
    50%      { opacity: 1; transform: scaleX(1); }
}

/* === HEADSTOCK === */
.lc-headstock {
    position: absolute; left: 0; width: 13.5%;
    top: 30px; bottom: var(--lc-bed);
    background: linear-gradient(155deg,
        #454b58 0%, #353c4c 40%, #282e3c 75%, #1e2430 100%);
    border-right: 3px solid #52596a;
    border-top: 2px solid #4a5060;
    border-radius: 0 8px 0 0;
    box-shadow:
        6px 0 24px rgba(0,0,0,.6),
        inset 0 2px 10px rgba(255,255,255,.03),
        inset 2px 0 8px rgba(0,0,0,.3);
    z-index: 6;
}
.lc-headstock::before {
    content:'';
    position: absolute; top: -20px; left: 10%; right: 10%;
    height: 22px;
    background: linear-gradient(180deg, #303840 0%, #262c38 100%);
    border: 2px solid #424858; border-bottom: none;
    border-radius: 4px 4px 0 0;
}
.lc-headstock::after {
    content:'HEADSTOCK';
    position: absolute; top: 12px; left: 50%; transform: translateX(-50%);
    font-size: .36rem; color: #606888; font-weight: 800;
    letter-spacing: 1.5px; white-space: nowrap;
    text-shadow: 0 0 8px rgba(100,120,200,.3);
}
/* Headstock power LED strip */
.lc-hs-led-strip {
    position: absolute; bottom: 20px; left: 8px; right: 8px;
    height: 3px; border-radius: 2px;
    background: #1a1e28;
    overflow: hidden;
}
.lc-hs-led-strip::after {
    content:'';
    position: absolute; inset: 0;
    background: linear-gradient(90deg, transparent 0%, #4CAF50 50%, transparent 100%);
    opacity: 0;
    transition: opacity .4s;
    animation: lcLedScan 2s linear infinite paused;
}
.lc-hs-led-strip.active::after {
    opacity: 1;
    animation-play-state: running;
}
@keyframes lcLedScan {
    from { transform: translateX(-100%); }
    to   { transform: translateX(200%); }
}

/* === SPINDLE NOSE === */
.lc-spindle-nose {
    position: absolute; left: 13.5%; width: 20px; height: 32px;
    top: calc(var(--lc-spindle) - 16px);
    background: linear-gradient(90deg, #686e7a 0%, #4c5260 60%, #3a3f4e 100%);
    border: 1px solid #787e88;
    border-radius: 0 4px 4px 0;
    z-index: 7;
    box-shadow: 3px 0 10px rgba(0,0,0,.5);
}
.lc-spindle-nose::after {
    content:'';
    position: absolute; top: 4px; left: 6px; right: 4px; bottom: 4px;
    background: repeating-linear-gradient(0deg,
        transparent 0, transparent 3px,
        rgba(255,255,255,.04) 3px, rgba(255,255,255,.04) 4px);
    border-radius: 2px;
}

/* === CHUCK === */
.lc-chuck {
    position: absolute; left: 14%;
    top: calc(var(--lc-spindle) - var(--lc-chuck-r));
    width: calc(var(--lc-chuck-r)*2);
    height: calc(var(--lc-chuck-r)*2);
    z-index: 10;
    transform-origin: center center;
}
.lc-chuck.spinning {
    animation: lcChuckSpin .8s linear infinite;
}
@keyframes lcChuckSpin { to { transform: rotate(360deg); } }

.lc-chuck-body {
    width: 100%; height: 100%; border-radius: 50%;
    background: radial-gradient(circle at 32% 28%,
        #8a9098 0%, #606878 25%, #404858 60%, #282e3c 85%, #181e2a 100%);
    border: 3px solid #5a6278;
    box-shadow:
        4px 8px 24px rgba(0,0,0,.7),
        inset 0 2px 10px rgba(255,255,255,.07),
        inset 0 -3px 8px rgba(0,0,0,.5);
    position: relative; overflow: hidden;
}
/* Chuck metallic ring */
.lc-chuck-body::before {
    content:'';
    position: absolute; top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 88%; height: 88%;
    border-radius: 50%;
    border: 2px solid rgba(255,255,255,.06);
    box-shadow: inset 0 0 20px rgba(0,0,0,.4);
}
/* Chuck scroll grooves */
.lc-chuck-body::after {
    content:'';
    position: absolute; top: 50%; left: 50%;
    transform: translate(-50%,-50%);
    width: 55%; height: 55%;
    border-radius: 50%;
    border: 1px solid rgba(255,255,255,.05);
}
.lc-chuck-hub {
    position: absolute; top: 50%; left: 50%;
    transform: translate(-50%,-50%);
    width: 22px; height: 22px; border-radius: 50%;
    background: radial-gradient(circle, #3a4050 0%, #1e2230 100%);
    border: 2px solid #484e60;
    box-shadow: inset 0 2px 6px rgba(0,0,0,.7), 0 0 8px rgba(0,0,0,.5);
    z-index: 2;
}
.lc-jaw {
    position: absolute;
    width: 12px; height: 22px;
    background: linear-gradient(180deg, #8a9098 0%, #646c78 45%, #484e5c 100%);
    border: 1px solid #9aa0a8;
    border-radius: 4px 4px 1px 1px;
    top: calc(50% - 22px); left: calc(50% - 6px);
    transform-origin: 6px 22px;
    box-shadow: 0 3px 8px rgba(0,0,0,.6), inset 0 1px 3px rgba(255,255,255,.1);
}
.lc-jaw::after {
    content:'';
    position: absolute; top: 5px; left: 50%;
    transform: translateX(-50%);
    width: 4px; height: 13px;
    background: rgba(0,0,0,.25); border-radius: 1px;
}
.lc-jaw-1 { transform: rotate(0deg); }
.lc-jaw-2 { transform: rotate(120deg); }
.lc-jaw-3 { transform: rotate(240deg); }

/* === WORKPIECE === */
.lc-workpiece {
    position: absolute; left: 20%; right: 22%;
    top: calc(var(--lc-spindle) - var(--lc-wp-r));
    height: var(--lc-wp-h);
    z-index: 8;
    transition: top .3s ease;
}
.lc-wp-body {
    width: 100%; height: 100%;
    border-radius: 0 5px 5px 0;
    background: linear-gradient(180deg,
        #6a7e82 0%,
        #9ab8bc 6%,
        #c8dde0 18%,
        #e8f8fa 50%,
        #c8dde0 82%,
        #9ab8bc 94%,
        #6a7e82 100%);
    box-shadow:
        0 4px 20px rgba(0,0,0,.6),
        inset 0 1px 4px rgba(255,255,255,.2),
        inset 0 -2px 4px rgba(0,0,0,.3);
    position: relative; overflow: hidden;
}
/* Top/bottom shadow bands */
.lc-wp-body::before {
    content:''; position: absolute;
    top: 0; left: 0; right: 0; height: 7px;
    background: linear-gradient(180deg, rgba(0,0,0,.45) 0%, transparent 100%);
}
.lc-wp-body::after {
    content:''; position: absolute;
    bottom: 0; left: 0; right: 0; height: 7px;
    background: linear-gradient(0deg, rgba(0,0,0,.45) 0%, transparent 100%);
}

/* Rotation lines */
.lc-wp-lines {
    position: absolute; inset: 0;
    background: repeating-linear-gradient(90deg,
        transparent 0,
        rgba(180,210,218,.16) .5px,
        transparent 1px,
        transparent 9px);
    opacity: 0; pointer-events: none;
    animation: lcWpSpin .5s linear infinite paused;
    transition: opacity .3s;
}
@keyframes lcWpSpin {
    from { transform: translateX(0); }
    to   { transform: translateX(9px); }
}
.lc-workpiece.spinning .lc-wp-lines {
    opacity: 1; animation-play-state: running;
}

/* Motion blur overlay while spinning fast */
.lc-wp-blur {
    position: absolute; inset: 0;
    pointer-events: none; opacity: 0;
    transition: opacity .3s;
    background: linear-gradient(180deg,
        transparent 10%,
        rgba(200,220,225,.06) 50%,
        transparent 90%);
}
.lc-workpiece.spinning .lc-wp-blur { opacity: 1; }

/* Heat glow */
.lc-wp-heat {
    position: absolute; right: 0; width: 50%;
    top: 0; bottom: 0; opacity: 0;
    transition: opacity .5s, background .6s;
    pointer-events: none;
    border-radius: 0 5px 5px 0;
}
.lc-wp-heat.warm {
    opacity: 1;
    background: radial-gradient(ellipse at right center,
        rgba(255,180,60,.18) 0%, rgba(255,120,30,.08) 40%, transparent 70%);
    animation: lcHeatPulse 1.5s ease-in-out infinite;
}
.lc-wp-heat.hot {
    opacity: 1;
    background: radial-gradient(ellipse at right center,
        rgba(255,60,0,.35) 0%, rgba(255,120,0,.18) 30%, rgba(255,180,0,.06) 60%, transparent 80%);
    animation: lcHeatPulse .7s ease-in-out infinite;
}
@keyframes lcHeatPulse {
    0%,100% { opacity: 1; transform: scaleX(1); }
    50%     { opacity: .75; transform: scaleX(1.05); }
}

/* Machined section */
.lc-wp-machined {
    position: absolute; right: 0; width: 42%;
    top: 6px; bottom: 6px;
    background: linear-gradient(180deg,
        #58706e 0%, #7a9290 10%, #a0b8b8 25%, #b8ccce 50%, #a0b8b8 75%, #7a9290 90%, #58706e 100%);
    border-radius: 0 4px 4px 0;
    opacity: 0; transition: opacity .5s, top .3s, bottom .3s;
}
.lc-wp-machined::after {
    content:'';
    position: absolute; inset: 0;
    background: repeating-linear-gradient(90deg,
        transparent 0, rgba(0,0,0,.03) .5px, transparent 1px, transparent 6px);
    border-radius: inherit;
}
.lc-wp-machined.active { opacity: 1; }

.lc-wp-shoulder {
    position: absolute; right: 42%; width: 3px;
    top: 0; bottom: 0;
    background: linear-gradient(90deg, #4a6062 0%, #7a9898 50%, #4a6062 100%);
    opacity: 0; transition: opacity .4s; z-index: 1;
}
.lc-wp-shoulder.active { opacity: 1; }

/* === CARRIAGE === */
.lc-carriage {
    position: absolute; left: 56%; bottom: var(--lc-bed);
    width: 88px; height: 60px;
    background: linear-gradient(155deg,
        #424858 0%, #323848 55%, #262c3a 100%);
    border: 2px solid #505868;
    border-bottom: none;
    border-radius: 4px 4px 0 0;
    box-shadow:
        0 -4px 16px rgba(0,0,0,.5),
        inset 0 1px 4px rgba(255,255,255,.04);
    z-index: 12;
    transition: left .4s ease;
}
.lc-carriage.cutting {
    animation: lcCarriageFeed 7s cubic-bezier(.4,0,.2,1) infinite;
}
@keyframes lcCarriageFeed {
    0%,4%   { left: 56%; }
    46%,54% { left: 43%; }
    96%,100%{ left: 56%; }
}

/* Carriage detail lines */
.lc-carriage::before {
    content:'';
    position: absolute; top: 8px; left: 6px; right: 6px; height: 1px;
    background: rgba(255,255,255,.06);
}
.lc-carriage::after {
    content:'';
    position: absolute; top: 12px; left: 6px; right: 6px; height: 1px;
    background: rgba(0,0,0,.3);
}

/* === CNC TURRET === */
.lc-turret {
    position: absolute; top: 5px; left: 50%;
    transform: translateX(-50%);
    width: 56px; height: 44px;
    background: linear-gradient(155deg, #505868 0%, #3a4050 100%);
    border: 2px solid #626878;
    border-radius: 4px;
    box-shadow: 0 4px 14px rgba(0,0,0,.5), inset 0 1px 3px rgba(255,255,255,.06);
}
.lc-turret::before {
    content:'';
    position: absolute; inset: 4px;
    border: 1px solid rgba(255,255,255,.06);
    border-radius: 2px;
}
.lc-turret::after {
    content:'T01';
    position: absolute; top: 50%; left: 50%;
    transform: translate(-50%,-50%);
    font-size: .5rem; color: #7ab8cc;
    font-weight: 800; font-family: monospace;
    text-shadow: 0 0 6px rgba(100,180,200,.6);
    letter-spacing: 1px;
}
.lc-turret-led {
    position: absolute; top: 6px; right: 7px;
    width: 6px; height: 6px; border-radius: 50%;
    background: #1a2030;
    border: 1px solid #404858;
    transition: background .3s, box-shadow .3s;
}
.lc-turret-led.active {
    background: #4CAF50;
    box-shadow: 0 0 6px #4CAF50, 0 0 14px rgba(76,175,80,.5);
    animation: lcLedBlink .8s ease-in-out infinite;
}
@keyframes lcLedBlink {
    0%,100% { box-shadow: 0 0 6px #4CAF50, 0 0 14px rgba(76,175,80,.5); }
    50%     { box-shadow: 0 0 3px #4CAF50, 0 0 8px rgba(76,175,80,.3); }
}

/* === 4-WAY TOOL POST (CONVENTIONAL) === */
.lc-tool-post-conv {
    position: absolute; top: 5px; left: 50%;
    transform: translateX(-50%);
    width: 36px; height: 30px;
    background: linear-gradient(155deg, #545e6c 0%, #3e4858 100%);
    border: 2px solid #646e7c;
    border-radius: 3px;
    box-shadow: 0 3px 10px rgba(0,0,0,.5);
}
.lc-tool-post-conv::after {
    content: 'T1';
    position: absolute; top: 50%; left: 50%;
    transform: translate(-50%,-50%);
    font-size: .44rem; color: #aab4c0; font-weight: 700;
}

/* === APRON (CONVENTIONAL) === */
.lc-apron {
    position: absolute; left: -2px; bottom: 0;
    width: 26px; height: 100%;
    background: linear-gradient(90deg, #3c4454 0%, #303848 100%);
    border-left: 1px solid #4c5468;
    border-radius: 2px 0 0 0;
}
.lc-feed-lever {
    position: absolute; top: 8px; left: 50%;
    transform: translateX(-50%);
    width: 7px; height: 26px;
    background: linear-gradient(180deg, #6a7080 0%, #484e5c 100%);
    border-radius: 4px 4px 1px 1px;
    transform-origin: bottom center;
    transition: transform .5s cubic-bezier(.3,1.5,.4,1);
    box-shadow: 0 2px 6px rgba(0,0,0,.5);
}
.lc-feed-lever::before {
    content:'';
    position: absolute; top: -4px; left: 50%;
    transform: translateX(-50%);
    width: 14px; height: 8px;
    background: radial-gradient(circle, #8a9098 0%, #585e68 100%);
    border-radius: 50%; border: 1px solid #6a7078;
    box-shadow: 0 1px 4px rgba(0,0,0,.4);
}
.lc-feed-lever.engaged {
    transform: translateX(-50%) rotate(-32deg);
}

/* === TOOL ASSEMBLY === */
.lc-tool-assembly {
    position: absolute; left: 57%;
    top: calc(var(--lc-spindle) + var(--lc-wp-r));
    display: flex; flex-direction: column;
    align-items: center; z-index: 15;
    transition: top .25s cubic-bezier(.2,.8,.3,1);
    filter: drop-shadow(0 0 0 transparent);
    transition: top .25s cubic-bezier(.2,.8,.3,1), filter .3s;
}
.lc-tool-assembly.cutting {
    animation: lcToolAsmFeed 7s cubic-bezier(.4,0,.2,1) infinite;
    filter: drop-shadow(0 0 8px rgba(255,140,0,.2));
}
@keyframes lcToolAsmFeed {
    0%,4%   { left: 57%; }
    46%,54% { left: 44%; }
    96%,100%{ left: 57%; }
}

/* === INSERT (CUTTING TIP) === */
.lc-insert {
    position: relative;
    width: 0; height: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-bottom: 18px solid #c8a020;
    filter: drop-shadow(0 0 4px rgba(200,160,30,.4));
    transition: filter .3s, border-bottom-color .3s;
    flex-shrink: 0;
}
.lc-insert.active {
    border-bottom-color: #ff7722;
    filter:
        drop-shadow(0 0 8px rgba(255,119,34,.9))
        drop-shadow(0 0 20px rgba(255,80,10,.6))
        drop-shadow(0 0 40px rgba(255,60,0,.3));
    animation: lcInsertVibrate .065s ease-in-out infinite,
               lcInsertGlowPulse .3s ease-in-out infinite;
}
@keyframes lcInsertVibrate {
    0%  { transform: translateY(0) translateX(0) rotate(0deg); }
    20% { transform: translateY(-.6px) translateX(-.5px) rotate(.15deg); }
    40% { transform: translateY(.5px) translateX(.4px) rotate(-.1deg); }
    60% { transform: translateY(-.4px) translateX(.3px) rotate(.12deg); }
    80% { transform: translateY(.3px) translateX(-.4px) rotate(-.08deg); }
}
@keyframes lcInsertGlowPulse {
    0%,100% { filter: drop-shadow(0 0 8px rgba(255,119,34,.9)) drop-shadow(0 0 20px rgba(255,80,10,.6)); }
    50%     { filter: drop-shadow(0 0 12px rgba(255,160,40,1)) drop-shadow(0 0 30px rgba(255,100,10,.8)); }
}

.lc-insert-arm {
    width: 9px; flex: 1; min-height: 24px;
    background: linear-gradient(90deg, #6a7080 0%, #4e5568 100%);
    border-radius: 0 0 3px 3px;
    box-shadow: 1px 2px 6px rgba(0,0,0,.4);
}

/* === CHIP SYSTEM - CSS Chips === */
.lc-chips {
    position: absolute; width: 90px; height: 90px;
    top: -55px; left: 50%;
    transform: translateX(-50%);
    pointer-events: none; z-index: 20;
    overflow: visible;
}
.lc-chip {
    position: absolute; top: 12px; left: 50%;
    opacity: 0; border-radius: 2px;
    transform-origin: center center;
}
.lc-chip-c {
    width: 14px; height: 6px;
    background: linear-gradient(90deg, #6a7a50 0%, #9aaa60 50%, #6a7a50 100%);
    border-radius: 40% 40% 0 0;
    box-shadow: 0 1px 3px rgba(0,0,0,.4);
}
.lc-chip-l {
    width: 20px; height: 3px;
    background: linear-gradient(90deg, #707878 0%, #9aA8a8 50%, #707878 100%);
    border-radius: 2px;
}
.lc-chip-s {
    width: 8px; height: 8px;
    background: radial-gradient(circle, #909090 0%, #606060 100%);
    border-radius: 50%;
}

@keyframes lcChipArc {
    0%   { transform: translate(0,0) rotate(0deg) scale(1.2); opacity: .95; }
    20%  { opacity: 1; }
    100% { transform: translate(var(--cx),var(--cy)) rotate(var(--cr,400deg)) scale(.2); opacity: 0; }
}
.lc-chip:nth-child(1) { --cx:-34px; --cy:-48px; --cr:360deg;  animation: lcChipArc 1s ease-out infinite; animation-delay: 0s; }
.lc-chip:nth-child(2) { --cx:-16px; --cy:-62px; --cr:-320deg; animation: lcChipArc 1s ease-out infinite; animation-delay:.2s; }
.lc-chip:nth-child(3) { --cx:-48px; --cy:-38px; --cr:380deg;  animation: lcChipArc 1s ease-out infinite; animation-delay:.4s; }
.lc-chip:nth-child(4) { --cx:-8px;  --cy:-70px; --cr:-300deg; animation: lcChipArc 1s ease-out infinite; animation-delay:.6s; }
.lc-chip:nth-child(5) { --cx:-58px; --cy:-28px; --cr:340deg;  animation: lcChipArc 1s ease-out infinite; animation-delay:.8s; }
.lc-chip.paused { animation-play-state: paused !important; opacity: 0 !important; }

/* === PLASMA ARC (contact point glow) === */
.lc-plasma {
    position: absolute; top: 0; left: 50%;
    transform: translateX(-50%);
    width: 20px; height: 8px;
    pointer-events: none; z-index: 22;
    opacity: 0; transition: opacity .2s;
}
.lc-plasma.active { opacity: 1; }
.lc-plasma-core {
    position: absolute; top: 0; left: 50%;
    transform: translateX(-50%);
    width: 8px; height: 8px; border-radius: 50%;
    background: radial-gradient(circle, #fff 0%, #ffee80 30%, #ff8800 65%, transparent 100%);
    box-shadow:
        0 0 6px #ffcc00,
        0 0 14px #ff8800,
        0 0 28px rgba(255,80,0,.6),
        0 0 50px rgba(255,40,0,.3);
    animation: lcPlasmaPulse .12s ease-in-out infinite paused;
}
.lc-plasma.active .lc-plasma-core {
    animation-play-state: running;
}
@keyframes lcPlasmaPulse {
    0%,100% { transform: translateX(-50%) scale(1); opacity: 1; }
    50%     { transform: translateX(-50%) scale(1.4); opacity: .85; }
}

/* === COOLANT === */
.lc-coolant-nozzle {
    position: absolute; top: -72px; left: 58%;
    width: 16px; height: 18px;
    background: linear-gradient(155deg, #5a6270 0%, #404855 100%);
    border: 1px solid #6a7280;
    border-radius: 2px 2px 0 8px;
    z-index: 17; opacity: 0; transition: opacity .4s;
    box-shadow: 0 2px 6px rgba(0,0,0,.4);
}
.lc-coolant-nozzle.active { opacity: 1; }
.lc-coolant-nozzle::after {
    content:'';
    position: absolute; bottom: -6px; left: 4px;
    width: 6px; height: 8px;
    background: linear-gradient(180deg, #5a6270 0%, transparent 100%);
}

.lc-coolant {
    position: absolute; top: -58px; left: 60%;
    width: 18px; height: 60px;
    opacity: 0; transition: opacity .5s;
    pointer-events: none; z-index: 18;
    transform: rotate(8deg);
    filter: blur(.5px);
}
.lc-coolant.active { opacity: .85; }
.lc-coolant-jet {
    position: absolute; width: 3px; height: 100%;
    background: linear-gradient(180deg,
        rgba(140,220,255,.9) 0%,
        rgba(80,180,255,.6) 40%,
        rgba(40,130,255,.2) 80%,
        transparent 100%);
    border-radius: 2px;
    animation: lcCoolantFlow .35s linear infinite;
}
.lc-coolant-jet:nth-child(1) { left: 2px; animation-delay: 0s; }
.lc-coolant-jet:nth-child(2) { left: 10px; animation-delay: .17s; }
@keyframes lcCoolantFlow {
    0%   { transform: translateY(-10px) scaleY(.75); opacity: .4; }
    50%  { opacity: 1; }
    100% { transform: translateY(12px) scaleY(1.2); opacity: .1; }
}
/* Coolant splash at bottom */
.lc-coolant-splash {
    position: absolute; bottom: -8px; left: -6px; right: -6px; height: 6px;
    opacity: 0; transition: opacity .3s;
}
.lc-coolant.active .lc-coolant-splash { opacity: 1; }
.lc-coolant-splash::before {
    content:'';
    position: absolute; bottom: 0; left: 0; right: 0; height: 4px;
    background: radial-gradient(ellipse at 50% 100%, rgba(100,180,255,.4) 0%, transparent 70%);
    animation: lcSplash .4s ease-in-out infinite;
}
@keyframes lcSplash {
    0%,100% { transform: scaleX(.8); opacity: .5; }
    50%     { transform: scaleX(1.2); opacity: 1; }
}

/* === SPARKS === */
.lc-sparks {
    position: absolute; width: 60px; height: 60px;
    top: -60px; left: 50%;
    transform: translateX(-50%);
    opacity: 0; transition: opacity .2s;
    pointer-events: none; z-index: 21;
}
.lc-sparks.active { opacity: 1; }
.lc-spark {
    position: absolute; top: 44px; left: 50%;
    width: 3px; height: 3px; border-radius: 50%;
    background: #ffe866;
    box-shadow: 0 0 5px #ffdd22, 0 0 10px #ff9900, 0 0 18px rgba(255,100,0,.5);
    opacity: 0;
    animation: lcSparkFly .38s ease-out infinite;
}
.lc-spark:nth-child(1) { animation-delay: 0s;    --sx:-28px; --sy:-34px; }
.lc-spark:nth-child(2) { animation-delay: .06s;  --sx: 12px; --sy:-40px; }
.lc-spark:nth-child(3) { animation-delay: .12s;  --sx:-40px; --sy:-22px; }
.lc-spark:nth-child(4) { animation-delay: .19s;  --sx: 22px; --sy:-30px; }
.lc-spark:nth-child(5) { animation-delay: .26s;  --sx:-14px; --sy:-46px; }
.lc-spark:nth-child(6) { animation-delay: .32s;  --sx: 32px; --sy:-18px; }
@keyframes lcSparkFly {
    0%   { transform: translate(0,0) scale(1.5); opacity: 1; }
    60%  { opacity: .8; }
    100% { transform: translate(var(--sx),var(--sy)) scale(0); opacity: 0; }
}

/* === TAILSTOCK === */
.lc-tailstock {
    position: absolute; right: 2%; width: 10%;
    top: 50px; bottom: var(--lc-bed);
    background: linear-gradient(150deg, #424750 0%, #323840 55%, #262c38 100%);
    border-radius: 6px 6px 0 0;
    border: 2px solid #505560; border-bottom: none;
    box-shadow: -4px 0 18px rgba(0,0,0,.5);
    z-index: 6;
}
.lc-tailstock::before {
    content:'TAILSTOCK';
    position: absolute; top: 9px; left: 50%;
    transform: translateX(-50%);
    font-size: .36rem; color: #606880; font-weight: 800;
    letter-spacing: .8px; white-space: nowrap;
}
.lc-ts-quill {
    position: absolute; left: -24px; top: 50%;
    transform: translateY(-50%);
    width: 28px; height: 13px;
    background: linear-gradient(90deg, #8a8f9a 0%, #686d7a 100%);
    border-radius: 0 3px 3px 0;
    box-shadow: -1px 0 8px rgba(0,0,0,.5);
}
.lc-ts-quill::after {
    content:''; position: absolute;
    right: -7px; top: 50%;
    transform: translateY(-50%);
    width: 0; height: 0;
    border-top: 5px solid transparent;
    border-bottom: 5px solid transparent;
    border-left: 8px solid #686d7a;
}
.lc-ts-hw {
    position: absolute; right: -15px; top: 62%;
    width: 24px; height: 24px; border-radius: 50%;
    background: radial-gradient(circle at 36% 34%, #565b66 0%, #323840 100%);
    border: 2px solid #484e5a;
    box-shadow: 1px 2px 8px rgba(0,0,0,.5);
    z-index: 7;
}

/* === CNC PANEL === */
.lc-cnc-panel {
    position: absolute; top: 8px;
    right: calc(13% + 6px);
    z-index: 25;
}
.lc-screen {
    width: 118px; height: 98px;
    background: #050e08;
    border: 2px solid #1a2e1e;
    border-radius: 6px;
    padding: 6px 7px;
    box-shadow:
        0 0 24px rgba(76,175,80,.16),
        inset 0 0 24px rgba(0,0,0,.6),
        0 0 0 1px rgba(76,175,80,.08);
    position: relative;
    overflow: hidden;
}
/* Screen scanline */
.lc-screen::before {
    content:'CNC FANUC 0i';
    display: block; margin-bottom: 3px;
    font-size: .4rem; color: #4CAF50;
    font-family: monospace; letter-spacing: .8px;
    text-shadow: 0 0 8px rgba(76,175,80,.9);
    border-bottom: 1px solid rgba(76,175,80,.2);
    padding-bottom: 3px;
}
.lc-screen::after {
    content:'';
    position: absolute; inset: 0;
    background: repeating-linear-gradient(0deg,
        transparent 0, transparent 2px,
        rgba(0,0,0,.08) 2px, rgba(0,0,0,.08) 4px);
    pointer-events: none;
    animation: lcScanline 8s linear infinite;
}
@keyframes lcScanline {
    from { background-position: 0 0; }
    to   { background-position: 0 100%; }
}
.lc-screen-text {
    font-family: 'Courier New', monospace;
    font-size: .54rem; line-height: 1.7;
    color: #6eff6e;
    text-shadow: 0 0 5px rgba(76,175,80,.6);
    white-space: pre;
    animation: lcCursorBlink 1s step-end infinite;
}

/* === HANDWHEELS (CONVENTIONAL) === */
.lc-handwheel {
    position: absolute; border-radius: 50%;
    background: radial-gradient(circle at 34% 30%,
        #62687a 0%, #464c5a 50%, #2c3040 100%);
    border: 3px solid #545a6a;
    box-shadow:
        2px 4px 14px rgba(0,0,0,.6),
        inset 0 2px 6px rgba(255,255,255,.05);
    z-index: 22;
}
.lc-handwheel::before {
    content:''; position: absolute;
    top: 50%; left: 10%; width: 80%; height: 2px;
    background: linear-gradient(90deg, transparent, #545a6a, transparent);
    transform: translateY(-50%);
}
.lc-handwheel::after {
    content:''; position: absolute;
    top: 10%; left: 50%; width: 2px; height: 80%;
    background: linear-gradient(180deg, transparent, #545a6a, transparent);
    transform: translateX(-50%);
}
.lc-hw-hub {
    position: absolute; top: 50%; left: 50%;
    transform: translate(-50%,-50%);
    width: 30%; height: 30%; border-radius: 50%;
    background: radial-gradient(circle, #383d4a 0%, #1e2230 100%);
    border: 2px solid #464c5a;
}
.lc-hw-carriage { width: 48px; height: 48px; bottom: calc(var(--lc-bed) + 5px); right: 27%; }
.lc-hw-cross    { width: 38px; height: 38px; bottom: calc(var(--lc-bed) + 15px); right: 18%; }
.lc-handwheel.spinning {
    animation: lcHwSpin 1s linear infinite;
}
@keyframes lcHwSpin { to { transform: rotate(360deg); } }

/* === GEAR BOX (CONVENTIONAL) === */
.lc-gear-box {
    position: absolute; left: 1%;
    bottom: calc(var(--lc-bed) + 1px);
    width: 40px; height: 48px;
    background: linear-gradient(155deg, #3c4450 0%, #2e3440 100%);
    border: 2px solid #4c5460; border-bottom: none;
    border-radius: 4px 4px 0 0;
    z-index: 7;
    box-shadow: 2px 0 10px rgba(0,0,0,.4), inset 0 1px 4px rgba(255,255,255,.03);
}
.lc-gear-box::after {
    content:'GEAR'; position: absolute;
    top: 6px; left: 50%; transform: translateX(-50%);
    font-size: .34rem; color: #7a8090; font-weight: 800; letter-spacing: .5px;
}
.lc-gear-knob {
    position: absolute; bottom: 9px; left: 50%;
    transform: translateX(-50%);
    width: 18px; height: 18px; border-radius: 50%;
    background: radial-gradient(circle, #686e7a 0%, #3a3f4c 100%);
    border: 2px solid #585e6a;
    box-shadow: 0 2px 6px rgba(0,0,0,.5);
    transition: transform .5s ease;
}
/* Gear knob notch */
.lc-gear-knob::after {
    content:''; position: absolute;
    top: 2px; left: 50%; width: 2px; height: 5px;
    background: rgba(255,255,255,.2);
    transform: translateX(-50%);
    border-radius: 1px;
}

/* === CHIP TRAY === */
.lc-chip-tray {
    position: absolute; bottom: 0; left: 14%; right: 12%;
    height: 10px;
    background: #141820;
    border-top: 1px solid #242a36;
    z-index: 3; overflow: hidden;
}
.lc-chip-pile {
    position: absolute; bottom: 0;
    left: 22%; right: 28%; height: 6px;
    background: rgba(110,90,60,0);
    border-radius: 4px 4px 0 0;
    transition: background 1s, height .8s;
}
.lc-chip-pile.active {
    background: rgba(120,100,65,.5);
    height: 7px;
    box-shadow: 0 0 8px rgba(180,140,80,.2);
}

/* === CNC PART COUNTER === */
.lc-part-counter {
    position: absolute; bottom: calc(var(--lc-bed) + 4px);
    left: 15%;
    font-size: .4rem; color: #4CAF50;
    font-family: monospace;
    text-shadow: 0 0 5px rgba(76,175,80,.7);
    z-index: 12;
    background: rgba(5,12,8,.88);
    padding: 2px 6px; border-radius: 3px;
    border: 1px solid rgba(76,175,80,.25);
    letter-spacing: .5px;
}

/* === RPM DISPLAY (CONVENTIONAL) === */
.lc-rpm-display {
    position: absolute; bottom: calc(var(--lc-bed) + 4px);
    right: calc(12% + 2px);
    font-size: .44rem; color: #f0c040;
    font-family: monospace;
    z-index: 12;
    background: rgba(10,8,4,.9);
    padding: 3px 6px; border-radius: 3px;
    border: 1px solid rgba(200,160,20,.3);
    text-shadow: 0 0 5px rgba(240,192,64,.6);
    transition: color .3s, text-shadow .3s;
    letter-spacing: .3px;
}

/* === HEADSTOCK VIBRATION INDICATOR === */
.lc-hs-indicator {
    position: absolute; bottom: 16px; left: 50%;
    transform: translateX(-50%);
    width: 24px; height: 24px; border-radius: 50%;
    background: radial-gradient(circle, #3a3f4c 0%, #242830 100%);
    border: 2px solid #484e5c;
    box-shadow: inset 0 2px 6px rgba(0,0,0,.7);
}

/* === ELECTRICAL ARC (on heavy cuts) === */
.lc-arc {
    position: absolute; top: -20px; left: 45%;
    width: 30px; height: 25px;
    pointer-events: none; z-index: 23;
    opacity: 0; transition: opacity .2s;
}
.lc-arc.active { opacity: 1; }
.lc-arc-bolt {
    position: absolute; top: 0; left: 50%;
    width: 2px; height: 100%;
    background: linear-gradient(180deg,
        rgba(200,200,255,0) 0%,
        rgba(180,180,255,.8) 30%,
        #ffffff 50%,
        rgba(180,180,255,.8) 70%,
        rgba(200,200,255,0) 100%);
    transform-origin: top center;
    filter: blur(.5px);
    animation: lcArcBolt .08s steps(1) infinite paused;
    box-shadow: 0 0 4px rgba(200,200,255,.6), 0 0 10px rgba(150,150,255,.4);
}
.lc-arc.active .lc-arc-bolt { animation-play-state: running; }
@keyframes lcArcBolt {
    0%   { transform: skewX(0deg) scaleX(1); opacity: 1; }
    25%  { transform: skewX(-15deg) scaleX(1.5); opacity: .7; }
    50%  { transform: skewX(10deg) scaleX(.8); opacity: 1; }
    75%  { transform: skewX(-8deg) scaleX(1.3); opacity: .6; }
    100% { transform: skewX(5deg) scaleX(1.1); opacity: .9; }
}

/* === RESPONSIVE === */
@media(max-width:1200px) {
    .lathe-canvas {
        height: 360px;
        --lc-bed:58px; --lc-spindle:150px; --lc-wp-h:50px; --lc-wp-r:25px; --lc-chuck-r:35px;
    }
    .lc-screen { width: 100px; height: 84px; }
}
@media(max-width:900px) {
    .lathe-canvas {
        height: 316px;
        --lc-bed:52px; --lc-spindle:132px; --lc-wp-h:44px; --lc-wp-r:22px; --lc-chuck-r:30px;
    }
    .lc-screen { width: 88px; height: 74px; }
    .lc-screen-text { font-size: .48rem; }
    .lc-hw-carriage { width: 40px; height: 40px; }
    .lc-hw-cross { width: 32px; height: 32px; }
}
@media(max-width:640px) {
    .lathe-canvas {
        height: 278px;
        --lc-bed:46px; --lc-spindle:116px; --lc-wp-h:38px; --lc-wp-r:19px; --lc-chuck-r:26px;
    }
    .lc-screen { width: 78px; height: 65px; }
    .lc-screen-text { font-size: .42rem; }
    .lc-hw-carriage { width: 36px; height: 36px; }
    .lc-hw-cross { width: 28px; height: 28px; }
    .lc-cnc-panel { right: calc(13% + 2px); }
}
@media(max-width:420px) {
    .lathe-canvas {
        height: 248px;
        --lc-bed:42px; --lc-spindle:104px; --lc-wp-h:34px; --lc-wp-r:17px; --lc-chuck-r:23px;
    }
    .lc-screen { width: 68px; height: 57px; }
    .lc-screen::before { font-size: .36rem; }
    .lc-screen-text { font-size: .4rem; }
    .lc-hw-carriage { width: 32px; height: 32px; }
    .lc-hw-cross { width: 25px; height: 25px; }
}
/* === FIX PERSPECTIVA: workpiece tapa el chuck === */
    /* === PERSPECTIVA CHUCK — orden de capas correcto === */
    .lc-workpiece    { z-index: 11 !important; }
    .lc-chuck        { z-index: 9  !important; }
    .lc-spindle-nose { z-index: 7  !important; }

    /* Máscara que oculta la parte del chuck que quedaría "dentro" del workpiece.
       El workpiece empieza en left:20%, el chuck en left:14%.
       El chuck tiene ancho = chuck-r*2. Ocultamos su mitad derecha
       mediante un pseudo-elemento blanco que imita el workpiece */
    .lc-chuck-mask {
        position: absolute;
        /* Se posiciona igual que el workpiece pero con z-index entre chuck y workpiece */
        left: 20%;
        top: calc(var(--lc-spindle) - var(--lc-wp-r));
        width: 18px;            /* solapa suficiente para tapar el borde del chuck */
        height: var(--lc-wp-h);
        z-index: 10;
        background: linear-gradient(90deg,
            #2a3040 0%,          /* mismo color que el fondo oscuro del canvas */
            #1e2530 100%);
        pointer-events: none;
    }

    /* Gradiente de sombra en el extremo izquierdo del workpiece
       para dar sensación de que el chuck "entra" en él */
    .lc-wp-shadow-left {
        position: absolute;
        left: 0; top: 0; bottom: 0;
        width: 10px;
        background: linear-gradient(90deg,
            rgba(0,0,0,.55) 0%,
            transparent 100%);
        border-radius: 2px 0 0 2px;
        pointer-events: none;
        z-index: 1;
    }

    /* Borde metálico donde el workpiece "sale" del chuck */
    .lc-wp-chuck-joint {
        position: absolute;
        left: 0; top: -1px; bottom: -1px;
        width: 4px;
        background: linear-gradient(90deg,
            #505868 0%, #6a7280 50%, #454d5a 100%);
        box-shadow: 2px 0 6px rgba(0,0,0,.4);
        z-index: 2;
        border-radius: 1px;
    }

/* === LÁMPARA DE TRABAJO === */
.lc-work-lamp {
    position: absolute;
    top: 8px;
    left: 18%;
    width: 6px;
    height: 28px;
    background: linear-gradient(180deg, #3a3f4a 0%, #2c3038 100%);
    border-radius: 3px;
    z-index: 28;
    transform-origin: top center;
    transform: rotate(25deg);
    box-shadow: 1px 1px 6px rgba(0,0,0,.5);
}
.lc-work-lamp::before {
    content: '';
    position: absolute;
    bottom: -4px; left: -5px;
    width: 16px; height: 10px;
    background: linear-gradient(180deg, #555a66 0%, #3a3f48 100%);
    border-radius: 3px 3px 6px 6px;
    border: 1px solid #606570;
}
.lc-work-lamp-beam {
    position: absolute;
    bottom: -38px; left: -14px;
    width: 42px; height: 38px;
    background: radial-gradient(ellipse at 50% 0%,
        rgba(255,240,180,.12) 0%,
        rgba(255,230,150,.05) 50%,
        transparent 80%);
    pointer-events: none;
    opacity: 0;
    transition: opacity .6s;
    border-radius: 0 0 50% 50%;
    z-index: 27;
}
.lc-work-lamp-beam.active { opacity: 1; }
.lc-work-lamp-tip {
    position: absolute;
    bottom: -2px; left: 50%;
    transform: translateX(-50%);
    width: 7px; height: 7px; border-radius: 50%;
    background: #f0e060;
    box-shadow: 0 0 0 transparent;
    transition: box-shadow .4s, background .4s;
}
.lc-work-lamp-tip.on {
    background: #fff8a0;
    box-shadow: 0 0 6px #ffe840, 0 0 14px rgba(255,220,60,.5);
}

/* === DISPLAY TEMPERATURA DIGITAL === */
.lc-temp-display {
    position: absolute;
    top: 10px;
    left: 15%;
    background: #04080a;
    border: 1.5px solid #1a3020;
    border-radius: 4px;
    padding: 3px 6px;
    z-index: 26;
    box-shadow: 0 0 10px rgba(0,200,100,.08), inset 0 0 8px rgba(0,0,0,.5);
    min-width: 62px;
}
.lc-temp-display::before {
    content: 'TEMP °C';
    display: block;
    font-size: .32rem;
    color: #406050;
    font-family: monospace;
    letter-spacing: .8px;
    margin-bottom: 1px;
}
.lc-temp-value {
    font-family: 'Courier New', monospace;
    font-size: .7rem;
    font-weight: 700;
    color: #00e060;
    text-shadow: 0 0 6px rgba(0,220,80,.7);
    letter-spacing: 1px;
    transition: color .4s, text-shadow .4s;
}
.lc-temp-value.warm { color: #f0a020; text-shadow: 0 0 6px rgba(240,160,30,.7); }
.lc-temp-value.hot  { color: #ff3820; text-shadow: 0 0 8px rgba(255,60,20,.8); animation: lcTempBlink .5s step-end infinite; }
@keyframes lcTempBlink { 50% { opacity: .4; } }

/* === MANÓMETRO REFRIGERANTE === */
.lc-pressure-gauge {
    position: absolute;
    bottom: calc(var(--lc-bed) + 6px);
    left: 16%;
    width: 28px; height: 28px;
    background: radial-gradient(circle at 40% 38%, #3a4050 0%, #1e2230 100%);
    border: 2px solid #444c5c;
    border-radius: 50%;
    z-index: 13;
    box-shadow: 1px 2px 8px rgba(0,0,0,.5);
    overflow: hidden;
}
.lc-pressure-gauge::before {
    content: '';
    position: absolute; inset: 3px;
    border-radius: 50%;
    border: 1px solid rgba(255,255,255,.06);
}
.lc-pressure-gauge::after {
    content: 'BAR';
    position: absolute;
    bottom: 4px; left: 50%;
    transform: translateX(-50%);
    font-size: .24rem; color: #606880; font-family: monospace; font-weight: 700;
}
.lc-pressure-needle {
    position: absolute;
    bottom: 50%; left: 50%;
    width: 1.5px; height: 38%;
    background: linear-gradient(0deg, #ff4444 0%, #ff8888 100%);
    transform-origin: bottom center;
    transform: translateX(-50%) rotate(-60deg);
    border-radius: 1px 1px 0 0;
    transition: transform .6s cubic-bezier(.3,1.4,.4,1);
    box-shadow: 0 0 3px rgba(255,80,80,.4);
    z-index: 1;
}
.lc-pressure-cap {
    position: absolute; top: 50%; left: 50%;
    transform: translate(-50%,-50%);
    width: 5px; height: 5px; border-radius: 50%;
    background: #888; z-index: 2;
}

/* === INDICADOR DE DESGASTE DE HERRAMIENTA === */
.lc-wear-indicator {
    position: absolute;
    top: 10px;
    right: calc(13% + 8px);
    width: 36px;
    z-index: 26;
}
.lc-wear-label {
    font-size: .3rem; color: #606880;
    font-family: monospace; font-weight: 700;
    text-align: center; letter-spacing: .5px;
    margin-bottom: 2px;
    text-transform: uppercase;
}
.lc-wear-bar-bg {
    width: 100%; height: 6px;
    background: #1a1e28;
    border: 1px solid #2e3240;
    border-radius: 3px; overflow: hidden;
}
.lc-wear-bar-fill {
    height: 100%; width: 15%;
    background: linear-gradient(90deg, #4CAF50 0%, #8BC34A 100%);
    border-radius: 3px;
    transition: width .8s ease, background .5s;
    box-shadow: 0 0 4px rgba(76,175,80,.4);
}
.lc-wear-bar-fill.medium {
    background: linear-gradient(90deg, #FF9800 0%, #FFC107 100%);
    box-shadow: 0 0 4px rgba(255,160,0,.5);
}
.lc-wear-bar-fill.high {
    background: linear-gradient(90deg, #f44336 0%, #FF5722 100%);
    box-shadow: 0 0 6px rgba(244,67,54,.6);
    animation: lcWearPulse .6s ease-in-out infinite;
}
@keyframes lcWearPulse { 50% { opacity: .6; } }
.lc-wear-pct {
    font-size: .3rem; color: #8090a0;
    font-family: monospace; text-align: right;
    margin-top: 1px; letter-spacing: .3px;
}

/* === VIBRÓMETRO / SENSOR DE VIBRACIÓN === */
.lc-vibro {
    position: absolute;
    bottom: calc(var(--lc-bed) + 6px);
    right: calc(13% + 6px);
    background: #04080a;
    border: 1.5px solid #1a2030;
    border-radius: 3px;
    padding: 2px 5px;
    z-index: 13;
    min-width: 52px;
    box-shadow: inset 0 0 6px rgba(0,0,0,.4);
}
.lc-vibro::before {
    content: 'VIBR mm/s';
    display: block;
    font-size: .28rem; color: #404860;
    font-family: monospace; letter-spacing: .5px;
}
.lc-vibro-value {
    font-family: 'Courier New', monospace;
    font-size: .58rem; font-weight: 700;
    color: #4080ff;
    text-shadow: 0 0 5px rgba(60,120,255,.6);
    transition: color .3s;
}
.lc-vibro-value.warn  { color: #ff9900; text-shadow: 0 0 5px rgba(255,150,0,.7); }
.lc-vibro-value.alarm { color: #ff2200; text-shadow: 0 0 8px rgba(255,30,0,.8); animation: lcVibroBlink .3s step-end infinite; }
@keyframes lcVibroBlink { 50% { opacity: 0; } }

/* Waveform mini display */
.lc-vibro-wave {
    width: 100%; height: 8px;
    position: relative; overflow: hidden;
    margin-top: 1px;
}
.lc-vibro-line {
    position: absolute;
    top: 50%; left: -100%;
    width: 200%; height: 1px;
    background: transparent;
    box-shadow: none;
    transition: none;
}
.lc-vibro-line.active {
    background: linear-gradient(90deg,
        transparent 0%, #4080ff 10%, #4080ff 90%, transparent 100%);
    animation: lcVibroWave .15s linear infinite;
    top: 4px;
    clip-path: polygon(
        0% 50%, 5% 20%, 10% 80%, 15% 10%, 20% 90%, 25% 30%,
        30% 70%, 35% 15%, 40% 85%, 45% 35%, 50% 65%,
        55% 20%, 60% 80%, 65% 25%, 70% 75%, 75% 40%,
        80% 60%, 85% 30%, 90% 70%, 95% 45%, 100% 50%
    );
    height: 8px;
}
@keyframes lcVibroWave { from { transform: translateX(0); } to { transform: translateX(50%); } }

/* === ENCODER / POSICIÓN Z === */
.lc-encoder {
    position: absolute;
    bottom: calc(var(--lc-bed) + 6px);
    left: 50%;
    transform: translateX(-50%);
    background: #030608;
    border: 1.5px solid #18202c;
    border-radius: 3px;
    padding: 2px 5px;
    z-index: 13;
    text-align: center;
    min-width: 58px;
    box-shadow: inset 0 0 6px rgba(0,0,0,.4);
}
.lc-encoder::before {
    content: 'POS Z (mm)';
    display: block;
    font-size: .28rem; color: #404050;
    font-family: monospace; letter-spacing: .4px;
}
.lc-encoder-value {
    font-family: 'Courier New', monospace;
    font-size: .6rem; font-weight: 700;
    color: #60d8ff;
    text-shadow: 0 0 5px rgba(60,200,255,.6);
}

/* === CONTADOR DE PIEZAS (CONV) === */
.lc-conv-counter {
    position: absolute;
    bottom: calc(var(--lc-bed) + 4px);
    left: 15%;
    font-size: .4rem; color: #c0a030;
    font-family: monospace;
    text-shadow: 0 0 4px rgba(200,160,40,.5);
    z-index: 12;
    background: rgba(10,8,2,.88);
    padding: 2px 5px; border-radius: 2px;
    border: 1px solid rgba(200,160,40,.2);
}

/* === INDICADOR DE MODO DE CORTE === */
.lc-cut-mode-indicator {
    position: absolute;
    top: 10px; left: 50%; transform: translateX(-50%);
    background: rgba(5,8,14,.9);
    border: 1px solid #2a3040;
    border-radius: 12px;
    padding: 2px 10px;
    z-index: 27;
    white-space: nowrap;
}
.lc-cut-mode-text {
    font-size: .35rem; font-family: monospace; font-weight: 700;
    color: #5080c0; letter-spacing: 1px;
    text-transform: uppercase;
    transition: color .3s;
}
.lc-cut-mode-text.active { color: #40d060; text-shadow: 0 0 6px rgba(60,200,80,.6); }

/* === PROTECTOR DE VIRUTA (guarda) === */
.lc-guard {
    position: absolute;
    left: 18%;
    top: 20px;
    width: 52%;
    height: calc(var(--lc-spindle) - 10px);
    border: 1.5px solid rgba(100,130,160,.15);
    border-bottom: none;
    border-radius: 6px 6px 0 0;
    pointer-events: none;
    z-index: 4;
    background: linear-gradient(180deg,
        rgba(80,120,160,.04) 0%,
        transparent 60%);
}
.lc-guard::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; height: 3px;
    background: linear-gradient(90deg,
        transparent 0%, rgba(100,150,200,.2) 30%,
        rgba(100,150,200,.2) 70%, transparent 100%);
    border-radius: 3px 3px 0 0;
}
        /* Stats panel - BURBUJAS CIRCULARES */
        /* Stats panel — NUEVO DISEÑO EXPANDIDO */
        .stats-panel {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: .7rem;
            margin: 1.2rem 0;
            padding: 1rem 1.2rem;
            background: linear-gradient(135deg,
                rgba(109,31,65,.06) 0%,
                rgba(109,31,65,.02) 100%);
            border-radius: 10px;
            border: 1px solid var(--border-color);
        }

        /* Fila inferior con parámetros adicionales */
        .stats-panel-row2 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: .6rem;
            margin: -.5rem 0 1rem 0;
            padding: .7rem 1.2rem;
            background: linear-gradient(135deg,
                rgba(109,31,65,.03) 0%,
                rgba(109,31,65,.01) 100%);
            border-radius: 0 0 10px 10px;
            border: 1px solid var(--border-color);
            border-top: none;
        }

        /* Tarjeta de parámetro — estilo rectangular pequeño */
        .stat-mini {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: .5rem .3rem;
            background: var(--ipn-white);
            border-radius: 6px;
            border: 2px solid var(--border-color);
            transition: border-color .3s, box-shadow .3s;
            position: relative;
            overflow: hidden;
        }
        .stat-mini::before {
            content: '';
            position: absolute; top: 0; left: 0; right: 0;
            height: 3px;
            background: var(--border-color);
            transition: background .3s;
        }
        .stat-mini.ok    { border-color: #27ae60; }
        .stat-mini.ok::before    { background: #27ae60; }
        .stat-mini.warn  { border-color: #f39c12; }
        .stat-mini.warn::before  { background: #f39c12; }
        .stat-mini.danger{ border-color: #e74c3c; }
        .stat-mini.danger::before{ background: #e74c3c; }

        .stat-mini-label {
            font-size: .62rem;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: .4px;
            text-align: center;
            margin-bottom: .2rem;
            white-space: nowrap;
        }
        .stat-mini-value {
            font-size: 1.05rem;
            font-weight: 700;
            color: var(--ipn-guinda);
            font-family: 'Roboto Condensed', sans-serif;
            transition: color .3s;
            text-align: center;
        }
        .stat-mini-value.ok     { color: #27ae60; }
        .stat-mini-value.warn   { color: #f39c12; }
        .stat-mini-value.danger { color: #e74c3c; }
        .stat-mini-unit {
            font-size: .58rem;
            color: var(--text-light);
            margin-top: .1rem;
        }
        /* Icono semáforo */
        .stat-mini-dot {
            position: absolute; top: 5px; right: 6px;
            width: 6px; height: 6px; border-radius: 50%;
            background: var(--border-color);
            transition: background .3s, box-shadow .3s;
        }
        .stat-mini.ok .stat-mini-dot    { background: #27ae60; box-shadow: 0 0 4px rgba(39,174,96,.5); }
        .stat-mini.warn .stat-mini-dot  { background: #f39c12; box-shadow: 0 0 4px rgba(243,156,18,.5); }
        .stat-mini.danger .stat-mini-dot{ background: #e74c3c; box-shadow: 0 0 4px rgba(231,76,60,.5); animation: dotBlink .7s step-end infinite; }
        @keyframes dotBlink { 50% { opacity: 0; } }


        .stat-bubble {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--ipn-white) 0%, var(--ipn-cream) 100%);
            border: 3px solid var(--ipn-guinda);
            box-shadow: 0 4px 15px var(--shadow);
            transition: all 0.3s ease;
            position: relative;
        }

        .stat-bubble:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px var(--shadow);
        }

        .stat-bubble.optimal {
            border-color: #27ae60;
        }

        .stat-bubble.warning {
            border-color: #f39c12;
        }

        .stat-bubble.danger {
            border-color: #e74c3c;
        }

        .stat-label {
            font-size: 0.68rem;
            color: var(--text-light);
            margin-bottom: 0.3rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--ipn-guinda);
            font-family: 'Roboto Condensed', sans-serif;
        }

        .stat-value.warning {
            color: #f39c12;
        }

        .stat-value.danger {
            color: #e74c3c;
        }

        .stat-value.optimal {
            color: #27ae60;
        }

        .stat-unit {
            font-size: 0.7rem;
            color: var(--text-light);
            margin-top: 0.2rem;
        }

        /* Alert boxes */
        .alert-box {
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
            border-left: 4px solid;
            font-size: 0.9rem;
            display: none;
        }

        .alert-box.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .alert-optimal {
            background: rgba(39, 174, 96, 0.1);
            border-left-color: #27ae60;
            color: #27ae60;
        }

        .alert-warning {
            background: rgba(243, 156, 18, 0.1);
            border-left-color: #f39c12;
            color: #e67e22;
        }

        .alert-danger {
            background: rgba(231, 76, 60, 0.1);
            border-left-color: #e74c3c;
            color: #c0392b;
        }

        /* Controls */
        .controls {
            margin-top: 2rem;
        }

        .control-group {
            margin-bottom: 1.8rem;
        }

        .control-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.8rem;
        }

        .label-text {
            font-weight: 600;
            color: var(--text-dark);
            font-size: 0.95rem;
        }

        .label-value {
            font-family: 'Roboto Condensed', sans-serif;
            color: var(--ipn-guinda);
            font-weight: 700;
            font-size: 1.1rem;
        }

        .slider {
            width: 100%;
            height: 6px;
            background: var(--border-color);
            outline: none;
            border-radius: 3px;
            -webkit-appearance: none;
            appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: var(--ipn-guinda);
            cursor: pointer;
            border-radius: 50%;
            border: 2px solid var(--ipn-white);
            box-shadow: 0 2px 8px var(--shadow);
            transition: all 0.2s;
        }

        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: var(--ipn-guinda);
            cursor: pointer;
            border-radius: 50%;
            border: 2px solid var(--ipn-white);
            box-shadow: 0 2px 8px var(--shadow);
            transition: all 0.2s;
        }

        .material-selector {
            margin-bottom: 2rem;
        }

        select {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid var(--border-color);
            border-radius: 4px;
            background: var(--ipn-white);
            color: var(--text-dark);
            font-size: 1rem;
            font-family: 'Roboto', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        select:focus {
            outline: none;
            border-color: var(--ipn-guinda);
        }

        .status-info {
            background: linear-gradient(135deg, rgba(109, 31, 65, 0.05) 0%, rgba(109, 31, 65, 0.02) 100%);
            border-left: 4px solid var(--ipn-guinda);
            padding: 1rem;
            margin-top: 1.5rem;
            border-radius: 4px;
            font-size: 0.9rem;
            color: var(--text-dark);
        }

        /* References page */
        .references-list {
            list-style: none;
            padding: 0;
        }

        .references-list li {
            padding: 1rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .references-list li:last-child {
            border-bottom: none;
        }

        .ref-number {
            display: inline-block;
            background: var(--ipn-guinda);
            color: var(--ipn-white);
            width: 28px;
            height: 28px;
            border-radius: 50%;
            text-align: center;
            line-height: 28px;
            font-weight: 600;
            margin-right: 1rem;
            font-size: 0.85rem;
        }

        .developer-card {
            background: linear-gradient(135deg, var(--ipn-guinda) 0%, var(--ipn-guinda-dark) 100%);
            color: var(--ipn-white);
            border-radius: 8px;
            padding: 2.5rem;
            text-align: center;
            margin-top: 2rem;
        }

        .developer-name {
            font-size: 2rem;
            font-weight: 700;
            font-family: 'Roboto Condensed', sans-serif;
            margin-bottom: 0.5rem;
        }

        .developer-title {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 1rem;
        }

        .developer-info {
            font-size: 0.95rem;
            opacity: 0.85;
            line-height: 1.6;
        }

        footer {
            background: var(--ipn-guinda);
            color: var(--ipn-white);
            text-align: center;
            padding: 2rem;
            margin-top: 4rem;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .stats-panel {
                flex-wrap: wrap;
            }
            
            .stat-bubble {
                width: 88px;
                height: 88px;
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.3rem;
            }

            .header-content {
                flex-direction: column;
                text-align: center;
            }

            .nav-btn {
                padding: 1rem 1.5rem;
                font-size: 0.9rem;
            }

            .nav-content {
                flex-wrap: wrap;
            }

            .material-grid {
                grid-template-columns: 1fr;
            }

            .mode-selector {
                flex-direction: column;
                width: 100%;
            }

            .mode-btn {
                width: 100%;
            }

            .sim-card {
                padding: 1.5rem;
            }

            .lathe-canvas {
                height: 350px;
            }

            table {
                font-size: 0.85rem;
            }

            th, td {
                padding: 0.7rem 0.5rem;
            }

            .card {
                padding: 1.5rem;
            }

            .card-title {
                font-size: 1.5rem;
            }

            .stats-panel {
                flex-direction: column;
            }

            .stat-bubble {
                width: 115px;
                height: 115px;
            }

            .stat-label {
                font-size: 0.7rem;
            }

            .stat-value {
                font-size: 1.1rem;
            }

            .control-group {
                margin-bottom: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 1.5rem 1rem;
            }

            h1 {
                font-size: 1.1rem;
            }

            .subtitle {
                font-size: 0.9rem;
            }

            .ipn-logo {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }

            .nav-btn {
                padding: 0.9rem 1.2rem;
                font-size: 0.85rem;
            }

            .card-title {
                font-size: 1.3rem;
            }

            .lathe-canvas {
                height: 300px;
            }

            .material-name {
                font-size: 1rem;
            }

            .material-speed {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo-section">
                <div class="ipn-logo">IPN</div>
                <div>
                    <h1>SIMULADOR DE TORNEADO</h1>
                    <p style="font-size: 0.9rem; opacity: 0.9; margin-top: 0.3rem;">Parámetros de Corte en Maquinado</p>
                </div>
            </div>
        </div>
    </header>

    <nav>
        <div class="nav-content">
            <button class="nav-btn active" onclick="showPage('index')">INFORMACIÓN</button>
            <button class="nav-btn" onclick="showPage('velocities')">VELOCIDADES DE CORTE</button>
            <button class="nav-btn" onclick="showPage('simulation')">SIMULACIÓN</button>
            <button class="nav-btn" onclick="showPage('references')">REFERENCIAS</button>
        </div>
    </nav>

    <div class="container">
        <!-- INDEX PAGE -->
        <div id="index" class="page active">
            <div class="card">
                <h2 class="card-title">Velocidad de Avance en Torneado</h2>
                <div class="card-content">
                    <p>La <strong>velocidad de avance (f)</strong> se mide en <strong>mm/rev</strong> (milímetros por revolución) y determina qué tan rápido se desplaza la herramienta de corte a lo largo de la pieza por cada rotación del husillo.</p>
                    
                    <div class="highlight-box">
                        <p><strong>Punto Clave:</strong> El avance afecta directamente la calidad superficial y el tiempo de mecanizado. Mayor avance = más rápido, pero peor acabado.</p>
                    </div>

                    <table>
                        <thead>
                            <tr>
                                <th>Operación</th>
                                <th>Rango de Avance</th>
                                <th>Objetivo</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Desbaste</strong></td>
                                <td>0.25 – 0.60 mm/rev</td>
                                <td>Remover material rápidamente</td>
                            </tr>
                            <tr>
                                <td><strong>Acabado</strong></td>
                                <td>0.05 – 0.20 mm/rev</td>
                                <td>Lograr buen acabado superficial y precisión</td>
                            </tr>
                        </tbody>
                    </table>

                    <p><strong>Factores que influyen en el avance:</strong></p>
                    <ul style="margin-left: 2rem; margin-top: 1rem; line-height: 2;">
                        <li><strong>Rigidez:</strong> Mayor rigidez del sistema máquina-herramienta-pieza permite aumentar el avance</li>
                        <li><strong>Material:</strong> Materiales dúctiles (aluminio, latón) admiten avances mayores que materiales duros</li>
                        <li><strong>Herramienta:</strong> Plaquitas "wiper" o con radio de punta grande permiten duplicar o triplicar el avance</li>
                        <li><strong>Acabado requerido:</strong> Acabados finos requieren avances muy bajos</li>
                    </ul>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title">Profundidad de Corte</h2>
                <div class="card-content">
                    <p>La <strong>profundidad de corte (ap)</strong> es el espesor radial de material que se remueve en cada pasada. Se mide como la diferencia entre el radio inicial y final de la pieza.</p>
                    
                    <div class="highlight-box">
                        <p><strong>Fórmula:</strong> ap = (Diámetro inicial - Diámetro final) / 2</p>
                        <p style="margin-top: 0.5rem;"><strong>Ejemplo:</strong> Si torneamos de Ø50mm a Ø46mm → ap = (50-46)/2 = 2mm</p>
                    </div>

                    <table>
                        <thead>
                            <tr>
                                <th>Operación</th>
                                <th>Profundidad de Corte</th>
                                <th>Características</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Desbaste</strong></td>
                                <td>2 – 8 mm (o más)</td>
                                <td>Remoción rápida de material, varias pasadas</td>
                            </tr>
                            <tr>
                                <td><strong>Acabado</strong></td>
                                <td>0.1 – 0.5 mm</td>
                                <td>Pasada final para tolerancias y acabado superficial</td>
                            </tr>
                        </tbody>
                    </table>

                    <p><strong>Consideraciones importantes:</strong></p>
                    <ul style="margin-left: 2rem; margin-top: 1rem; line-height: 2;">
                        <li><strong>Material duro:</strong> (Acero templado, Inconel, Titanio) requieren pasadas más superficiales</li>
                        <li><strong>Fuerza de corte:</strong> Aumenta proporcionalmente con la profundidad de corte</li>
                        <li><strong>Rigidez:</strong> Máquinas más rígidas permiten profundidades mayores sin vibraciones</li>
                        <li><strong>Capacidad de herramienta:</strong> Plaquitas reforzadas soportan mayores profundidades</li>
                    </ul>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title">El Proceso de Torneado</h2>
                <div class="card-content">
                    <p>
                        El <strong>torneado</strong> es un proceso de mecanizado por arranque de viruta donde la pieza de trabajo gira 
                        mientras una herramienta de corte se desplaza linealmente para remover material y dar forma a la pieza.
                    </p>

                    <div style="text-align: center; margin-top: 1.5rem;">
                        <img src="Torneado.jpg" alt="Proceso de torneado" style="
                            width: 100%;
                            max-width: 650px;
                            height: auto;
                            border-radius: 10px;
                            box-shadow: 0px 6px 15px rgba(0,0,0,0.2);
                            display: block;
                            margin: 0 auto;
                        ">
                    </div>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title">Materiales de Herramientas de Corte</h2>
                <div class="card-content">
                    <p>La selección del material de la herramienta es crítica para el éxito del mecanizado. Cada material tiene propiedades específicas que lo hacen adecuado para diferentes aplicaciones.</p>

                    <table style="margin-top: 1.5rem;">
                        <thead>
                            <tr>
                                <th>Material</th>
                                <th>Dureza (HV)</th>
                                <th>Temp. Máx. (°C)</th>
                                <th>Aplicaciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>HSS (Acero Rápido)</strong></td>
                                <td>800-900</td>
                                <td>600</td>
                                <td>Velocidades bajas, piezas complejas, buena tenacidad</td>
                            </tr>
                            <tr>
                                <td><strong>Carburo sin recubrimiento</strong></td>
                                <td>1500-1800</td>
                                <td>800-900</td>
                                <td>Uso general, buena relación costo-rendimiento</td>
                            </tr>
                            <tr>
                                <td><strong>Carburo recubierto TiN</strong></td>
                                <td>2000-2400</td>
                                <td>600</td>
                                <td>Aceros, mejor vida útil que sin recubrimiento</td>
                            </tr>
                            <tr>
                                <td><strong>Carburo recubierto TiAlN</strong></td>
                                <td>3000</td>
                                <td>800-900</td>
                                <td>Aceros inoxidables, altas temperaturas</td>
                            </tr>
                            <tr>
                                <td><strong>Cerámica (Al₂O₃)</strong></td>
                                <td>2000-2500</td>
                                <td>1200</td>
                                <td>Fundiciones, aceros templados, altas velocidades</td>
                            </tr>
                            <tr>
                                <td><strong>CBN (Nitruro de Boro Cúbico)</strong></td>
                                <td>4500</td>
                                <td>1400</td>
                                <td>Aceros endurecidos (>45 HRC), fundiciones duras</td>
                            </tr>
                            <tr>
                                <td><strong>PCD (Diamante Policristalino)</strong></td>
                                <td>8000-10000</td>
                                <td>700</td>
                                <td>Aluminio, metales no ferrosos, plásticos reforzados</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="highlight-box" style="margin-top: 2rem;">
                        <p><strong>Regla general de selección:</strong></p>
                        <p style="margin-top: 0.5rem;">• Mayor dureza del material → Herramienta más dura requerida</p>
                        <p>• Mayor velocidad de corte → Herramienta con mayor resistencia térmica</p>
                        <p>• Operaciones interrumpidas → Herramienta más tenaz (carburo o HSS)</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title">Sistemas de Refrigeración y Lubricación</h2>
                <div class="card-content">
                    <p>El <strong>fluido de corte</strong> es esencial para disipar el calor generado durante el mecanizado, lubricar la interfaz herramienta-viruta, y evacuar las virutas de la zona de corte.</p>

                    <p style="margin-top: 1.5rem;"><strong>Tipos de fluidos de corte:</strong></p>
                    <ul style="margin-left: 2rem; margin-top: 1rem; line-height: 2;">
                        <li><strong>Aceites de corte puros:</strong> Excelente lubricación, pobre refrigeración. Usado en roscado y brocas</li>
                        <li><strong>Emulsiones (soluble oils):</strong> Balance entre lubricación y refrigeración. Más común en torneado general</li>
                        <li><strong>Fluidos sintéticos:</strong> Mejor refrigeración, menor lubricación. Para altas velocidades</li>
                        <li><strong>Fluidos semisintéticos:</strong> Híbrido, buenas propiedades generales</li>
                        <li><strong>MQL (Mínima Cantidad de Lubricante):</strong> Micro-pulverización, ecológico</li>
                    </ul>

                    <p style="margin-top: 1.5rem;"><strong>Métodos de aplicación:</strong></p>
                    <table style="margin-top: 1rem;">
                        <thead>
                            <tr>
                                <th>Método</th>
                                <th>Presión</th>
                                <th>Aplicación</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Inundación convencional</strong></td>
                                <td>2-10 bar</td>
                                <td>Torneado general, desbaste</td>
                            </tr>
                            <tr>
                                <td><strong>Alta presión (HPC)</strong></td>
                                <td>70-100 bar</td>
                                <td>Materiales difíciles (titanio, inconel)</td>
                            </tr>
                            <tr>
                                <td><strong>A través de herramienta</strong></td>
                                <td>10-30 bar</td>
                                <td>Taladrado profundo, mejor evacuación</td>
                            </tr>
                            <tr>
                                <td><strong>MQL</strong></td>
                                <td>5-8 bar (aire)</td>
                                <td>Mecanizado ecológico, aluminio</td>
                            </tr>
                            <tr>
                                <td><strong>Corte en seco</strong></td>
                                <td>-</td>
                                <td>Fundición gris, herramientas cerámicas/CBN</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="highlight-box" style="margin-top: 2rem;">
                        <p><strong>Cuando NO usar refrigeración:</strong></p>
                        <p style="margin-top: 0.5rem;">• Fundición gris (produce choque térmico en la herramienta)</p>
                        <p>• Herramientas cerámicas o CBN (sensibles al choque térmico)</p>
                        <p>• Magnesio (riesgo de reacción química violenta con agua)</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title">Acabado Superficial y Tolerancias</h2>
                <div class="card-content">
                    <p>El <strong>acabado superficial</strong> (Ra) es una medida de la rugosidad de la superficie mecanizada. Se mide en micrómetros (μm) y depende principalmente del avance y el radio de punta de la herramienta.</p>

                    <div class="highlight-box">
                        <p><strong>Fórmula teórica de rugosidad:</strong></p>
                        <p style="margin-top: 0.5rem;">Ra ≈ (f²) / (32 × r)</p>
                        <p style="margin-top: 0.3rem;">Donde: f = avance (mm/rev), r = radio de punta (mm)</p>
                    </div>

                    <table style="margin-top: 1.5rem;">
                        <thead>
                            <tr>
                                <th>Operación</th>
                                <th>Ra típico (μm)</th>
                                <th>Tolerancia IT</th>
                                <th>Aplicación</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Desbaste</strong></td>
                                <td>12.5 - 25</td>
                                <td>IT12 - IT13</td>
                                <td>Remoción rápida de material</td>
                            </tr>
                            <tr>
                                <td><strong>Semi-acabado</strong></td>
                                <td>3.2 - 6.3</td>
                                <td>IT9 - IT11</td>
                                <td>Preparación para acabado</td>
                            </tr>
                            <tr>
                                <td><strong>Acabado</strong></td>
                                <td>0.8 - 1.6</td>
                                <td>IT6 - IT8</td>
                                <td>Superficies funcionales</td>
                            </tr>
                            <tr>
                                <td><strong>Acabado fino</strong></td>
                                <td>0.2 - 0.4</td>
                                <td>IT5 - IT6</td>
                                <td>Ajustes precisos, rodamientos</td>
                            </tr>
                            <tr>
                                <td><strong>Super-acabado</strong></td>
                                <td>0.05 - 0.1</td>
                                <td>IT4</td>
                                <td>Superficies ópticas, sellos</td>
                            </tr>
                        </tbody>
                    </table>

                    <p style="margin-top: 1.5rem;"><strong>Factores que afectan el acabado:</strong></p>
                    <ul style="margin-left: 2rem; margin-top: 1rem; line-height: 2;">
                        <li><strong>Radio de punta mayor:</strong> Mejor acabado (plaquitas wiper tienen radio muy grande)</li>
                        <li><strong>Avance menor:</strong> Mejor acabado (relación cuadrática)</li>
                        <li><strong>Vibraciones:</strong> Degradan el acabado (rigidez es crítica)</li>
                        <li><strong>Desgaste de herramienta:</strong> Aumenta la rugosidad progresivamente</li>
                        <li><strong>Material de la pieza:</strong> Materiales dúctiles tienden a generar BUE (Built-Up Edge)</li>
                    </ul>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title">Características del Torno CNC</h2>
                <div class="card-content">
                    <p><strong>Control Numérico Computarizado:</strong> Sistema digital que ejecuta programas G-code para automatizar completamente el proceso de mecanizado.</p>
                    
                    <p style="margin-top: 1.5rem;"><strong>Componentes principales:</strong></p>
                    <ul style="margin-left: 2rem; margin-top: 1rem; line-height: 2;">
                        <li><strong>Panel de Control CNC:</strong> Pantalla táctil o con teclado para programación y monitoreo. Muestra posiciones en tiempo real, códigos G/M, y gráficos de trayectoria</li>
                        <li><strong>Torreta Automática:</strong> Portaherramientas motorizado con 6-12 posiciones. Cambio de herramienta en 0.5-2 segundos</li>
                        <li><strong>Servomotores:</strong> Motores de alta precisión con encoders para control exacto de posición (resolución típica: 0.001mm)</li>
                        <li><strong>Sistema de Refrigeración:</strong> Bombas de alta presión (hasta 70 bar) con boquillas programables</li>
                        <li><strong>Husillo Motorizado:</strong> Control de velocidad variable por frecuencia (VFD), típicamente 0-4000 RPM</li>
                        <li><strong>Guías Lineales:</strong> Rodamientos de bolas o rodillos para movimiento suave y preciso</li>
                    </ul>

                    <p style="margin-top: 1.5rem;"><strong>Modos de operación:</strong></p>
                    <ul style="margin-left: 2rem; margin-top: 1rem; line-height: 2;">
                        <li><strong>G96 (CSS):</strong> Constant Surface Speed - Mantiene Vc constante ajustando RPM automáticamente</li>
                        <li><strong>G97:</strong> RPM fijas - Similar a torno convencional, usado en roscado</li>
                        <li><strong>G94/G95:</strong> Avance en mm/min o mm/rev</li>
                        <li><strong>Ciclos fijos:</strong> G70-G76 para roscado, ranurado, desbaste automático</li>
                    </ul>

                    <p style="margin-top: 1.5rem;"><strong>Ventajas técnicas:</strong></p>
                    <ul style="margin-left: 2rem; margin-top: 1rem; line-height: 2;">
                        <li>Interpolación circular y elíptica para perfiles complejos</li>
                        <li>Compensación automática de desgaste de herramienta</li>
                        <li>Monitoreo de carga del husillo para prevenir roturas</li>
                        <li>Subprogramas y macros para operaciones repetitivas</li>
                        <li>Simulación gráfica antes de mecanizar</li>
                    </ul>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title">Características del Torno Convencional</h2>
                <div class="card-content">
                    <p><strong>Operación Manual:</strong> Control directo por el operador mediante volantes, palancas y cajas de cambios mecánicas. Requiere habilidad y experiencia del maquinista.</p>
                    
                    <p style="margin-top: 1.5rem;"><strong>Componentes principales:</strong></p>
                    <ul style="margin-left: 2rem; margin-top: 1rem; line-height: 2;">
                        <li><strong>Volante Longitudinal:</strong> Control manual del movimiento del carro en eje Z. Graduado típicamente en 0.05mm por división</li>
                        <li><strong>Volante Transversal:</strong> Control del movimiento radial (eje X). Permite ajuste fino de profundidad de corte</li>
                        <li><strong>Caja Norton:</strong> Sistema de engranajes para seleccionar avances automáticos (típico: 0.05-0.60 mm/rev)</li>
                        <li><strong>Palanca de Velocidades:</strong> Caja de cambios mecánica con 6-12 velocidades escalonadas</li>
                        <li><strong>Contrapunto:</strong> Soporte para piezas largas y para montaje de brocas/mandriles</li>
                        <li><strong>Portaherramientas:</strong> Torre de 4 posiciones típicamente, cambio manual</li>
                        <li><strong>Dial Graduado:</strong> Escalas en el carro para medición precisa (0.02-0.05mm de resolución)</li>
                    </ul>

                    <p style="margin-top: 1.5rem;"><strong>Controles de operación:</strong></p>
                    <ul style="margin-left: 2rem; margin-top: 1rem; line-height: 2;">
                        <li><strong>Selector de RPM:</strong> Palancas para cambiar relación de poleas/engranajes. Velocidades típicas: 100, 200, 400, 600, 900, 1200 RPM</li>
                        <li><strong>Avance automático:</strong> Palanca de conexión/desconexión del avance motorizado</li>
                        <li><strong>Roscar:</strong> Selector de paso de rosca mediante engranajes intercambiables</li>
                        <li><strong>Sentido de giro:</strong> Inversor manual o eléctrico para trabajos especiales</li>
                    </ul>

                    <p style="margin-top: 1.5rem;"><strong>Habilidades requeridas:</strong></p>
                    <ul style="margin-left: 2rem; margin-top: 1rem; line-height: 2;">
                        <li>Lectura e interpretación de planos técnicos</li>
                        <li>Cálculo manual de RPM y avances</li>
                        <li>Medición precisa con micrómetros y calibradores</li>
                        <li>Afilado y selección de herramientas</li>
                        <li>Ajuste de paralelismo y concentricidad</li>
                        <li>Control de acabado superficial por tacto y observación</li>
                    </ul>

                    <p style="margin-top: 1.5rem;"><strong>Limitaciones:</strong></p>
                    <ul style="margin-left: 2rem; margin-top: 1rem; line-height: 2;">
                        <li>RPM fijas - la Vc disminuye al reducir el diámetro</li>
                        <li>Cambio manual de herramientas (tiempo muerto)</li>
                        <li>Repetibilidad limitada por factor humano</li>
                        <li>Perfiles complejos difíciles o imposibles</li>
                        <li>Productividad menor en series grandes</li>
                    </ul>

                    <p style="margin-top: 1.5rem;"><strong>Aplicaciones ideales:</strong></p>
                    <ul style="margin-left: 2rem; margin-top: 1rem; line-height: 2;">
                        <li>Talleres de mantenimiento y reparación</li>
                        <li>Prototipos y piezas únicas</li>
                        <li>Producción de lotes muy pequeños (1-5 piezas)</li>
                        <li>Trabajos donde la habilidad artesanal es valorada</li>
                        <li>Enseñanza de fundamentos de mecanizado</li>
                    </ul>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title">CNC vs Convencional: Diferencias Clave</h2>
                <div class="card-content">
                    <table>
                        <thead>
                            <tr>
                                <th>Aspecto</th>
                                <th>Torno CNC</th>
                                <th>Torno Convencional</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Control de velocidad</strong></td>
                                <td>G96 - Velocidad de corte constante automática</td>
                                <td>RPM fijas, Vc varía con el diámetro</td>
                            </tr>
                            <tr>
                                <td><strong>Programación de avance</strong></td>
                                <td>mm/rev o mm/min con alta precisión digital</td>
                                <td>Selección mecánica (palanca de avances)</td>
                            </tr>
                            <tr>
                                <td><strong>Sistema de control</strong></td>
                                <td>CNC (Fanuc, Siemens, Haas) con pantalla táctil</td>
                                <td>Controles manuales (volantes y palancas)</td>
                            </tr>
                            <tr>
                                <td><strong>Posicionamiento</strong></td>
                                <td>Servomotores con encoders - precisión absoluta</td>
                                <td>Manual con escalas graduadas o visualizadores DRO</td>
                            </tr>
                            <tr>
                                <td><strong>Cambio de herramienta</strong></td>
                                <td>Torreta automática (6-12 herramientas) en segundos</td>
                                <td>Cambio manual - minutos por herramienta</td>
                            </tr>
                            <tr>
                                <td><strong>Repetibilidad</strong></td>
                                <td>±0.005mm - Alta precisión</td>
                                <td>±0.05mm - Depende del operador</td>
                            </tr>
                            <tr>
                                <td><strong>Productividad</strong></td>
                                <td>Alta - Operación continua 24/7 posible</td>
                                <td>Media - Requiere atención del operador</td>
                            </tr>
                            <tr>
                                <td><strong>Complejidad de piezas</strong></td>
                                <td>Perfiles complejos, roscas múltiples, interpolaciones</td>
                                <td>Geometrías simples - cilindros, conos, roscas básicas</td>
                            </tr>
                            <tr>
                                <td><strong>Tiempo de setup</strong></td>
                                <td>Largo inicial (programación) pero rápido para lotes</td>
                                <td>Rápido para piezas únicas, lento para lotes grandes</td>
                            </tr>
                            <tr>
                                <td><strong>Compensación de herramientas</strong></td>
                                <td>Automática - almacena offsets de todas las herramientas</td>
                                <td>Manual - operador ajusta cada herramienta</td>
                            </tr>
                            <tr>
                                <td><strong>Costo de inversión</strong></td>
                                <td>Alto ($50,000 - $500,000+ USD)</td>
                                <td>Bajo a medio ($5,000 - $50,000 USD)</td>
                            </tr>
                            <tr>
                                <td><strong>Flexibilidad</strong></td>
                                <td>Cambio instantáneo entre programas diferentes</td>
                                <td>Setup manual para cada configuración</td>
                            </tr>
                            <tr>
                                <td><strong>Curva de aprendizaje</strong></td>
                                <td>Media-alta: requiere programación y conocimiento de códigos G</td>
                                <td>Media: requiere habilidad manual y experiencia</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="highlight-box">
                        <p><strong>Ventaja clave del CNC:</strong> El modo G96 ajusta automáticamente las RPM para mantener la velocidad de corte óptima conforme el diámetro de la pieza cambia. Esto maximiza la vida útil de la herramienta y la calidad del acabado.</p>
                        <p style="margin-top: 0.8rem;"><strong>Ejemplo práctico:</strong> Al tornear de Ø100mm a Ø50mm con Vc=180 m/min:</p>
                        <p style="margin-top: 0.5rem;">• <strong>Torno CNC:</strong> Inicia a 573 RPM (Ø100mm) y automáticamente aumenta a 1,146 RPM (Ø50mm)</p>
                        <p>• <strong>Torno Convencional:</strong> Si se fija a 573 RPM, la Vc cae de 180 m/min a solo 90 m/min al llegar a Ø50mm, reduciendo eficiencia y calidad</p>
                    </div>

                    <div class="highlight-box" style="margin-top: 1.5rem;">
                        <p><strong>Cuándo usar cada tipo:</strong></p>
                        <p style="margin-top: 0.8rem;"><strong>Torno CNC ideal para:</strong></p>
                        <ul style="margin-left: 2rem; margin-top: 0.5rem; line-height: 1.8;">
                            <li>Producción en serie (lotes de 10+ piezas)</li>
                            <li>Piezas con geometrías complejas</li>
                            <li>Alta precisión y repetibilidad requerida</li>
                            <li>Operación desatendida (producción nocturna)</li>
                        </ul>
                        <p style="margin-top: 0.8rem;"><strong>Torno Convencional ideal para:</strong></p>
                        <ul style="margin-left: 2rem; margin-top: 0.5rem; line-height: 1.8;">
                            <li>Prototipos y piezas únicas</li>
                            <li>Geometrías simples (ejes, bujes, cilindros)</li>
                            <li>Talleres con presupuesto limitado</li>
                            <li>Reparaciones y modificaciones sobre la marcha</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

<!-- VELOCIDADES DE TORNEADO PAGE - UNIFICADA (AMPLIADA) -->
        <div id="velocities" class="page">
            <div class="card">
                <h2 class="card-title">Velocidades de Corte (Vc) por Material — (Torno Convencional &amp; Torno CNC)</h2>
                <div class="card-content">
                    <p>La <strong>velocidad de corte (Vc)</strong> es la velocidad lineal a la que el filo de la herramienta se desplaza sobre la superficie de la pieza. Se mide en <strong>m/min</strong> (metros por minuto) y es uno de los parámetros más críticos en el torneado. Abajo cada tarjeta incluye: <em>Desbaste</em> y <em>Acabado</em> (dos rangos), <strong>Avance recomendado (mm/rev)</strong> y <strong>Profundidad de corte (ap) sugerida</strong> para desbaste y acabado.</p>
                    
<div class="highlight-box">
    <p><strong>Fórmula de RPM:</strong> n = (1000 × Vc) / (π × D)</p>
    <p style="margin-top: 0.5rem;">Donde: <strong>n</strong> = RPM &nbsp;|&nbsp; <strong>Vc</strong> = Velocidad de corte (m/min) &nbsp;|&nbsp; <strong>D</strong> = Diámetro (mm) &nbsp;|&nbsp; <strong>π</strong> ≈ 3.14159</p>

    <!-- CALCULADORA -->
    <div style="margin-top: 1.2rem; padding: 1.2rem; background: var(--ipn-white); border-radius: 8px; border: 2px solid var(--border-color);">

        <!-- Fórmula visual con inputs -->
        <div style="display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: .5rem; font-size: 1.1rem; font-weight: 600; color: var(--text-dark); font-family: 'Roboto Condensed', sans-serif;">

            <!-- n -->
            <div style="display: flex; flex-direction: column; align-items: center; gap: .2rem;">
                <input id="c_n" type="number" min="0" placeholder="?" style="width: 90px; padding: .4rem .5rem; text-align: center; border: 2px solid var(--ipn-guinda); border-radius: 4px; font-size: 1rem; font-family: 'Roboto Condensed', sans-serif; font-weight: 700; color: var(--ipn-guinda); background: #fdf8fb; outline: none;">
                <span style="font-size: .68rem; color: var(--text-light); text-transform: uppercase; letter-spacing: .4px;">n (RPM)</span>
            </div>

            <span style="font-size: 1.3rem; color: var(--text-light);">=</span>

            <!-- Fracción 1000 × Vc / π × D -->
            <div style="display: flex; flex-direction: column; align-items: center; gap: 2px;">
                <!-- Numerador -->
                <div style="display: flex; align-items: center; gap: .4rem;">
                    <span style="color: var(--text-light);">1000 ×</span>
                    <div style="display: flex; flex-direction: column; align-items: center; gap: .2rem;">
                        <input id="c_vc" type="number" min="0" placeholder="?" style="width: 80px; padding: .4rem .5rem; text-align: center; border: 2px solid var(--ipn-guinda); border-radius: 4px; font-size: 1rem; font-family: 'Roboto Condensed', sans-serif; font-weight: 700; color: var(--ipn-guinda); background: #fdf8fb; outline: none;">
                        <span style="font-size: .68rem; color: var(--text-light); text-transform: uppercase; letter-spacing: .4px;">Vc (m/min)</span>
                    </div>
                </div>
                <!-- Línea divisora -->
                <div style="width: 100%; height: 2px; background: var(--text-dark); border-radius: 1px; margin: 2px 0;"></div>
                <!-- Denominador -->
                <div style="display: flex; align-items: center; gap: .4rem;">
                    <span style="color: var(--text-light);">π ×</span>
                    <div style="display: flex; flex-direction: column; align-items: center; gap: .2rem;">
                        <input id="c_d" type="number" min="0" placeholder="?" style="width: 80px; padding: .4rem .5rem; text-align: center; border: 2px solid var(--ipn-guinda); border-radius: 4px; font-size: 1rem; font-family: 'Roboto Condensed', sans-serif; font-weight: 700; color: var(--ipn-guinda); background: #fdf8fb; outline: none;">
                        <span style="font-size: .68rem; color: var(--text-light); text-transform: uppercase; letter-spacing: .4px;">D (mm)</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Instrucción -->
        <p style="text-align: center; font-size: .8rem; color: var(--text-light); margin: .8rem 0 .6rem 0;">
            Deja en <strong>?</strong> el valor que quieres calcular y llena los otros dos
        </p>

        <!-- Botones -->
        <div style="display: flex; gap: .7rem; justify-content: center; flex-wrap: wrap;">
            <button onclick="calcRPM()"
                style="background: var(--ipn-guinda); color: #fff; border: none; padding: .6rem 1.8rem;
                       border-radius: 4px; font-size: .95rem; font-weight: 600; cursor: pointer;
                       font-family: 'Roboto Condensed', sans-serif; letter-spacing: .5px;
                       transition: background .2s;"
                onmouseover="this.style.background='var(--ipn-guinda-dark)'"
                onmouseout="this.style.background='var(--ipn-guinda)'">
                CALCULAR
            </button>
            <button onclick="clearRPM()"
                style="background: transparent; color: var(--ipn-guinda); border: 2px solid var(--ipn-guinda);
                       padding: .6rem 1.4rem; border-radius: 4px; font-size: .95rem; font-weight: 600;
                       cursor: pointer; font-family: 'Roboto Condensed', sans-serif;
                       transition: all .2s;"
                onmouseover="this.style.background='var(--ipn-guinda)'; this.style.color='#fff'"
                onmouseout="this.style.background='transparent'; this.style.color='var(--ipn-guinda)'">
                LIMPIAR
            </button>
        </div>

        <!-- Resultado -->
        <div id="rpm_result" style="display:none; margin-top: .9rem; padding: .8rem 1rem;
             background: rgba(39,174,96,.08); border-left: 4px solid #27ae60; border-radius: 4px;
             text-align: center; animation: slideIn .3s ease;">
            <div id="rpm_result_txt" style="font-size: 1.3rem; font-weight: 700; color: #27ae60;
                 font-family: 'Roboto Condensed', sans-serif;"></div>
            <div id="rpm_result_formula" style="font-size: .8rem; color: var(--text-light); margin-top: .3rem;"></div>
        </div>
        <div id="rpm_error" style="display:none; margin-top: .9rem; padding: .7rem 1rem;
             background: rgba(231,76,60,.08); border-left: 4px solid #e74c3c; border-radius: 4px;
             text-align: center; color: #c0392b; font-size: .88rem;"></div>
    </div>
</div>

                    <p style="margin-top: 1.5rem;"><strong>Busca por material, clasificación ISO, velocidad o herramienta:</strong></p>
                    <input type="text" id="materialSearch" class="search-box"
                        placeholder="Ej: acero, aluminio, ISO P, titanio, 150-220, CBN...">                    
                    <div class="material-grid" id="materialGrid">

                        <!-- ========================= -->
                        <!-- ACEROS AL CARBONO / ISO P -->
                        <!-- ========================= -->

                        <div class="material-card" data-search="acero dulce bajo carbono 1018 1020 ISO P 160-250 130-210 carburo recubierto">
                            <div class="material-name">Acero Dulce (Bajo Carbono) — AISI 1018 / 1020</div>
                            <span class="material-iso">ISO P</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 160–220 m/min | Conv. 130–190 m/min</div>
                                <div><strong>Acabado:</strong> CNC 200–250 m/min | Conv. 170–210 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.18–0.35 mm/rev · Acabado 0.05–0.18 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.5–3.5 mm · Acabado 0.1–0.6 mm</div>
                            <div class="material-desc">Muy usado en ejes y piezas mecánicas generales. RPM Ø50mm aprox. (Ej): 1019–1592 (CNC a Vc 160–250).</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo recubierto TiCN/TiAlN, geometría general</div>
                        </div>

                        <div class="material-card" data-search="acero carbono medio 1045 ISO P 150-220 120-190 carburo recubierto">
                            <div class="material-name">Acero al Carbono Medio — AISI 1045</div>
                            <span class="material-iso">ISO P</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 140–190 m/min | Conv. 120–160 m/min</div>
                                <div><strong>Acabado:</strong> CNC 170–220 m/min | Conv. 140–190 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.18–0.35 mm/rev · Acabado 0.06–0.18 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.5–3.0 mm · Acabado 0.1–0.5 mm</div>
                            <div class="material-desc">Buena resistencia, común en ejes y elementos mecánicos. RPM Ø50mm: 955–1401 (CNC).</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo recubierto TiAlN, positivo para acabado</div>
                        </div>

                        <div class="material-card" data-search="acero estructural A36 S275 S355 ISO P 140-220 110-180 carburo">
                            <div class="material-name">Acero Estructural — A36 / S275 / S355</div>
                            <span class="material-iso">ISO P</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 120–180 m/min | Conv. 100–150 m/min</div>
                                <div><strong>Acabado:</strong> CNC 160–220 m/min | Conv. 130–180 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.20–0.40 mm/rev · Acabado 0.08–0.20 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 2.0–4.0 mm · Acabado 0.15–0.7 mm</div>
                            <div class="material-desc">Usado en estructura; buena ductilidad. RPM Ø50mm: 892–1401 (CNC).</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo recubierto de uso general</div>
                        </div>

                        <div class="material-card" data-search="acero baja aleación 4140 4340 ISO P 120-190 100-160 carburo CVD PVD">
                            <div class="material-name">Acero de Baja Aleación — AISI 4140 / 4340</div>
                            <span class="material-iso">ISO P</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 100–160 m/min | Conv. 90–140 m/min</div>
                                <div><strong>Acabado:</strong> CNC 130–190 m/min | Conv. 110–160 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.18–0.40 mm/rev · Acabado 0.06–0.18 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.5–4.0 mm · Acabado 0.1–0.6 mm</div>
                            <div class="material-desc">Alta resistencia; usar insertos CVD/PVD multicapa en producción.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo CVD/PVD multicapa</div>
                        </div>

                        <div class="material-card" data-search="acero cementación 8620 20MnCr5 ISO P 140-200 110-170 carburo">
                            <div class="material-name">Acero para Cementación — AISI 8620 / 20MnCr5</div>
                            <span class="material-iso">ISO P</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 120–170 m/min | Conv. 100–140 m/min</div>
                                <div><strong>Acabado:</strong> CNC 150–200 m/min | Conv. 120–170 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.15–0.35 mm/rev · Acabado 0.05–0.15 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.5–3.0 mm · Acabado 0.1–0.5 mm</div>
                            <div class="material-desc">Piezas tras cementación; controlar esfuerzo térmico.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo recubierto TiCN/TiAlN</div>
                        </div>

                        <div class="material-card" data-search="acero alto carbono 1095 52100 ISO P 90-160 70-130 carburo recubierto">
                            <div class="material-name">Acero Alto Carbono — AISI 1095 / 52100</div>
                            <span class="material-iso">ISO P</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 70–120 m/min | Conv. 60–100 m/min</div>
                                <div><strong>Acabado:</strong> CNC 100–160 m/min | Conv. 80–130 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.12–0.30 mm/rev · Acabado 0.04–0.12 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.0–3.0 mm · Acabado 0.05–0.4 mm</div>
                            <div class="material-desc">Alta dureza en piezas tratadas; ajustar según estado térmico.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo recubierto TiAlN o CBN para acabados en piezas difíciles</div>
                        </div>

                        <!-- ========================= -->
                        <!-- ACEROS TEMPLADOS / ISO H  -->
                        <!-- ========================= -->

                        <div class="material-card" data-search="acero templado 35-45 HRC ISO H 90-160 70-130 CBN cerámica">
                            <div class="material-name">Acero Templado 35–45 HRC</div>
                            <span class="material-iso">ISO H</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 70–120 m/min | Conv. 60–100 m/min</div>
                                <div><strong>Acabado:</strong> CNC 90–160 m/min | Conv. 70–130 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.10–0.25 mm/rev · Acabado 0.03–0.10 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 0.8–2.5 mm · Acabado 0.05–0.3 mm</div>
                            <div class="material-desc">Requiere insertos de alta dureza; mejores acabados con CBN.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> CBN / cerámica para acabado, carburo PVD para desbaste</div>
                        </div>

                        <div class="material-card" data-search="acero templado revenido 45-55 HRC ISO H 70-130 55-110 CBN cerámica">
                            <div class="material-name">Acero Templado y Revenido 45–55 HRC</div>
                            <span class="material-iso">ISO H</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 55–95 m/min | Conv. 45–85 m/min</div>
                                <div><strong>Acabado:</strong> CNC 70–130 m/min | Conv. 55–110 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.08–0.18 mm/rev · Acabado 0.03–0.08 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 0.8–2.0 mm · Acabado 0.03–0.25 mm</div>
                            <div class="material-desc">Requiere insertos de alta dureza; sensibilidad a vibraciones.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> CBN o cerámica mixta</div>
                        </div>

                        <div class="material-card" data-search="acero endurecido >55 HRC ISO H 35-80 25-65 CBN cerámica whisker">
                            <div class="material-name">Acero Endurecido &gt;55 HRC</div>
                            <span class="material-iso">ISO H</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 25–50 m/min | Conv. 20–40 m/min</div>
                                <div><strong>Acabado:</strong> CNC 35–80 m/min | Conv. 25–65 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.06–0.12 mm/rev · Acabado 0.02–0.06 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 0.5–1.5 mm · Acabado 0.01–0.2 mm</div>
                            <div class="material-desc">Aceros herramienta muy duros; CBN obligatorio para durabilidad.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> CBN (obligatorio para productividad y acabado)</div>
                        </div>

                        <!-- ============================== -->
                        <!-- ACEROS INOXIDABLES / ISO M     -->
                        <!-- ============================== -->

                        <div class="material-card" data-search="inoxidable 303 ISO M 150-240 120-200 carburo">
                            <div class="material-name">Acero Inoxidable 303</div>
                            <span class="material-iso">ISO M</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 130–190 m/min | Conv. 110–170 m/min</div>
                                <div><strong>Acabado:</strong> CNC 180–240 m/min | Conv. 150–200 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.12–0.30 mm/rev · Acabado 0.04–0.12 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.0–2.5 mm · Acabado 0.05–0.4 mm</div>
                            <div class="material-desc">Muy maquinable por aditivos; controlar adherencia y temperatura.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo recubierto, geometría positiva; refrigeración frecuente</div>
                        </div>

                        <div class="material-card" data-search="acero inoxidable austenítico 304 316 ISO M 100-170 80-140 carburo TiAlN refrigeración">
                            <div class="material-name">Acero Inoxidable Austenítico — 304 / 316</div>
                            <span class="material-iso">ISO M</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 90–140 m/min | Conv. 80–120 m/min</div>
                                <div><strong>Acabado:</strong> CNC 120–170 m/min | Conv. 100–140 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.12–0.30 mm/rev · Acabado 0.04–0.12 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.0–3.0 mm · Acabado 0.05–0.5 mm</div>
                            <div class="material-desc">Tendencia al work-hardening; usar filo agudo y refrigeración abundante.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo TiAlN con refrigeración adecuada</div>
                        </div>

                        <div class="material-card" data-search="inoxidable 17-4PH 630 ISO M 80-140 65-120 carburo">
                            <div class="material-name">Acero Inoxidable Precipitation-Hardened — 17-4PH (630)</div>
                            <span class="material-iso">ISO M</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 65–110 m/min | Conv. 55–95 m/min</div>
                                <div><strong>Acabado:</strong> CNC 90–140 m/min | Conv. 75–120 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.10–0.25 mm/rev · Acabado 0.03–0.10 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.0–2.5 mm · Acabado 0.05–0.4 mm</div>
                            <div class="material-desc">Usado en aeroespacial; alta tenacidad. Control térmico importante.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo tenaz, preferible control de refrigeración</div>
                        </div>

                        <div class="material-card" data-search="acero inoxidable martensítico 410 420 ISO M 85-130 65-110 carburo geometría positiva">
                            <div class="material-name">Acero Inoxidable Martensítico — 410 / 420</div>
                            <span class="material-iso">ISO M</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 70–100 m/min | Conv. 60–90 m/min</div>
                                <div><strong>Acabado:</strong> CNC 95–130 m/min | Conv. 75–110 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.12–0.30 mm/rev · Acabado 0.04–0.12 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.0–2.5 mm · Acabado 0.05–0.4 mm</div>
                            <div class="material-desc">Más duro que austeníticos; mejor comportamiento de viruta.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo recubierto, geometría positiva</div>
                        </div>

                        <div class="material-card" data-search="inoxidable duplex 2205 2507 ISO M 70-120 55-100 carburo alta tenacidad">
                            <div class="material-name">Acero Inoxidable Dúplex — 2205 / 2507</div>
                            <span class="material-iso">ISO M</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 55–95 m/min | Conv. 45–85 m/min</div>
                                <div><strong>Acabado:</strong> CNC 70–120 m/min | Conv. 55–100 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.12–0.28 mm/rev · Acabado 0.04–0.12 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.0–3.0 mm · Acabado 0.05–0.4 mm</div>
                            <div class="material-desc">Alta resistencia; maquinado exigente, requiere herramientas tenaces.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo alta tenacidad, TiAlN</div>
                        </div>

                        <!-- ========================= -->
                        <!-- FUNDICIONES / ISO K       -->
                        <!-- ========================= -->

                        <div class="material-card" data-search="fundicion gris GG-20 GG-25 ISO K 80-140 65-120 carburo K10 cerámica seco">
                            <div class="material-name">Fundición Gris — GG-20 / GG-25</div>
                            <span class="material-iso">ISO K</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 70–110 m/min | Conv. 60–100 m/min</div>
                                <div><strong>Acabado:</strong> CNC 100–140 m/min | Conv. 80–120 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.18–0.40 mm/rev · Acabado 0.06–0.18 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.5–4.0 mm · Acabado 0.1–0.6 mm</div>
                            <div class="material-desc">Viruta quebradiza; buen acabado superficial y estabilidad dimensional.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo K10 / Cerámica (corte seco en producción)</div>
                        </div>

                        <div class="material-card" data-search="fundicion nodular GGG-40 GGG-60 ISO K 60-110 50-95 carburo K20">
                            <div class="material-name">Fundición Nodular — GGG-40 / GGG-60</div>
                            <span class="material-iso">ISO K</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 55–95 m/min | Conv. 45–85 m/min</div>
                                <div><strong>Acabado:</strong> CNC 80–110 m/min | Conv. 65–95 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.15–0.35 mm/rev · Acabado 0.05–0.15 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.2–3.5 mm · Acabado 0.08–0.4 mm</div>
                            <div class="material-desc">Más tenaz que fundición gris; ajustar feeds para evitar vibraciones.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo K20 recubierto</div>
                        </div>

                        <div class="material-card" data-search="fundicion blanca ISO K 30-70 25-55 CBN cerámica">
                            <div class="material-name">Fundición Blanca (Muy Abrasiva)</div>
                            <span class="material-iso">ISO K</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 25–50 m/min | Conv. 20–45 m/min</div>
                                <div><strong>Acabado:</strong> CNC 35–70 m/min | Conv. 25–55 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.06–0.18 mm/rev · Acabado 0.02–0.08 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 0.5–2.0 mm · Acabado 0.02–0.3 mm</div>
                            <div class="material-desc">Extremadamente abrasiva; usar CBN o cerámica reforzada; vida de herramienta crítica.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> CBN o cerámica reforzada</div>
                        </div>

                        <!-- ========================= -->
                        <!-- ALUMINIO / ISO N          -->
                        <!-- ========================= -->

                        <div class="material-card" data-search="aluminio 6061 7075 ISO N 300-700 250-600 PCD carburo pulido">
                            <div class="material-name">Aluminio Aleado — 6061 / 7075</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 350–600 m/min | Conv. 300–520 m/min</div>
                                <div><strong>Acabado:</strong> CNC 500–700 m/min | Conv. 450–600 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.18–0.60 mm/rev · Acabado 0.08–0.30 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 2.0–6.0 mm · Acabado 0.1–1.0 mm</div>
                            <div class="material-desc">Muy común en CNC; excelente acabado con herramientas pulidas (PCD o carburo pulido).</div>
                            <div class="material-tool"><strong>Herramienta:</strong> PCD o carburo pulido espejo; filo agudo</div>
                        </div>

                        <div class="material-card" data-search="aluminio 2011 ISO N 350-800 300-650 PCD carburo pulido">
                            <div class="material-name">Aluminio 2011 (Alta Maquinabilidad)</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 400–700 m/min | Conv. 350–650 m/min</div>
                                <div><strong>Acabado:</strong> CNC 600–800 m/min | Conv. 500–700 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.20–0.80 mm/rev · Acabado 0.10–0.35 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 2.5–6.0 mm · Acabado 0.1–1.2 mm</div>
                            <div class="material-desc">Uno de los mejores para torno; admite velocidades muy altas con PCD.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> PCD o Carburo pulido</div>
                        </div>

                        <div class="material-card" data-search="aluminio 5083 ISO N 200-450 180-380 carburo pulido">
                            <div class="material-name">Aluminio 5083 (Marino)</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 250–380 m/min | Conv. 200–320 m/min</div>
                                <div><strong>Acabado:</strong> CNC 350–450 m/min | Conv. 280–380 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.18–0.50 mm/rev · Acabado 0.08–0.25 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 2.0–5.0 mm · Acabado 0.1–1.0 mm</div>
                            <div class="material-desc">Más pegajoso; filo muy afilado y refrigeración controlada.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo pulido, geometría positiva</div>
                        </div>

                        <div class="material-card" data-search="aluminio puro 1050 1100 ISO N 400-900 300-700 PCD carburo K10">
                            <div class="material-name">Aluminio Puro — 1050 / 1100</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 450–800 m/min | Conv. 350–700 m/min</div>
                                <div><strong>Acabado:</strong> CNC 700–900 m/min | Conv. 550–700 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.25–0.80 mm/rev · Acabado 0.10–0.35 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 2.5–8.0 mm · Acabado 0.1–1.5 mm</div>
                            <div class="material-desc">Muy blando; cuidado con adherencia; ideal PCD en producción alta.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> PCD, Carburo K10 pulido espejo</div>
                        </div>

                        <div class="material-card" data-search="aluminio fundido A356 A380 ISO N 200-400 150-350 PCD carburo">
                            <div class="material-name">Aluminio Fundido — A356 / A380</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 220–350 m/min | Conv. 180–300 m/min</div>
                                <div><strong>Acabado:</strong> CNC 300–400 m/min | Conv. 220–350 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.20–0.60 mm/rev · Acabado 0.08–0.30 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 2.0–6.0 mm · Acabado 0.1–1.0 mm</div>
                            <div class="material-desc">Abrasivo por Si; PCD recomendado para series largas.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> PCD recomendado, Carburo en prototipos</div>
                        </div>

                        <!-- ========================= -->
                        <!-- COBRE Y ALEACIONES / ISO N -->
                        <!-- ========================= -->

                        <div class="material-card" data-search="laton C36000 ISO N 150-300 120-250 HSS carburo">
                            <div class="material-name">Latón — C36000</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 160–260 m/min | Conv. 140–230 m/min</div>
                                <div><strong>Acabado:</strong> CNC 220–300 m/min | Conv. 180–250 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.12–0.40 mm/rev · Acabado 0.05–0.18 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.0–3.5 mm · Acabado 0.05–0.6 mm</div>
                            <div class="material-desc">Excelente acabado y viruta corta; admite HSS o carburo sin recubrimiento.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> HSS o Carburo sin recubrimiento, geometría positiva</div>
                        </div>

                        <div class="material-card" data-search="cobre electrolitico C11000 ISO N 70-120 55-100 carburo pulido">
                            <div class="material-name">Cobre Electrolítico — C11000</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 80–110 m/min | Conv. 65–95 m/min</div>
                                <div><strong>Acabado:</strong> CNC 100–120 m/min | Conv. 80–100 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.12–0.30 mm/rev · Acabado 0.05–0.15 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.0–3.0 mm · Acabado 0.05–0.5 mm</div>
                            <div class="material-desc">Muy dúctil, tiende a formar virutas largas; herramienta pulida y geometría positiva.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo pulido, geometría positiva</div>
                        </div>

                        <div class="material-card" data-search="cobre berilio ISO N 40-90 35-75 carburo recubierto">
                            <div class="material-name">Cobre-Beryl — (aleación de cobre-berilio)</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 45–80 m/min | Conv. 40–70 m/min</div>
                                <div><strong>Acabado:</strong> CNC 70–90 m/min | Conv. 55–75 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.10–0.28 mm/rev · Acabado 0.04–0.12 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.0–3.0 mm · Acabado 0.05–0.4 mm</div>
                            <div class="material-desc">Alta resistencia; usar refrigeración y carburo recubierto para vida herramienta.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo recubierto; refrigeración recomendada</div>
                        </div>

                        <div class="material-card" data-search="bronce C93200 ISO N 60-150 50-120 HSS carburo K20">
                            <div class="material-name">Bronce (C93200)</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 70–130 m/min | Conv. 60–110 m/min</div>
                                <div><strong>Acabado:</strong> CNC 100–150 m/min | Conv. 80–120 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.12–0.35 mm/rev · Acabado 0.04–0.12 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.0–3.0 mm · Acabado 0.05–0.5 mm</div>
                            <div class="material-desc">Buen comportamiento frente a desgaste; usar carburo K20 o HSS en lotes pequeños.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo K20 / HSS</div>
                        </div>

                        <!-- ========================= -->
                        <!-- TITANIO / ISO S           -->
                        <!-- ========================= -->

                        <div class="material-card" data-search="titanio grado 2 ISO S 45-85 35-70 carburo PVD">
                            <div class="material-name">Titanio Grado 2 (puro)</div>
                            <span class="material-iso">ISO S</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 35–65 m/min | Conv. 30–55 m/min</div>
                                <div><strong>Acabado:</strong> CNC 55–85 m/min | Conv. 40–70 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.08–0.25 mm/rev · Acabado 0.04–0.12 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 0.5–2.5 mm · Acabado 0.05–0.6 mm</div>
                            <div class="material-desc">Mejor maquinabilidad que Ti-6Al-4V; controlar fricción y temperaturas.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo PVD TiAlN; refrigeración moderada</div>
                        </div>

                        <div class="material-card" data-search="titanio grado 5 Ti-6Al-4V ISO S 35-75 25-60 carburo refrigeración HP">
                            <div class="material-name">Titanio Grado 5 — Ti-6Al-4V</div>
                            <span class="material-iso">ISO S</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 30–55 m/min | Conv. 25–50 m/min</div>
                                <div><strong>Acabado:</strong> CNC 45–75 m/min | Conv. 30–60 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.06–0.20 mm/rev · Acabado 0.03–0.10 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 0.5–2.0 mm · Acabado 0.03–0.4 mm</div>
                            <div class="material-desc">Aleación aeroespacial exigente; refrigeración HP y control de sobremetal.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo PVD; refrigeración alta (HP) recomendada</div>
                        </div>

                        <!-- ========================= -->
                        <!-- SUPER ALEACIONES / ISO S  -->
                        <!-- ========================= -->

                        <div class="material-card" data-search="inconel 718 ISO S 20-45 15-35 carburo cerámica Si3N4">
                            <div class="material-name">Inconel 718</div>
                            <span class="material-iso">ISO S</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 18–35 m/min | Conv. 15–30 m/min</div>
                                <div><strong>Acabado:</strong> CNC 28–45 m/min | Conv. 20–35 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.06–0.16 mm/rev · Acabado 0.03–0.10 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 0.5–2.0 mm · Acabado 0.03–0.4 mm</div>
                            <div class="material-desc">Muy difícil; temperaturas de corte elevadas; usar herramientas resistentes al calor.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo alto cobalto / Cerámica Si₃N₄</div>
                        </div>

                        <div class="material-card" data-search="hastelloy C-276 ISO S 18-40 14-32 carburo tenaz refrigeración">
                            <div class="material-name">Hastelloy C-276</div>
                            <span class="material-iso">ISO S</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 16–30 m/min | Conv. 14–26 m/min</div>
                                <div><strong>Acabado:</strong> CNC 25–40 m/min | Conv. 18–32 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.06–0.14 mm/rev · Acabado 0.03–0.09 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 0.5–1.8 mm · Acabado 0.03–0.3 mm</div>
                            <div class="material-desc">Aleación Ni-Cr-Mo; refrigeración alta y herramientas tenaces necesarias.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo tenaz; refrigeración HP</div>
                        </div>

                        <div class="material-card" data-search="monel 400 ISO S 25-55 20-45 carburo TiAlN">
                            <div class="material-name">Monel 400</div>
                            <span class="material-iso">ISO S</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 22–45 m/min | Conv. 20–40 m/min</div>
                                <div><strong>Acabado:</strong> CNC 35–55 m/min | Conv. 25–45 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.08–0.18 mm/rev · Acabado 0.03–0.10 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 0.6–2.0 mm · Acabado 0.03–0.4 mm</div>
                            <div class="material-desc">Aleación Ni-Cu; buena resistencia a corrosión, maquinado moderado.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo recubierto TiAlN</div>
                        </div>

                        <!-- ========================= -->
                        <!-- MAGNESIO / ISO N          -->
                        <!-- ========================= -->

                        <div class="material-card" data-search="magnesio AZ31 AZ91 ISO N 400-1000 300-800 HSS carburo seco ignición">
                            <div class="material-name">Magnesio (AZ31 / AZ91)</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 500–900 m/min | Conv. 400–800 m/min</div>
                                <div><strong>Acabado:</strong> CNC 800–1000 m/min | Conv. 600–800 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.25–0.80 mm/rev · Acabado 0.10–0.35 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 2.0–6.0 mm · Acabado 0.1–1.0 mm</div>
                            <div class="material-desc">Muy fácil de maquinar pero riesgo de ignición; preferir corte seco y eliminar chispas.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo o HSS (CORTE SECO con precauciones)</div>
                        </div>

                        <!-- ========================= -->
                        <!-- PLÁSTICOS / ISO N         -->
                        <!-- ========================= -->

                        <div class="material-card" data-search="ptfe teflon ISO N 200-600 150-500 HSS carburo afilado">
                            <div class="material-name">PTFE (Teflón)</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 220–450 m/min | Conv. 180–380 m/min</div>
                                <div><strong>Acabado:</strong> CNC 350–600 m/min | Conv. 250–500 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.20–0.60 mm/rev · Acabado 0.08–0.30 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.0–4.0 mm · Acabado 0.1–1.0 mm</div>
                            <div class="material-desc">Muy blando y deformable; evitar sobrecalentamiento y usar filo afilado.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> HSS afilado / Carburo pulido</div>
                        </div>

                        <div class="material-card" data-search="uhmw polietileno ISO N 200-500 150-400 HSS carburo">
                            <div class="material-name">UHMW (Polietileno Alta Densidad)</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 220–420 m/min | Conv. 180–360 m/min</div>
                                <div><strong>Acabado:</strong> CNC 300–500 m/min | Conv. 220–400 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.30–0.80 mm/rev · Acabado 0.10–0.35 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 2.0–6.0 mm · Acabado 0.1–1.0 mm</div>
                            <div class="material-desc">Flexible; viruta larga tipo cinta; mantener control de sujeción.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> HSS o Carburo muy afilado</div>
                        </div>

                        <div class="material-card" data-search="pvc ISO N 80-250 60-200 HSS carburo">
                            <div class="material-name">PVC (Plástico Industrial)</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 100–200 m/min | Conv. 80–160 m/min</div>
                                <div><strong>Acabado:</strong> CNC 160–250 m/min | Conv. 120–200 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.20–0.60 mm/rev · Acabado 0.08–0.30 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.0–4.0 mm · Acabado 0.1–1.0 mm</div>
                            <div class="material-desc">No sobrecalentar; puede deformarse; buena sujeción necesaria.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> HSS afilado / Carburo pulido</div>
                        </div>

                        <div class="material-card" data-search="abs ISO N 120-300 90-250 HSS carburo">
                            <div class="material-name">ABS</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 140–260 m/min | Conv. 110–210 m/min</div>
                                <div><strong>Acabado:</strong> CNC 200–300 m/min | Conv. 150–250 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.20–0.60 mm/rev · Acabado 0.08–0.30 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.0–4.0 mm · Acabado 0.1–1.0 mm</div>
                            <div class="material-desc">Buen plástico para mecanizar; evitar sobremesa térmica.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> HSS o Carburo pulido</div>
                        </div>

                        <div class="material-card" data-search="peek ISO N 120-300 90-250 carburo PCD">
                            <div class="material-name">PEEK (Plástico de Ingeniería)</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 150–260 m/min | Conv. 120–220 m/min</div>
                                <div><strong>Acabado:</strong> CNC 220–300 m/min | Conv. 170–250 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.12–0.45 mm/rev · Acabado 0.05–0.20 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.0–4.0 mm · Acabado 0.1–1.0 mm</div>
                            <div class="material-desc">Resistente a temperatura; requiere herramientas pulidas y control térmico.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo pulido / PCD en producción</div>
                        </div>

                        <!-- ========================= -->
                        <!-- COMPUESTOS / ISO N        -->
                        <!-- ========================= -->

                        <div class="material-card" data-search="fibra carbono CFRP ISO N 100-220 80-180 PCD diamante abrasivo">
                            <div class="material-name">Fibra de Carbono (CFRP)</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 90–160 m/min | Conv. 80–140 m/min</div>
                                <div><strong>Acabado:</strong> CNC 140–220 m/min | Conv. 100–180 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.05–0.25 mm/rev · Acabado 0.02–0.10 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 0.5–2.0 mm · Acabado 0.05–0.4 mm (preferir pasadas múltiples pequeñas)</div>
                            <div class="material-desc">Extremadamente abrasivo; desgaste rápido—PCD/diamante obligatorio para productividad.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> PCD/diamante; control de polvo y aspiración</div>
                        </div>

                        <div class="material-card" data-search="grafito ISO N 200-500 150-400 carburo PCD polvo abrasivo">
                            <div class="material-name">Grafito</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 200–400 m/min | Conv. 150–320 m/min</div>
                                <div><strong>Acabado:</strong> CNC 300–500 m/min | Conv. 220–400 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.20–0.60 mm/rev · Acabado 0.08–0.30 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.0–5.0 mm · Acabado 0.1–1.0 mm</div>
                            <div class="material-desc">Electrodos EDM; polvo abrasivo—usar herramientas de grano fino o PCD.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo grano fino / PCD</div>
                        </div>

                        <!-- ========================= -->
                        <!-- MATERIALS ADICIONALES     -->
                        <!-- ========================= -->

                        <div class="material-card" data-search="acero herramienta D2 H13 ISO H herramientas 40-60 25-50 CBN carburo">
                            <div class="material-name">Acero para Herramientas (D2, H13)</div>
                            <span class="material-iso">ISO H / P según dureza</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 40–90 m/min | Conv. 30–80 m/min</div>
                                <div><strong>Acabado:</strong> CNC 60–130 m/min | Conv. 45–100 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.06–0.20 mm/rev · Acabado 0.02–0.08 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 0.6–2.5 mm · Acabado 0.02–0.4 mm</div>
                            <div class="material-desc">Ajustar según % de dureza; tratar como ISO H si endurecido.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo duro para desbaste, CBN para acabado</div>
                        </div>

                        <div class="material-card" data-search="silumin al-sí 319 356 ISO N 180-350 150-300 PCD carburo">
                            <div class="material-name">Silumin / Al-Si (ej. 319, A356)</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 200–320 m/min | Conv. 160–280 m/min</div>
                                <div><strong>Acabado:</strong> CNC 300–420 m/min | Conv. 220–360 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.18–0.60 mm/rev · Acabado 0.08–0.30 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.5–5.0 mm · Acabado 0.1–1.0 mm</div>
                            <div class="material-desc">Abrasivo por presencia de Si; PCD recomendado en producción.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> PCD o Carburo resistente a abrasión</div>
                        </div>

                        <div class="material-card" data-search="nimonic inconel 80 haynes ISO S 15-40 12-35 carburo ceramica">
                            <div class="material-name">Nimonic / Haynes (superaleaciones)</div>
                            <span class="material-iso">ISO S</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 15–30 m/min | Conv. 12–28 m/min</div>
                                <div><strong>Acabado:</strong> CNC 25–40 m/min | Conv. 18–35 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.05–0.14 mm/rev · Acabado 0.02–0.08 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 0.5–1.8 mm · Acabado 0.03–0.4 mm</div>
                            <div class="material-desc">Superaleaciones resistentes a temperatura; cortar lento y con herramientas resistentes.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo tenaz / Cerámica, refrigeración HP</div>
                        </div>

                        <div class="material-card" data-search="fibra vidrio gfrp ISO N 80-160 70-140 PCD abrasivo">
                            <div class="material-name">Fibra de Vidrio (GFRP)</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 80–140 m/min | Conv. 70–120 m/min</div>
                                <div><strong>Acabado:</strong> CNC 100–160 m/min | Conv. 80–140 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.05–0.25 mm/rev · Acabado 0.02–0.10 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 0.5–2.0 mm · Acabado 0.05–0.4 mm</div>
                            <div class="material-desc">Abrasivo y delicado; usar PCD/diamante y extracción de polvo.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> PCD/diamante; protección respiratoria y extracción</div>
                        </div>
                        <!-- ========================= -->
                        <!-- ACEROS INOX ESPECIALES    -->
                        <!-- ========================= -->

                        <div class="material-card" data-search="inoxidable 316L austenitico ISO M 90-160 75-130 carburo TiAlN refrigeracion">
                            <div class="material-name">Acero Inoxidable 316L</div>
                            <span class="material-iso">ISO M</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 80–125 m/min | Conv. 70–110 m/min</div>
                                <div><strong>Acabado:</strong> CNC 120–160 m/min | Conv. 95–130 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.10–0.28 mm/rev · Acabado 0.04–0.12 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.0–3.0 mm · Acabado 0.05–0.5 mm</div>
                            <div class="material-desc">Más resistente a corrosión que 304, pero más exigente en corte. Evitar recalentamiento.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo TiAlN, refrigeración abundante</div>
                        </div>

                        <div class="material-card" data-search="inoxidable 321 ISO M 90-160 75-130 carburo refrigeracion alta">
                            <div class="material-name">Acero Inoxidable 321</div>
                            <span class="material-iso">ISO M</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 85–130 m/min | Conv. 70–110 m/min</div>
                                <div><strong>Acabado:</strong> CNC 120–160 m/min | Conv. 95–130 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.10–0.28 mm/rev · Acabado 0.04–0.12 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.0–2.8 mm · Acabado 0.05–0.45 mm</div>
                            <div class="material-desc">Inox estabilizado con titanio, usado en alta temperatura. Similar a 304 pero más duro.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo recubierto TiAlN, geometría positiva</div>
                        </div>

                        <!-- ========================= -->
                        <!-- HIERRO Y METALES BLANDOS  -->
                        <!-- ========================= -->

                        <div class="material-card" data-search="hierro forjado ISO P 80-140 60-120 carburo hss">
                            <div class="material-name">Hierro Forjado</div>
                            <span class="material-iso">ISO P</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 70–110 m/min | Conv. 60–95 m/min</div>
                                <div><strong>Acabado:</strong> CNC 100–140 m/min | Conv. 80–120 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.15–0.35 mm/rev · Acabado 0.06–0.18 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.5–4.0 mm · Acabado 0.1–0.6 mm</div>
                            <div class="material-desc">Material fibroso, puede generar vibraciones; usar insertos tenaces y sujeción firme.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo recubierto o HSS en torno convencional</div>
                        </div>

                        <div class="material-card" data-search="zinc zamak ISO N 200-500 150-420 carburo hss">
                            <div class="material-name">Zinc / Zamak</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 250–420 m/min | Conv. 200–350 m/min</div>
                                <div><strong>Acabado:</strong> CNC 350–500 m/min | Conv. 280–420 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.18–0.55 mm/rev · Acabado 0.08–0.25 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 2.0–6.0 mm · Acabado 0.1–1.0 mm</div>
                            <div class="material-desc">Muy fácil de maquinar, buena viruta; cuidado con sobrecalentamiento y deformación.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo pulido o HSS afilado</div>
                        </div>

                        <div class="material-card" data-search="plomo ISO N 150-400 120-320 hss carburo">
                            <div class="material-name">Plomo (Pb)</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 180–320 m/min | Conv. 150–280 m/min</div>
                                <div><strong>Acabado:</strong> CNC 250–400 m/min | Conv. 200–320 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.20–0.80 mm/rev · Acabado 0.10–0.40 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 2.0–8.0 mm · Acabado 0.1–1.5 mm</div>
                            <div class="material-desc">Muy blando y pesado; excelente maquinabilidad pero requiere seguridad por toxicidad.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> HSS o Carburo muy afilado</div>
                        </div>

                        <!-- ========================= -->
                        <!-- METALES REFRACTARIOS ISO S -->
                        <!-- ========================= -->

                        <div class="material-card" data-search="tungsteno wolframio ISO S 10-25 8-20 carburo CBN refrigeracion">
                            <div class="material-name">Tungsteno / Wolframio (W)</div>
                            <span class="material-iso">ISO S</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 8–18 m/min | Conv. 6–15 m/min</div>
                                <div><strong>Acabado:</strong> CNC 12–25 m/min | Conv. 8–20 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.04–0.12 mm/rev · Acabado 0.02–0.06 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 0.3–1.2 mm · Acabado 0.01–0.2 mm</div>
                            <div class="material-desc">Extremadamente duro y resistente al calor; velocidades bajas obligatorias.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo tenaz o CBN, refrigeración recomendada</div>
                        </div>

                        <div class="material-card" data-search="molibdeno ISO S 20-50 15-40 carburo refrigeracion">
                            <div class="material-name">Molibdeno (Mo)</div>
                            <span class="material-iso">ISO S</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 18–35 m/min | Conv. 15–30 m/min</div>
                                <div><strong>Acabado:</strong> CNC 30–50 m/min | Conv. 20–40 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.05–0.14 mm/rev · Acabado 0.02–0.08 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 0.5–1.8 mm · Acabado 0.02–0.3 mm</div>
                            <div class="material-desc">Metal refractario usado en industria aeroespacial; genera calor concentrado en el filo.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo recubierto, refrigeración moderada</div>
                        </div>

                        <!-- ========================= -->
                        <!-- ALEACIONES DE NIQUEL ISO S -->
                        <!-- ========================= -->

                        <div class="material-card" data-search="inconel 625 ISO S 20-50 15-40 carburo ceramica refrigeracion alta">
                            <div class="material-name">Inconel 625</div>
                            <span class="material-iso">ISO S</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 18–38 m/min | Conv. 15–32 m/min</div>
                                <div><strong>Acabado:</strong> CNC 30–50 m/min | Conv. 20–40 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.06–0.16 mm/rev · Acabado 0.03–0.10 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 0.5–2.0 mm · Acabado 0.03–0.4 mm</div>
                            <div class="material-desc">Similar a 718 pero más dúctil; tiende a adherirse al filo. Cortar con parámetros estables.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo alto cobalto o cerámica, refrigeración HP</div>
                        </div>

                        <div class="material-card" data-search="incoloy 825 ISO S 20-55 15-45 carburo TiAlN">
                            <div class="material-name">Incoloy 825</div>
                            <span class="material-iso">ISO S</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 20–40 m/min | Conv. 18–35 m/min</div>
                                <div><strong>Acabado:</strong> CNC 35–55 m/min | Conv. 25–45 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.06–0.18 mm/rev · Acabado 0.03–0.10 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 0.6–2.2 mm · Acabado 0.03–0.4 mm</div>
                            <div class="material-desc">Aleación resistente a corrosión química; requiere herramientas tenaces y buena rigidez.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo recubierto TiAlN, refrigeración recomendada</div>
                        </div>

                        <!-- ========================= -->
                        <!-- METALES NO FERROSOS ISO N -->
                        <!-- ========================= -->

                        <div class="material-card" data-search="niquel puro ISO N 40-110 30-90 carburo">
                            <div class="material-name">Níquel Puro</div>
                            <span class="material-iso">ISO N / S</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 35–75 m/min | Conv. 30–65 m/min</div>
                                <div><strong>Acabado:</strong> CNC 60–110 m/min | Conv. 45–90 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.08–0.22 mm/rev · Acabado 0.03–0.10 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 0.8–2.5 mm · Acabado 0.03–0.4 mm</div>
                            <div class="material-desc">Material pegajoso, tiende a formar filo recrecido; usar filo afilado y refrigeración.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Carburo recubierto, geometría positiva</div>
                        </div>

                        <div class="material-card" data-search="estano ISO N 150-450 120-350 hss carburo">
                            <div class="material-name">Estaño (Sn)</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 200–350 m/min | Conv. 150–300 m/min</div>
                                <div><strong>Acabado:</strong> CNC 300–450 m/min | Conv. 220–350 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.20–0.80 mm/rev · Acabado 0.10–0.35 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 2.0–6.0 mm · Acabado 0.1–1.2 mm</div>
                            <div class="material-desc">Muy blando; excelente acabado pero se deforma fácilmente si hay presión excesiva.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> HSS afilado o Carburo pulido</div>
                        </div>

                        <!-- ========================= -->
                        <!-- PLÁSTICOS AVANZADOS       -->
                        <!-- ========================= -->

                        <div class="material-card" data-search="nylon poliamida pa6 pa66 ISO N 150-450 120-380 hss carburo">
                            <div class="material-name">Nylon (PA6 / PA66)</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 180–350 m/min | Conv. 150–300 m/min</div>
                                <div><strong>Acabado:</strong> CNC 300–450 m/min | Conv. 220–380 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.25–0.80 mm/rev · Acabado 0.10–0.40 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 2.0–7.0 mm · Acabado 0.1–1.5 mm</div>
                            <div class="material-desc">Absorbe humedad y se expande; usar herramientas muy afiladas para evitar rebabas.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> HSS afilado o Carburo pulido</div>
                        </div>

                        <div class="material-card" data-search="delrin pom acetal ISO N 200-550 150-450 hss carburo pulido">
                            <div class="material-name">Delrin / POM (Acetal)</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 220–420 m/min | Conv. 180–350 m/min</div>
                                <div><strong>Acabado:</strong> CNC 350–550 m/min | Conv. 250–450 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.25–0.90 mm/rev · Acabado 0.10–0.40 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 2.0–8.0 mm · Acabado 0.1–1.5 mm</div>
                            <div class="material-desc">Excelente plástico para mecanizado; da buen acabado superficial y viruta estable.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> HSS o Carburo pulido espejo</div>
                        </div>

                        <div class="material-card" data-search="policarbonato pc ISO N 120-350 100-280 hss carburo">
                            <div class="material-name">Policarbonato (PC)</div>
                            <span class="material-iso">ISO N</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 140–260 m/min | Conv. 120–220 m/min</div>
                                <div><strong>Acabado:</strong> CNC 220–350 m/min | Conv. 180–280 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.20–0.70 mm/rev · Acabado 0.08–0.35 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 1.5–5.0 mm · Acabado 0.1–1.2 mm</div>
                            <div class="material-desc">Resistente pero se derrite si se calienta; usar pasadas limpias y herramienta afilada.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> HSS afilado o Carburo pulido</div>
                        </div>

                        <!-- ========================= -->
                        <!-- MATERIALES CERÁMICOS      -->
                        <!-- ========================= -->

                        <div class="material-card" data-search="ceramica al2o3 alúmina ISO H 20-80 15-60 diamante pcd abrasivo">
                            <div class="material-name">Cerámica (Alúmina - Al₂O₃)</div>
                            <span class="material-iso">ISO H</span>
                            <div class="material-speeds">
                                <div><strong>Desbaste:</strong> CNC 15–35 m/min | Conv. 12–30 m/min</div>
                                <div><strong>Acabado:</strong> CNC 30–80 m/min | Conv. 20–60 m/min</div>
                            </div>
                            <div class="material-feed"><strong>Avance recomendado:</strong> Desbaste 0.02–0.08 mm/rev · Acabado 0.01–0.04 mm/rev</div>
                            <div class="material-ap"><strong>Profundidad de corte (ap):</strong> Desbaste 0.2–1.0 mm · Acabado 0.01–0.2 mm</div>
                            <div class="material-desc">Muy frágil y abrasiva; se recomienda trabajar con herramienta diamantada.</div>
                            <div class="material-tool"><strong>Herramienta:</strong> Diamante / PCD (preferible), pasadas pequeñas</div>
                        </div>

                    </div>

                    <div class="no-results" id="noResults" style="display: none;">
                        No se encontraron materiales que coincidan con tu búsqueda
                    </div>

                    <div class="highlight-box" style="margin-top: 2rem;">
                        <p><strong>Notas sobre velocidades y parámetros:</strong></p>
                        <ul style="margin-left: 1.2rem;">
                            <li>Los rangos indicados son orientativos y deben ajustarse según la máquina, rigidez, estado de filo, refrigeración, herramienta y diámetro real de la pieza.</li>
                            <li>RPM calculadas para diámetro de 50mm usando: RPM = (1000 × Vc) / (π × D). Usa diámetros y Vc reales para calcular n exacta.</li>
                            <li>Avance (mm/rev) y ap (mm) están separados para <em>desbaste</em> (mayor remoción) y <em>acabado</em> (mejor calidad superficial).</li>
                            <li>Para CNC con control G96 (velocidad constante) los valores CNC pueden optimizarse y ser más altos en acabados.</li>
                            <li>Refrigeración recomendada para aceros inoxidables, titanio, superaleaciones y cobre-berilio. Para plásticos y magnesio seguir normas de seguridad (riesgo de ignición y deformación).</li>
                            <li>Herramientas: PCD para plásticos blandos y materiales abrasivos en producción; CBN para aceros endurecidos y cerámica para altas temperaturas; carburo recubierto para uso general.</li>
                            <li>Siempre validar con una pasada de prueba, medir temperatura, vibración y desgaste de la herramienta; ajustar parámetros en consecuencia.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>


        <!-- SIMULATION PAGE -->
        <div id="simulation" class="page">
            <div class="mode-selector">
                <button class="mode-btn active" onclick="setMode('desbaste')">DESBASTE</button>
                <button class="mode-btn" onclick="setMode('acabado')">ACABADO</button>
            </div>

            <div class="simulator-grid">
                <!-- CNC Lathe -->
                <div class="sim-card">
                    <div class="sim-header">
                        <h2 class="sim-title">Torno CNC</h2>
                        <span class="sim-badge">AUTOMÁTICO</span>
                    </div>
                    
                    <div class="material-selector">
                        <div class="control-label">
                            <span class="label-text">Material a tornear</span>
                        </div>
                        <select id="cncMaterial" onchange="updateCNCMaterial()">
                            <option value="steel">Acero Dulce 1018/1020 (160-250 m/min)</option>
                            <option value="steel_1045">Acero 1045 (140-220 m/min)</option>
                            <option value="lowalloy">Acero Baja Aleación 4140/4340 (100-190 m/min)</option>
                            <option value="hardened_35">Acero Templado 35-45 HRC (70-160 m/min)</option>
                            <option value="hardened_45">Acero Templado 45-55 HRC (55-130 m/min)</option>
                            <option value="hardened_55">Acero Endurecido >55 HRC (25-80 m/min)</option>
                            <option value="stainless_303">Acero Inoxidable 303 (130-240 m/min)</option>
                            <option value="stainless">Acero Inox. 304/316 (90-170 m/min)</option>
                            <option value="stainless_m">Acero Inox. 410/420 (70-130 m/min)</option>
                            <option value="stainless_174">Acero Inox. 17-4PH (65-140 m/min)</option>
                            <option value="cast">Fundición Gris (70-140 m/min)</option>
                            <option value="nodular">Fundición Nodular (55-110 m/min)</option>
                            <option value="aluminum">Aluminio 6061/7075 (350-700 m/min)</option>
                            <option value="aluminum_2011">Aluminio 2011 (400-800 m/min)</option>
                            <option value="aluminum_pure">Aluminio Puro (450-900 m/min)</option>
                            <option value="brass">Latón C36000 (160-300 m/min)</option>
                            <option value="copper">Cobre Electrolítico (80-120 m/min)</option>
                            <option value="bronze">Bronce C93200 (70-150 m/min)</option>
                            <option value="titanium">Titanio Ti-6Al-4V (30-75 m/min)</option>
                            <option value="titanium_2">Titanio Grado 2 (35-85 m/min)</option>
                            <option value="inconel">Inconel 718 (18-45 m/min)</option>
                            <option value="hastelloy">Hastelloy C-276 (16-40 m/min)</option>
                            <option value="magnesium">Magnesio (500-1000 m/min)</option>
                            <option value="plastic">Plásticos (100-300 m/min)</option>
                        </select>
                    </div>

<div class="lathe-canvas" id="cncCanvas">
  <div class="lc-ambient" id="cncAmbient"></div>
  <canvas class="lc-particle-canvas" id="cncParticleCanvas"></canvas>
    <div class="lc-heat-shimmer" id="cncHeatShimmer"></div>
    <div class="lc-floor-reflect" id="cncFloorReflect"></div>
    <div class="lc-bed-ways"></div>
    <div class="lc-hs-led-strip" id="cncHsLedStrip"></div>
  <div class="lc-bed"><div class="lc-chip-tray"><div class="lc-chip-pile" id="cncChipPile"></div></div></div>
  <div class="lc-headstock"><div class="lc-hs-indicator" id="cncHsInd"></div></div>
  <div class="lc-spindle-nose"></div>
  <div class="lc-chuck" id="cncChuck">
    <div class="lc-chuck-body">
      <div class="lc-jaw lc-jaw-1"></div><div class="lc-jaw lc-jaw-2"></div><div class="lc-jaw lc-jaw-3"></div>
      <div class="lc-chuck-hub"></div>
    </div>
  </div>
    <div class="lc-chuck-mask"></div>
    <div class="lc-workpiece" id="cncWorkpiece">
      <div class="lc-wp-body">
        <div class="lc-wp-shadow-left"></div>
        <div class="lc-wp-chuck-joint"></div>
      <div class="lc-wp-lines" id="cncWpLines"></div>
      <div class="lc-wp-heat" id="cncWpHeat"></div>
      <div class="lc-wp-machined" id="cncMachined"></div>
      <div class="lc-wp-shoulder" id="cncShoulder"></div>
    </div>
  </div>
  <div class="lc-carriage" id="cncCarriage">
    <div class="lc-turret"><div class="lc-turret-led" id="cncTurretLed"></div></div>
  </div>
  <div class="lc-tool-assembly" id="cncToolAssembly">
    <div class="lc-plasma" id="cncPlasma"><div class="lc-plasma-core"></div></div>
    <div class="lc-arc" id="cncArc"><div class="lc-arc-bolt"></div></div>
    <div class="lc-chips" id="cncChipsFV">
      <div class="lc-chip lc-chip-c paused"></div>
      <div class="lc-chip lc-chip-c paused"></div>
      <div class="lc-chip lc-chip-l paused"></div>
      <div class="lc-chip lc-chip-c paused"></div>
      <div class="lc-chip lc-chip-l paused"></div>
    </div>
    <div class="lc-coolant-nozzle" id="cncCoolantNozzle"></div>
    <div class="lc-coolant" id="cncCoolantFV">
      <div class="lc-coolant-jet"></div><div class="lc-coolant-jet"></div>
    </div>
    <div class="lc-sparks" id="cncSparksFV">
      <div class="lc-spark"></div><div class="lc-spark"></div><div class="lc-spark"></div>
      <div class="lc-spark"></div><div class="lc-spark"></div><div class="lc-spark"></div>
    </div>
    <div class="lc-insert" id="cncInsert"></div>
    <div class="lc-insert-arm"></div>
  </div>
  <div class="lc-tailstock"><div class="lc-ts-quill"></div><div class="lc-ts-hw"></div></div>
    <!-- Lámpara de trabajo -->
  <div class="lc-work-lamp" id="cncLamp">
    <div class="lc-work-lamp-beam" id="cncLampBeam"></div>
    <div class="lc-work-lamp-tip" id="cncLampTip"></div>
  </div>
  <!-- Temperatura -->
  <div class="lc-temp-display" id="cncTempDisp">
    <div class="lc-temp-value" id="cncTempVal">025</div>
  </div>
  <!-- Manómetro refrigerante -->
  <div class="lc-pressure-gauge" id="cncPressGauge">
    <div class="lc-pressure-needle" id="cncPressNeedle"></div>
    <div class="lc-pressure-cap"></div>
  </div>
  <!-- Desgaste herramienta -->
  <div class="lc-wear-indicator" id="cncWearInd">
    <div class="lc-wear-label">DESGASTE</div>
    <div class="lc-wear-bar-bg"><div class="lc-wear-bar-fill" id="cncWearFill"></div></div>
    <div class="lc-wear-pct" id="cncWearPct">15%</div>
  </div>
  <!-- Vibrómetro -->
  <div class="lc-vibro" id="cncVibro">
    <div class="lc-vibro-value" id="cncVibroVal">0.00</div>
    <div class="lc-vibro-wave"><div class="lc-vibro-line" id="cncVibroLine"></div></div>
  </div>
  <!-- Posición Z encoder -->
  <div class="lc-encoder" id="cncEncoder">
    <div class="lc-encoder-value" id="cncEncoderVal">Z+000.00</div>
  </div>
  <!-- Modo de corte -->
  <div class="lc-cut-mode-indicator">
    <div class="lc-cut-mode-text active" id="cncCutMode">G96 — CORTE ACTIVO</div>
  </div>
  <!-- Protector de viruta -->
  <div class="lc-guard"></div>
  <div class="lc-cnc-panel">
    <div class="lc-screen"><div class="lc-screen-text" id="cncScreenFV">G96 S180
F0.25
X50.000 Z0.000
RPM: 1146</div></div>
  </div>
  <div class="lc-part-counter" id="cncPartCounter">PC:001 | O0001</div>
</div>

                    <div class="stats-panel">
                        <div class="stat-mini" id="cncRPMBubble">
                            <div class="stat-mini-dot"></div>
                            <div class="stat-mini-label">RPM</div>
                            <div class="stat-mini-value" id="cncRPMStat">1146</div>
                            <div class="stat-mini-unit">rev/min</div>
                        </div>
                        <div class="stat-mini" id="cncMRRBubble">
                            <div class="stat-mini-dot"></div>
                            <div class="stat-mini-label">MRR</div>
                            <div class="stat-mini-value" id="cncMRRStat">0.00</div>
                            <div class="stat-mini-unit">cm³/min</div>
                        </div>
                        <div class="stat-mini" id="cncStatusBubble">
                            <div class="stat-mini-dot"></div>
                            <div class="stat-mini-label">Estado</div>
                            <div class="stat-mini-value" id="cncStatusStat">ÓPTIMO</div>
                        </div>
                    </div>
                    <!-- Fila 2: parámetros adicionales -->
                    <div class="stats-panel-row2">
                        <div class="stat-mini" id="cncFeedStatCard">
                            <div class="stat-mini-dot"></div>
                            <div class="stat-mini-label">Avance (f)</div>
                            <div class="stat-mini-value" id="cncFeedStat">0.25</div>
                            <div class="stat-mini-unit">mm/rev</div>
                        </div>
                        <div class="stat-mini" id="cncDepthStatCard">
                            <div class="stat-mini-dot"></div>
                            <div class="stat-mini-label">Prof. corte (ap)</div>
                            <div class="stat-mini-value" id="cncDepthStat">2.0</div>
                            <div class="stat-mini-unit">mm</div>
                        </div>
                        <div class="stat-mini" id="cncVcStatCard">
                            <div class="stat-mini-dot"></div>
                            <div class="stat-mini-label">Vel. corte (Vc)</div>
                            <div class="stat-mini-value" id="cncVcStat2">180</div>
                            <div class="stat-mini-unit">m/min</div>
                        </div>
                        <div class="stat-mini" id="cncRaStatCard">
                            <div class="stat-mini-dot"></div>
                            <div class="stat-mini-label">Ra teórico</div>
                            <div class="stat-mini-value" id="cncRaStat">—</div>
                            <div class="stat-mini-unit">μm</div>
                        </div>
                    </div>


                    <div class="alert-box alert-optimal" id="cncAlertOptimal">
                        <strong>Parámetros óptimos:</strong> Los valores están dentro del rango recomendado para este material.
                    </div>
                    <div class="alert-box alert-warning" id="cncAlertWarning">
                        <strong>Advertencia:</strong> <span id="cncWarningText"></span>
                    </div>
                    <div class="alert-box alert-danger" id="cncAlertDanger">
                        <strong>Peligro:</strong> <span id="cncDangerText"></span>
                    </div>

                    <div class="status-info">
                        <strong>Modo G96 Activo:</strong> Velocidad de corte constante. El CNC ajusta automáticamente las RPM conforme cambia el diámetro de la pieza.
                    </div>

                    <div class="controls">
                        <div class="control-group">
                            <div class="control-label">
                                <span class="label-text">Velocidad de Avance (f)</span>
                                <span class="label-value" id="cncFeedValue">0.25 mm/rev</span>
                            </div>
                            <input type="range" class="slider" id="cncFeed" min="0.05" max="0.60" step="0.01" value="0.25" oninput="updateCNC()">
                            <div style="margin-top: 0.5rem; font-size: 0.85rem; color: var(--text-light);">
                                Rango recomendado para <span id="cncModeText">desbaste</span>: <span id="cncFeedRange">0.25-0.60 mm/rev</span>
                            </div>
                        </div>

                        <div class="control-group">
                            <div class="control-label">
                                <span class="label-text">Profundidad de Corte (ap)</span>
                                <span class="label-value" id="cncDepthValue">2.0 mm</span>
                            </div>
                            <input type="range" class="slider" id="cncDepth" min="0.1" max="8.0" step="0.1" value="2.0" oninput="updateCNC()">
                            <div style="margin-top: 0.5rem; font-size: 0.85rem; color: var(--text-light);">
                                Rango recomendado para <span id="cncModeText2">desbaste</span>: <span id="cncDepthRange">2.0-8.0 mm</span>
                            </div>
                        </div>

                        <div class="control-group">
                            <div class="control-label">
                                <span class="label-text">Velocidad de Corte (Vc)</span>
                                <span class="label-value" id="cncSpeedValue">180 m/min</span>
                            </div>
                            <input type="range" class="slider" id="cncSpeed" min="50" max="600" step="10" value="180" oninput="updateCNC()">
                            <div style="margin-top: 0.5rem; font-size: 0.85rem; color: var(--text-light);">
                                Rango para material seleccionado: <span id="cncSpeedRange">150-220 m/min</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Conventional Lathe -->
                <div class="sim-card">
                    <div class="sim-header">
                        <h2 class="sim-title">Torno Convencional</h2>
                        <span class="sim-badge" style="background: var(--ipn-guinda-dark);">MANUAL</span>
                    </div>

                    <div class="material-selector">
                        <div class="control-label">
                            <span class="label-text">Material a tornear</span>
                        </div>
                            <select id="convMaterial" onchange="updateConvMaterial()">
                            <option value="steel">Acero Dulce 1018/1020 (160-250 m/min)</option>
                            <option value="steel_1045">Acero 1045 (140-220 m/min)</option>
                            <option value="lowalloy">Acero Baja Aleación 4140/4340 (100-190 m/min)</option>
                            <option value="hardened_35">Acero Templado 35-45 HRC (70-160 m/min)</option>
                            <option value="hardened_45">Acero Templado 45-55 HRC (55-130 m/min)</option>
                            <option value="hardened_55">Acero Endurecido >55 HRC (25-80 m/min)</option>
                            <option value="stainless_303">Acero Inoxidable 303 (130-240 m/min)</option>
                            <option value="stainless">Acero Inox. 304/316 (90-170 m/min)</option>
                            <option value="stainless_m">Acero Inox. 410/420 (70-130 m/min)</option>
                            <option value="stainless_174">Acero Inox. 17-4PH (65-140 m/min)</option>
                            <option value="cast">Fundición Gris (70-140 m/min)</option>
                            <option value="nodular">Fundición Nodular (55-110 m/min)</option>
                            <option value="aluminum">Aluminio 6061/7075 (350-700 m/min)</option>
                            <option value="aluminum_2011">Aluminio 2011 (400-800 m/min)</option>
                            <option value="aluminum_pure">Aluminio Puro (450-900 m/min)</option>
                            <option value="brass">Latón C36000 (160-300 m/min)</option>
                            <option value="copper">Cobre Electrolítico (80-120 m/min)</option>
                            <option value="bronze">Bronce C93200 (70-150 m/min)</option>
                            <option value="titanium">Titanio Ti-6Al-4V (30-75 m/min)</option>
                            <option value="titanium_2">Titanio Grado 2 (35-85 m/min)</option>
                            <option value="inconel">Inconel 718 (18-45 m/min)</option>
                            <option value="hastelloy">Hastelloy C-276 (16-40 m/min)</option>
                            <option value="magnesium">Magnesio (500-1000 m/min)</option>
                            <option value="plastic">Plásticos (100-300 m/min)</option>
                        </select>
                    </div>
                    
<div class="lathe-canvas" id="convCanvas">
  <div class="lc-ambient" id="convAmbient"></div>
  <div class="lc-bed"><div class="lc-chip-tray"><div class="lc-chip-pile" id="convChipPile"></div></div></div>
  <div class="lc-headstock"><div class="lc-hs-indicator" id="convHsInd"></div></div>
  <div class="lc-spindle-nose"></div>
  <div class="lc-chuck" id="convChuck">
    <div class="lc-chuck-body">
      <div class="lc-jaw lc-jaw-1"></div><div class="lc-jaw lc-jaw-2"></div><div class="lc-jaw lc-jaw-3"></div>
      <div class="lc-chuck-hub"></div>
    </div>
  </div>
    <div class="lc-chuck-mask"></div>
    <div class="lc-workpiece" id="convWorkpiece">
      <div class="lc-wp-body">
        <div class="lc-wp-shadow-left"></div>
        <div class="lc-wp-chuck-joint"></div>
      <div class="lc-wp-lines" id="convWpLines"></div>
      <div class="lc-wp-heat" id="convWpHeat"></div>
      <div class="lc-wp-machined" id="convMachined"></div>
      <div class="lc-wp-shoulder" id="convShoulder"></div>
    </div>
  </div>
  <div class="lc-carriage" id="convCarriage">
    <div class="lc-tool-post-conv"></div>
    <div class="lc-apron"><div class="lc-feed-lever" id="convFeedLever"></div></div>
  </div>
  <div class="lc-tool-assembly" id="convToolAssembly">
    <div class="lc-chips" id="convChipsFV">
      <div class="lc-chip lc-chip-c paused"></div>
      <div class="lc-chip lc-chip-c paused"></div>
      <div class="lc-chip lc-chip-l paused"></div>
      <div class="lc-chip lc-chip-c paused"></div>
      <div class="lc-chip lc-chip-l paused"></div>
    </div>
    <div class="lc-coolant" id="convCoolantFV">
      <div class="lc-coolant-jet"></div><div class="lc-coolant-jet"></div>
    </div>
    <div class="lc-sparks" id="convSparksFV">
      <div class="lc-spark"></div><div class="lc-spark"></div><div class="lc-spark"></div>
      <div class="lc-spark"></div><div class="lc-spark"></div><div class="lc-spark"></div>
    </div>
    <div class="lc-insert" id="convInsert"></div>
    <div class="lc-insert-arm"></div>
  </div>
  <div class="lc-handwheel lc-hw-carriage" id="convHWLong"><div class="lc-hw-hub"></div></div>
  <div class="lc-handwheel lc-hw-cross" id="convHWTrans"><div class="lc-hw-hub"></div></div>
  <div class="lc-gear-box"><div class="lc-gear-knob" id="convGearKnob"></div></div>
  <div class="lc-tailstock"><div class="lc-ts-quill"></div><div class="lc-ts-hw"></div></div>
    <!-- Lámpara de trabajo -->
  <div class="lc-work-lamp" id="convLamp">
    <div class="lc-work-lamp-beam" id="convLampBeam"></div>
    <div class="lc-work-lamp-tip" id="convLampTip"></div>
  </div>
  <!-- Temperatura -->
  <div class="lc-temp-display" id="convTempDisp">
    <div class="lc-temp-value" id="convTempVal">025</div>
  </div>
  <!-- Manómetro -->
  <div class="lc-pressure-gauge" id="convPressGauge">
    <div class="lc-pressure-needle" id="convPressNeedle"></div>
    <div class="lc-pressure-cap"></div>
  </div>
  <!-- Desgaste herramienta -->
  <div class="lc-wear-indicator" id="convWearInd">
    <div class="lc-wear-label">DESGASTE</div>
    <div class="lc-wear-bar-bg"><div class="lc-wear-bar-fill" id="convWearFill"></div></div>
    <div class="lc-wear-pct" id="convWearPct">15%</div>
  </div>
  <!-- Vibrómetro -->
  <div class="lc-vibro" id="convVibro">
    <div class="lc-vibro-value" id="convVibroVal">0.00</div>
    <div class="lc-vibro-wave"><div class="lc-vibro-line" id="convVibroLine"></div></div>
  </div>
  <!-- Posición Z -->
  <div class="lc-encoder" id="convEncoder">
    <div class="lc-encoder-value" id="convEncoderVal">Z+000.00</div>
  </div>
  <!-- Contador de piezas -->
  <div class="lc-conv-counter" id="convCounter">PC:001</div>
  <!-- Modo manual -->
  <div class="lc-cut-mode-indicator">
    <div class="lc-cut-mode-text" id="convCutMode">MANUAL — EN ESPERA</div>
  </div>
  <!-- Protector de viruta -->
  <div class="lc-guard"></div>

  <div class="lc-rpm-display" id="convRpmDisplay">500 RPM</div>
</div>

                    <div class="stats-panel">
                        <div class="stat-mini" id="convVcBubble">
                            <div class="stat-mini-dot"></div>
                            <div class="stat-mini-label">Vc Result.</div>
                            <div class="stat-mini-value" id="convVcStat">78.5</div>
                            <div class="stat-mini-unit">m/min</div>
                        </div>
                        <div class="stat-mini" id="convMRRBubble">
                            <div class="stat-mini-dot"></div>
                            <div class="stat-mini-label">MRR</div>
                            <div class="stat-mini-value" id="convMRRStat">0.00</div>
                            <div class="stat-mini-unit">cm³/min</div>
                        </div>
                        <div class="stat-mini warn" id="convStatusBubble">
                            <div class="stat-mini-dot"></div>
                            <div class="stat-mini-label">Estado</div>
                            <div class="stat-mini-value warn" id="convStatusStat">BAJO</div>
                        </div>
                    </div>
                    <!-- Fila 2: parámetros adicionales -->
                    <div class="stats-panel-row2">
                        <div class="stat-mini" id="convFeedStatCard">
                            <div class="stat-mini-dot"></div>
                            <div class="stat-mini-label">Avance (f)</div>
                            <div class="stat-mini-value" id="convFeedStat">0.25</div>
                            <div class="stat-mini-unit">mm/rev</div>
                        </div>
                        <div class="stat-mini" id="convDepthStatCard">
                            <div class="stat-mini-dot"></div>
                            <div class="stat-mini-label">Prof. corte (ap)</div>
                            <div class="stat-mini-value" id="convDepthStat">2.0</div>
                            <div class="stat-mini-unit">mm</div>
                        </div>
                        <div class="stat-mini" id="convRpmStatCard">
                            <div class="stat-mini-dot"></div>
                            <div class="stat-mini-label">RPM husillo</div>
                            <div class="stat-mini-value" id="convRpmStat2">500</div>
                            <div class="stat-mini-unit">rev/min</div>
                        </div>
                        <div class="stat-mini" id="convRaStatCard">
                            <div class="stat-mini-dot"></div>
                            <div class="stat-mini-label">Ra teórico</div>
                            <div class="stat-mini-value" id="convRaStat">—</div>
                            <div class="stat-mini-unit">μm</div>
                        </div>
                    </div>

                    <div class="alert-box alert-optimal" id="convAlertOptimal">
                        <strong>Parámetros óptimos:</strong> La velocidad de corte está dentro del rango recomendado.
                    </div>
                    <div class="alert-box alert-warning" id="convAlertWarning">
                        <strong>Advertencia:</strong> <span id="convWarningText"></span>
                    </div>
                    <div class="alert-box alert-danger" id="convAlertDanger">
                        <strong>Peligro:</strong> <span id="convDangerText"></span>
                    </div>

                    <div class="status-info">
                        <strong>RPM Fijas:</strong> La velocidad de corte (Vc) varía según el diámetro de la pieza. El operador debe ajustar manualmente las RPM cuando el diámetro cambia significativamente.
                    </div>

                    <div class="controls">
                        <div class="control-group">
                            <div class="control-label">
                                <span class="label-text">Velocidad de Avance (f)</span>
                                <span class="label-value" id="convFeedValue">0.25 mm/rev</span>
                            </div>
                            <input type="range" class="slider" id="convFeed" min="0.05" max="0.60" step="0.01" value="0.25" oninput="updateConv()">
                            <div style="margin-top: 0.5rem; font-size: 0.85rem; color: var(--text-light);">
                                Rango recomendado: <span id="convFeedRange">0.25-0.60 mm/rev</span>
                            </div>
                        </div>

                        <div class="control-group">
                            <div class="control-label">
                                <span class="label-text">Profundidad de Corte (ap)</span>
                                <span class="label-value" id="convDepthValue">2.0 mm</span>
                            </div>
                            <input type="range" class="slider" id="convDepth" min="0.1" max="8.0" step="0.1" value="2.0" oninput="updateConv()">
                            <div style="margin-top: 0.5rem; font-size: 0.85rem; color: var(--text-light);">
                                Rango recomendado: <span id="convDepthRange">2.0-8.0 mm</span>
                            </div>
                        </div>

                        <div class="control-group">
                            <div class="control-label">
                                <span class="label-text">RPM del Husillo</span>
                                <span class="label-value" id="convRPMValue">500 RPM</span>
                            </div>
                            <input type="range" class="slider" id="convRPM" min="100" max="2000" step="50" value="500" oninput="updateConv()">
                            <div style="margin-top: 0.5rem; font-size: 0.85rem; color: var(--text-light);">
                                Rango típico para este diámetro: 300-1200 RPM
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- REFERENCES PAGE -->
        <div id="references" class="page">
            <div class="card">
                <h2 class="card-title">Referencias Bibliográficas</h2>
                <div class="card-content">
                    <ul class="references-list">
                        <li>
                            <span class="ref-number">1</span>
                            <strong>Uneed PM.</strong> "Cortes de desbaste y acabado en operaciones de mecanizado - Torneado en Desbaste." 
                            <a href="https://www.uneedpm.com/es/rough-turning-rough-and-finish-cuts-in-machining-operations/" target="_blank" style="color: var(--ipn-guinda);">
                                https://www.uneedpm.com/es/rough-turning-rough-and-finish-cuts-in-machining-operations/
                            </a>
                        </li>
                        <li>
                            <span class="ref-number">2</span>
                            <strong>Sandvik Coromant.</strong> "Turning Handbook - Technical Guides." 
                            <a href="https://coromantstrgprod.blob.core.windows.net/files/sitecollectiondocuments%2Fdownloads%2Fglobal%2Ftechnical%20guides%2Fen-gb%2Fc-1020-18.pdf" target="_blank" style="color: var(--ipn-guinda);">
                                Technical Guide C-1020-18
                            </a>
                        </li>
                        <li>
                            <span class="ref-number">3</span>
                            <strong>LibreTexts Español.</strong> "Unidad 2: Velocidades, alimentaciones y roscado - Procesos de Manufactura." 
                            <a href="https://espanol.libretexts.org/Bookshelves/Vocacional/Manufactura/Libro%3A_Procesos_de_Manufactura_4-5_(Virasak)/01%3A_Fresadoras/01.3%3A_Unidad_2" target="_blank" style="color: var(--ipn-guinda);">
                                https://espanol.libretexts.org
                            </a>
                        </li>
                        <li>
                            <span class="ref-number">4</span>
                            <strong>Wikipedia.</strong> "Velocidad de corte." 
                            <a href="https://es.wikipedia.org/wiki/Velocidad_de_corte" target="_blank" style="color: var(--ipn-guinda);">
                                https://es.wikipedia.org/wiki/Velocidad_de_corte
                            </a>
                        </li>
                        <li>
                            <span class="ref-number">5</span>
                            <strong>Manuales de fabricantes de herramientas:</strong> Kennametal, Iscar, Mitsubishi Materials, Seco Tools. Tablas de parámetros de corte para plaquitas de carburo y cerámicas.
                        </li>
                    </ul>
                </div>
            </div>

            <div class="developer-card">
                <div class="developer-name">Joseph Ubaldo Trejo Hernández</div>
                <div class="developer-title">Desarrollador del Simulador</div>
                <div class="developer-info">
                    <p>Instituto Politécnico Nacional</p>
                    <p style="margin-top: 0.5rem;">Simulador Educativo de Parámetros de Corte en Torneado</p>
                    <p style="margin-top: 0.5rem;">Desarrollado como herramienta didáctica para la enseñanza de procesos de manufactura</p>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>Instituto Politécnico Nacional - Simulador de Torneado</p>
        <p style="margin-top: 0.5rem; font-size: 0.9rem; opacity: 0.8;">Desarrollado por Joseph Ubaldo Trejo Hernández</p>
        <p style="margin-top: 0.3rem; font-size: 0.6rem; opacity: 0.6;">https://josepht2244.github.io/Parametros-de-corte/</p>
    </footer>

    <script>
        // Material data with valid ranges
        const materialDataCNC = {
            steel: { name: 'Acero Dulce (1018/1020)', vcMin: 160, vcMax: 250, hardness: 'medium', sparks: false },
            steel_1045: { name: 'Acero al Carbono Medio (1045)', vcMin: 140, vcMax: 220, hardness: 'medium', sparks: false },
            lowalloy: { name: 'Acero Baja Aleación (4140/4340)', vcMin: 100, vcMax: 190, hardness: 'medium-hard', sparks: false },
            hardened_35: { name: 'Acero Templado 35-45 HRC', vcMin: 70, vcMax: 160, hardness: 'hard', sparks: true },
            hardened_45: { name: 'Acero Templado 45-55 HRC', vcMin: 55, vcMax: 130, hardness: 'hard', sparks: true },
            hardened_55: { name: 'Acero Endurecido >55 HRC', vcMin: 25, vcMax: 80, hardness: 'very_hard', sparks: true },
            stainless_303: { name: 'Acero Inoxidable 303', vcMin: 130, vcMax: 240, hardness: 'medium', sparks: false },
            stainless: { name: 'Acero Inox. Austenítico 304/316', vcMin: 90, vcMax: 170, hardness: 'medium', sparks: false },
            stainless_m: { name: 'Acero Inox. Martensítico 410/420', vcMin: 70, vcMax: 130, hardness: 'medium-hard', sparks: false },
            stainless_174: { name: 'Acero Inox. 17-4PH', vcMin: 65, vcMax: 140, hardness: 'hard', sparks: false },
            cast: { name: 'Fundición Gris GG-20/GG-25', vcMin: 70, vcMax: 140, hardness: 'medium', sparks: false },
            nodular: { name: 'Fundición Nodular GGG-40/60', vcMin: 55, vcMax: 110, hardness: 'medium', sparks: false },
            aluminum: { name: 'Aluminio Aleado 6061/7075', vcMin: 350, vcMax: 700, hardness: 'soft', sparks: false },
            aluminum_2011: { name: 'Aluminio 2011', vcMin: 400, vcMax: 800, hardness: 'soft', sparks: false },
            aluminum_pure: { name: 'Aluminio Puro 1050/1100', vcMin: 450, vcMax: 900, hardness: 'soft', sparks: false },
            brass: { name: 'Latón C36000', vcMin: 160, vcMax: 300, hardness: 'soft', sparks: false },
            copper: { name: 'Cobre Electrolítico C11000', vcMin: 80, vcMax: 120, hardness: 'soft', sparks: false },
            bronze: { name: 'Bronce C93200', vcMin: 70, vcMax: 150, hardness: 'soft', sparks: false },
            titanium: { name: 'Titanio Ti-6Al-4V (Grado 5)', vcMin: 30, vcMax: 75, hardness: 'hard', sparks: true },
            titanium_2: { name: 'Titanio Grado 2', vcMin: 35, vcMax: 85, hardness: 'medium-hard', sparks: true },
            inconel: { name: 'Inconel 718', vcMin: 18, vcMax: 45, hardness: 'very_hard', sparks: true },
            hastelloy: { name: 'Hastelloy C-276', vcMin: 16, vcMax: 40, hardness: 'very_hard', sparks: true },
            magnesium: { name: 'Magnesio AZ31/AZ91', vcMin: 500, vcMax: 1000, hardness: 'soft', sparks: false },
            plastic: { name: 'Plásticos (varios)', vcMin: 100, vcMax: 300, hardness: 'soft', sparks: false }
        };

        const materialDataConv = {
            steel_low: { name: 'Acero Dulce (1018/1020)', vcMin: 130, vcMax: 210, hardness: 'medium', sparks: false },
            steel_med: { name: 'Acero al Carbono Medio (1045)', vcMin: 120, vcMax: 190, hardness: 'medium', sparks: false },
            lowalloy: { name: 'Acero Baja Aleación (4140/4340)', vcMin: 90, vcMax: 160, hardness: 'medium-hard', sparks: false },
            hardened_35: { name: 'Acero Templado 35-45 HRC', vcMin: 60, vcMax: 130, hardness: 'hard', sparks: true },
            hardened_45: { name: 'Acero Templado 45-55 HRC', vcMin: 45, vcMax: 110, hardness: 'hard', sparks: true },
            hardened_55: { name: 'Acero Endurecido >55 HRC', vcMin: 20, vcMax: 65, hardness: 'very_hard', sparks: true },
            stainless_303: { name: 'Acero Inoxidable 303', vcMin: 110, vcMax: 200, hardness: 'medium', sparks: false },
            stainless_a: { name: 'Acero Inox. Austenítico 304/316', vcMin: 80, vcMax: 140, hardness: 'medium', sparks: false },
            stainless_m: { name: 'Acero Inox. Martensítico 410/420', vcMin: 60, vcMax: 110, hardness: 'medium-hard', sparks: false },
            cast: { name: 'Fundición Gris GG-20/GG-25', vcMin: 60, vcMax: 120, hardness: 'medium', sparks: false },
            nodular: { name: 'Fundición Nodular GGG-40/60', vcMin: 45, vcMax: 95, hardness: 'medium', sparks: false },
            aluminum: { name: 'Aluminio Aleado 6061/7075', vcMin: 300, vcMax: 600, hardness: 'soft', sparks: false },
            aluminum_pure: { name: 'Aluminio Puro 1050/1100', vcMin: 350, vcMax: 700, hardness: 'soft', sparks: false },
            brass: { name: 'Latón C36000', vcMin: 140, vcMax: 250, hardness: 'soft', sparks: false },
            bronze: { name: 'Bronce C93200', vcMin: 60, vcMax: 120, hardness: 'soft', sparks: false },
            copper: { name: 'Cobre Electrolítico C11000', vcMin: 65, vcMax: 100, hardness: 'soft', sparks: false },
            titanium: { name: 'Titanio Ti-6Al-4V', vcMin: 25, vcMax: 60, hardness: 'hard', sparks: true },
            plastic: { name: 'Plásticos (varios)', vcMin: 80, vcMax: 250, hardness: 'soft', sparks: false }
        };

        let currentMode = 'desbaste';
        let currentCNCMaterial = 'steel';
        let currentConvMaterial = 'steel_low';

        // Page navigation
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(pageId).classList.add('active');
            event.target.classList.add('active');
        }

        let lastScrollTop = 0;
        const nav = document.querySelector("nav");

        window.addEventListener("scroll", function () {
            let scrollTop = window.pageYOffset || document.documentElement.scrollTop;

            if (scrollTop > lastScrollTop) {
                nav.classList.add("hide-nav");
            } else {
                nav.classList.remove("hide-nav");
            }

            lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
        });

        // Mode selection
        function setMode(mode) {
            currentMode = mode;
            
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            const modeText = mode === 'desbaste' ? 'desbaste' : 'acabado';
            document.querySelectorAll('#cncModeText, #cncModeText2').forEach(el => el.textContent = modeText);
            
            if (mode === 'desbaste') {
                document.getElementById('cncFeedRange').textContent = '0.25-0.60 mm/rev';
                document.getElementById('cncDepthRange').textContent = '2.0-8.0 mm';
                document.getElementById('convFeedRange').textContent = '0.25-0.60 mm/rev';
                document.getElementById('convDepthRange').textContent = '2.0-8.0 mm';
                
                document.getElementById('cncFeed').value = 0.40;
                document.getElementById('cncDepth').value = 4.0;
                document.getElementById('convFeed').value = 0.40;
                document.getElementById('convDepth').value = 4.0;
            } else {
                document.getElementById('cncFeedRange').textContent = '0.05-0.20 mm/rev';
                document.getElementById('cncDepthRange').textContent = '0.1-0.5 mm';
                document.getElementById('convFeedRange').textContent = '0.05-0.20 mm/rev';
                document.getElementById('convDepthRange').textContent = '0.1-0.5 mm';
                
                document.getElementById('cncFeed').value = 0.10;
                document.getElementById('cncDepth').value = 0.3;
                document.getElementById('convFeed').value = 0.10;
                document.getElementById('convDepth').value = 0.3;
            }
            
            updateCNC();
            updateConv();
        }

        // Update CNC material
        function updateCNCMaterial() {
            currentCNCMaterial = document.getElementById('cncMaterial').value;
            const material = materialDataCNC[currentCNCMaterial];
            
            const vcMiddle = (material.vcMin + material.vcMax) / 2;
            document.getElementById('cncSpeed').min = material.vcMin;
            document.getElementById('cncSpeed').max = material.vcMax;
            document.getElementById('cncSpeed').value = Math.round(vcMiddle);
            document.getElementById('cncSpeedRange').textContent = `${material.vcMin}-${material.vcMax} m/min`;
            
            updateCNC();
            wearAccum['cnc'] = 5 + Math.random() * 10;
        }
function updateMiniCard(cardId, valId, ranges, value) {
    const card = document.getElementById(cardId);
    const valEl = document.getElementById(valId);
    if (!card || !valEl) return;
    let cls = 'ok';
    if (value < ranges.ok[0] || value > ranges.ok[1]) {
        // fuera del óptimo
        if (value < ranges.warn[0] || value > ranges.warn[1]) {
            cls = 'danger';
        } else {
            cls = 'warn';
        }
    }
    card.className = 'stat-mini ' + cls;
    valEl.className = 'stat-mini-value ' + cls;
}
        // CNC update
        function updateCNC() {
            let feed = parseFloat(document.getElementById('cncFeed').value);
            let depth = parseFloat(document.getElementById('cncDepth').value);
            let speed = parseFloat(document.getElementById('cncSpeed').value);
            
            const material = materialDataCNC[currentCNCMaterial];
            const diameter = 50;
            
            const rpm = Math.round((1000 * speed) / (Math.PI * diameter));
            const mrr = (speed * feed * depth / 1000).toFixed(2);
            
            let status = 'ÓPTIMO';
            let statusClass = 'optimal';
            let warnings = [];
            let dangers = [];
            
            if (currentMode === 'desbaste') {
                if (feed < 0.25) warnings.push('Avance muy bajo para desbaste');
                if (feed > 0.60) dangers.push('Avance excesivo, riesgo de rotura');
            } else {
                if (feed < 0.05) warnings.push('Avance extremadamente bajo');
                if (feed > 0.20) dangers.push('Avance muy alto para acabado');
            }
            
            if (currentMode === 'desbaste') {
                if (depth < 2.0) warnings.push('Profundidad baja para desbaste');
                if (depth > 8.0) dangers.push('Profundidad excesiva');
            } else {
                if (depth > 0.5) dangers.push('Profundidad muy alta para acabado');
            }
            
            if (speed < material.vcMin) {
                warnings.push(`Vc bajo para ${material.name}`);
            }
            if (speed > material.vcMax) {
                dangers.push(`Vc excesivo para ${material.name}`);
            }
            
            if (dangers.length > 0) {
                status = 'PELIGRO';
                statusClass = 'danger';
            } else if (warnings.length > 0) {
                status = 'ADVERTENCIA';
                statusClass = 'warning';
            }
            
            document.getElementById('cncFeedValue').textContent = feed.toFixed(2) + ' mm/rev';
            document.getElementById('cncDepthValue').textContent = depth.toFixed(1) + ' mm';
            document.getElementById('cncSpeedValue').textContent = speed + ' m/min';
            document.getElementById('cncRPMStat').textContent = rpm;
            document.getElementById('cncMRRStat').textContent = mrr;
            document.getElementById('cncStatusStat').textContent = status;
            // Fila 2
            document.getElementById('cncFeedStat').textContent = feed.toFixed(2);
            document.getElementById('cncDepthStat').textContent = depth.toFixed(1);
            document.getElementById('cncVcStat2').textContent = speed;
            // Ra teórico = f² / (32 * r_punta); asumimos r_punta=0.8mm
            const raCNC = ((feed * feed) / (32 * 0.8) * 1000).toFixed(2);
            document.getElementById('cncRaStat').textContent = raCNC;
            // Semáforos tarjetas fila 2
            updateMiniCard('cncFeedStatCard', 'cncFeedStat',
                currentMode === 'desbaste'
                    ? { ok: [0.25, 0.60], warn: [0.18, 0.70] }
                    : { ok: [0.05, 0.20], warn: [0.03, 0.25] },
                feed);
            updateMiniCard('cncDepthStatCard', 'cncDepthStat',
                currentMode === 'desbaste'
                    ? { ok: [2.0, 8.0], warn: [1.0, 10.0] }
                    : { ok: [0.1, 0.5], warn: [0.05, 0.8] },
                depth);
            updateMiniCard('cncVcStatCard', 'cncVcStat2',
                { ok: [material.vcMin, material.vcMax],
                  warn: [material.vcMin * 0.85, material.vcMax * 1.15] },
                speed);
            updateMiniCard('cncRaStatCard', 'cncRaStat',
                currentMode === 'desbaste'
                    ? { ok: [3.2, 25], warn: [1.6, 50] }
                    : { ok: [0.4, 3.2], warn: [0.2, 6.3] },
                parseFloat(raCNC));

            
            const statusEl = document.getElementById('cncStatusStat');
            const statusBubble = document.getElementById('cncStatusBubble');
            const cncSClass = statusClass === 'optimal' ? 'ok' : statusClass === 'warning' ? 'warn' : 'danger';
            statusEl.className = 'stat-mini-value ' + cncSClass;
            statusBubble.className = 'stat-mini ' + cncSClass;
            document.getElementById('cncRPMBubble').className = 'stat-mini';
            document.getElementById('cncMRRBubble').className = 'stat-mini';
            
            document.getElementById('cncAlertOptimal').classList.toggle('show', status === 'ÓPTIMO');
            document.getElementById('cncAlertWarning').classList.toggle('show', warnings.length > 0 && dangers.length === 0);
            document.getElementById('cncAlertDanger').classList.toggle('show', dangers.length > 0);
            
            if (warnings.length > 0) {
                document.getElementById('cncWarningText').textContent = warnings.join('. ');
            }
            if (dangers.length > 0) {
                document.getElementById('cncDangerText').textContent = dangers.join('. ');
            }
            
            const rotationSpeed = speed / 150;
            const chipIntensity = feed * depth * speed / 120;
            
            updateVisualization('cnc', feed, depth, speed, rpm, material);
            updateCNCScreen(speed, feed, rpm);
        }

        // Conventional update
function updateConv() {
            const feed = parseFloat(document.getElementById('convFeed').value);
            const depth = parseFloat(document.getElementById('convDepth').value);
            const rpm = parseInt(document.getElementById('convRPM').value);
            
            currentConvMaterial = document.getElementById('convMaterial').value;
            const material = materialDataConv[currentConvMaterial] || materialDataCNC[currentConvMaterial];
            
            const diameter = 50;
            const vc = ((Math.PI * diameter * rpm) / 1000).toFixed(1);
            const mrr = (vc * feed * depth / 1000).toFixed(2);
            
            let status = 'ÓPTIMO';
            let statusClass = 'optimal';
            let warnings = [];
            let dangers = [];
            
            if (vc < material.vcMin) {
                status = 'BAJO';
                statusClass = 'warning';
                warnings.push(`Vc bajo (${vc} m/min) para ${material.name}`);
            } else if (vc > material.vcMax) {
                status = 'ALTO';
                statusClass = 'danger';
                dangers.push(`Vc alto (${vc} m/min) para ${material.name}`);
            }
            
            if (currentMode === 'desbaste') {
                if (feed > 0.60) dangers.push('Avance excesivo');
            } else {
                if (feed > 0.20) dangers.push('Avance muy alto');
            }
            
            if (currentMode === 'desbaste') {
                if (depth > 8.0) dangers.push('Profundidad excesiva');
            } else {
                if (depth > 0.5) dangers.push('Profundidad alta');
            }
            
            if (dangers.length > 0) {
                status = 'PELIGRO';
                statusClass = 'danger';
            }
            
            document.getElementById('convFeedValue').textContent = feed.toFixed(2) + ' mm/rev';
            document.getElementById('convDepthValue').textContent = depth.toFixed(1) + ' mm';
            document.getElementById('convRPMValue').textContent = rpm + ' RPM';
            document.getElementById('convVcStat').textContent = vc;
            document.getElementById('convMRRStat').textContent = mrr;
            document.getElementById('convStatusStat').textContent = status;
            // Fila 2
            document.getElementById('convFeedStat').textContent = feed.toFixed(2);
            document.getElementById('convDepthStat').textContent = depth.toFixed(1);
            document.getElementById('convRpmStat2').textContent = rpm;
            const raConv = ((feed * feed) / (32 * 0.8) * 1000).toFixed(2);
            document.getElementById('convRaStat').textContent = raConv;
            // Semáforos fila 2
            updateMiniCard('convFeedStatCard', 'convFeedStat',
                currentMode === 'desbaste'
                    ? { ok: [0.25, 0.60], warn: [0.18, 0.70] }
                    : { ok: [0.05, 0.20], warn: [0.03, 0.25] },
                feed);
            updateMiniCard('convDepthStatCard', 'convDepthStat',
                currentMode === 'desbaste'
                    ? { ok: [2.0, 8.0], warn: [1.0, 10.0] }
                    : { ok: [0.1, 0.5], warn: [0.05, 0.8] },
                depth);
            updateMiniCard('convRpmStatCard', 'convRpmStat2',
                { ok: [200, 1500], warn: [100, 2000] },
                rpm);
            updateMiniCard('convRaStatCard', 'convRaStat',
                currentMode === 'desbaste'
                    ? { ok: [3.2, 25], warn: [1.6, 50] }
                    : { ok: [0.4, 3.2], warn: [0.2, 6.3] },
                parseFloat(raConv));
            
            const statusEl = document.getElementById('convStatusStat');
            const statusBubble = document.getElementById('convStatusBubble');
            const convSClass = statusClass === 'optimal' ? 'ok' : statusClass === 'warning' ? 'warn' : 'danger';
            statusEl.className = 'stat-mini-value ' + convSClass;
            statusBubble.className = 'stat-mini ' + convSClass;
            document.getElementById('convVcBubble').className = 'stat-mini';
            document.getElementById('convMRRBubble').className = 'stat-mini';
            
            document.getElementById('convAlertOptimal').classList.toggle('show', status === 'ÓPTIMO');
            document.getElementById('convAlertWarning').classList.toggle('show', warnings.length > 0 && dangers.length === 0);
            document.getElementById('convAlertDanger').classList.toggle('show', dangers.length > 0);
            
            if (warnings.length > 0) {
                document.getElementById('convWarningText').textContent = warnings.join('. ');
            }
            if (dangers.length > 0) {
                document.getElementById('convDangerText').textContent = dangers.join('. ');
            }
            
            updateVisualization('conv', feed, depth, parseFloat(vc), rpm, material);
        }

        // Update visualization
// ========= PARTICLE SYSTEM =========
const particleSystems = {};

function getOrCreateParticleSystem(type) {
    if (particleSystems[type]) return particleSystems[type];
    const canvas = document.getElementById(type + 'ParticleCanvas');
    if (!canvas) return null;
    const parent = canvas.closest('.lathe-canvas');
    canvas.width = parent.offsetWidth;
    canvas.height = parent.offsetHeight;
    const ctx = canvas.getContext('2d');
    const particles = [];
    particleSystems[type] = { canvas, ctx, particles, active: false };
    return particleSystems[type];
}

function resizeParticleCanvases() {
    ['cnc','conv'].forEach(type => {
        const sys = particleSystems[type];
        if (!sys) return;
        const parent = sys.canvas.closest('.lathe-canvas');
        sys.canvas.width  = parent.offsetWidth;
        sys.canvas.height = parent.offsetHeight;
    });
}
window.addEventListener('resize', resizeParticleCanvases);

// Particle types
function createParticle(type, x, y, opts) {
    return {
        type,
        x, y,
        vx: opts.vx || 0,
        vy: opts.vy || 0,
        life: opts.life || 1,
        maxLife: opts.life || 1,
        size: opts.size || 3,
        color: opts.color || '#ff8800',
        gravity: opts.gravity || 0.08,
        drag: opts.drag || 0.97,
        glow: opts.glow || 0,
        spin: (Math.random() - .5) * .3,
        angle: opts.angle || 0,
    };
}

function spawnParticles(sys, x, y, feed, depth, vc, material, mrr) {
    const isActive = feed > 0.03 && depth > 0.03 && vc > 3;
    if (!isActive) return;

    const hardness = material ? material.hardness : 'medium';
    const now = Date.now();

    // === METAL CHIPS ===
    const chipRate = Math.min(3, mrr * 14 + .5);
    if (Math.random() < chipRate * .18) {
        const chipColor = hardness === 'soft'      ? '#a8c4c8'
                        : hardness === 'very_hard' ? '#4a4850'
                        : hardness === 'hard'      ? '#887060'
                        :                            '#8a9868';
        const speed = 1.8 + feed * 3 + Math.random() * 2;
        const angle = -Math.PI * .6 - Math.random() * .7;
        sys.particles.push(createParticle('chip', x, y, {
            vx: Math.cos(angle) * speed,
            vy: Math.sin(angle) * speed - .5,
            life: 60 + Math.random() * 40,
            size: 2.5 + depth * .4 + Math.random() * 2,
            color: chipColor,
            gravity: .06,
            drag: .96,
            glow: 0,
        }));
    }

    // === HEAT PARTICLES ===
    if (mrr > 0.08 && Math.random() < mrr * 3) {
        const heatColor = mrr > .5 ? '#ff4400'
                        : mrr > .2 ? '#ff8800'
                        :            '#ffcc44';
        sys.particles.push(createParticle('heat', x, y, {
            vx: (Math.random() - .5) * .8,
            vy: -(.5 + Math.random() * 1.2),
            life: 30 + Math.random() * 25,
            size: 2 + mrr * 4 + Math.random() * 3,
            color: heatColor,
            gravity: -.008,
            drag: .96,
            glow: 2,
        }));
    }

    // === SPARKS ===
    if (material && material.sparks && mrr > 0.005) {
        if (Math.random() < Math.min(.9, mrr * 20)) {
            const sparkSpeed = 2.5 + Math.random() * 4;
            const sparkAngle = -Math.PI * .8 + Math.random() * Math.PI * .6;
            sys.particles.push(createParticle('spark', x, y, {
                vx: Math.cos(sparkAngle) * sparkSpeed,
                vy: Math.sin(sparkAngle) * sparkSpeed,
                life: 20 + Math.random() * 20,
                size: 1.5 + Math.random() * 1.5,
                color: Math.random() < .5 ? '#ffe866' : '#ffcc22',
                gravity: .12,
                drag: .94,
                glow: 4,
            }));
        }
    }

    // === COOLANT DROPLETS ===
    const needCoolant = material && (material.hardness === 'hard' || material.hardness === 'very_hard' || mrr > .28);
    if (needCoolant && Math.random() < .3) {
        sys.particles.push(createParticle('coolant', x - 8, y - 30, {
            vx: (Math.random() - .5) * .6,
            vy: .5 + Math.random() * 1.5,
            life: 25 + Math.random() * 15,
            size: 1.5 + Math.random() * 2,
            color: `rgba(${60 + Math.random()*40|0},${160 + Math.random()*60|0},255,.8)`,
            gravity: .1,
            drag: .97,
            glow: 1,
        }));
    }

    // Trim if too many
    if (sys.particles.length > 280) {
        sys.particles.splice(0, sys.particles.length - 280);
    }
}

function updateParticles(sys) {
    const { ctx, canvas, particles } = sys;
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    for (let i = particles.length - 1; i >= 0; i--) {
        const p = particles[i];
        p.life--;
        if (p.life <= 0) { particles.splice(i, 1); continue; }

        p.vx = p.vx * p.drag;
        p.vy = p.vy * p.drag + p.gravity;
        p.x += p.vx;
        p.y += p.vy;
        p.angle += p.spin;

        const alpha = p.life / p.maxLife;

        ctx.save();
        ctx.globalAlpha = alpha;
        ctx.translate(p.x, p.y);
        ctx.rotate(p.angle);

        if (p.glow > 0) {
            ctx.shadowBlur  = p.glow * 4 * alpha;
            ctx.shadowColor = p.color;
        }

        if (p.type === 'chip') {
            // Draw curled chip
            ctx.beginPath();
            ctx.ellipse(0, 0, p.size, p.size * .5, 0, 0, Math.PI * 2);
            ctx.fillStyle = p.color;
            ctx.fill();
            // Highlight on chip
            ctx.beginPath();
            ctx.ellipse(-p.size*.2, -p.size*.15, p.size*.4, p.size*.2, 0, 0, Math.PI);
            ctx.fillStyle = 'rgba(255,255,255,.25)';
            ctx.fill();
        } else if (p.type === 'spark') {
            ctx.beginPath();
            ctx.arc(0, 0, p.size, 0, Math.PI * 2);
            ctx.fillStyle = p.color;
            ctx.fill();
            // Spark trail
            ctx.beginPath();
            ctx.moveTo(0, 0);
            ctx.lineTo(-p.vx * 4, -p.vy * 4);
            ctx.strokeStyle = p.color;
            ctx.lineWidth = p.size * .5;
            ctx.globalAlpha = alpha * .4;
            ctx.stroke();
        } else if (p.type === 'heat') {
            const grad = ctx.createRadialGradient(0, 0, 0, 0, 0, p.size);
            grad.addColorStop(0, p.color);
            grad.addColorStop(1, 'transparent');
            ctx.beginPath();
            ctx.arc(0, 0, p.size, 0, Math.PI * 2);
            ctx.fillStyle = grad;
            ctx.fill();
        } else if (p.type === 'coolant') {
            ctx.beginPath();
            ctx.arc(0, 0, p.size, 0, Math.PI * 2);
            ctx.fillStyle = p.color;
            ctx.fill();
            // Droplet glint
            ctx.beginPath();
            ctx.arc(-p.size*.25, -p.size*.25, p.size*.3, 0, Math.PI*2);
            ctx.fillStyle = 'rgba(255,255,255,.5)';
            ctx.fill();
        }

        ctx.restore();
    }
}

// Main particle loop
let particleLoopRunning = false;
function startParticleLoop() {
    if (particleLoopRunning) return;
    particleLoopRunning = true;
    function loop() {
        ['cnc','conv'].forEach(type => {
            const sys = particleSystems[type];
            if (sys) updateParticles(sys);
        });
        requestAnimationFrame(loop);
    }
    loop();
}

// =========================================
// STORE last params per type for particle emission
const lastParams = {};

function updateVisualization(type, feed, depth, vc, rpm, material) {
    const canvas = document.getElementById(type + 'Canvas');
    if (!canvas) return;
    const cs = getComputedStyle(canvas);
    const spindleY = parseFloat(cs.getPropertyValue('--lc-spindle')) || 168;
    const wpR      = parseFloat(cs.getPropertyValue('--lc-wp-r'))    || 29;

    const isActive = feed > 0.03 && depth > 0.03 && (vc > 3 || rpm > 30);
    const mrr      = (vc * feed * depth) / 1000;

    // Store for particle system
    lastParams[type] = { feed, depth, vc, rpm, material, mrr, isActive, spindleY, wpR };

    // === 1. Chuck spin (RPM-driven) ===
    const chuck = document.getElementById(type + 'Chuck');
    if (chuck) {
        if (isActive && rpm > 0) {
            const dur = Math.max(0.05, 60 / rpm).toFixed(3);
            chuck.style.animationDuration = dur + 's';
            chuck.classList.add('spinning');
        } else {
            chuck.classList.remove('spinning');
        }
    }

    // === 2. Workpiece rotation lines ===
    const wpEl    = document.getElementById(type + 'Workpiece');
    const wpLines = document.getElementById(type + 'WpLines');
    if (wpEl) {
        wpEl.classList.toggle('spinning', isActive);
        if (isActive && wpLines) {
            const spinDur = Math.max(0.05, 1.6 - vc / 600).toFixed(3);
            wpLines.style.animationDuration = spinDur + 's';
        }
    }

    // === 3. Tool depth positioning ===
    const toolAsm = document.getElementById(type + 'ToolAssembly');
    if (toolAsm) {
        const maxDepthMm = 8.0;
        const apPx = (depth / maxDepthMm) * wpR * 0.80;
        const apClamped = Math.min(wpR * 0.80, apPx);
        toolAsm.style.top = (spindleY + wpR - apClamped) + 'px';
        toolAsm.classList.toggle('cutting', isActive);
    }

    // === 4. Carriage feed motion ===
    const carriage = document.getElementById(type + 'Carriage');
    if (carriage) carriage.classList.toggle('cutting', isActive);

    // === 5. Insert glow (material-dependent color) ===
    const insert = document.getElementById(type + 'Insert');
    if (insert) {
        insert.classList.toggle('active', isActive);
        if (isActive) {
            const col = material.hardness === 'very_hard' ? '#ff2200'
                      : material.hardness === 'hard'      ? '#ff5500'
                      : material.hardness === 'soft'      ? '#ffd000'
                      :                                      '#ff8822';
            insert.style.borderBottomColor = col;
        }
    }

    // === 6. PLASMA ARC at contact point ===
    const plasma = document.getElementById(type + 'Plasma');
    if (plasma) plasma.classList.toggle('active', isActive);

    // === 7. Electrical ARC (very hard / high MRR) ===
    const arc = document.getElementById(type + 'Arc');
    if (arc) arc.classList.toggle('active',
        isActive && (material.hardness === 'very_hard') && mrr > .01);

    // === 8. Machined section ===
    const machined  = document.getElementById(type + 'Machined');
    const shoulder  = document.getElementById(type + 'Shoulder');
    if (machined) {
        machined.classList.toggle('active', isActive);
        const shrink = Math.min(10, depth * 1.8);
        machined.style.top    = (4 + shrink) + 'px';
        machined.style.bottom = (4 + shrink) + 'px';
    }
    if (shoulder) shoulder.classList.toggle('active', isActive);

    // === 9. CSS Chips (backup, real chips via particles) ===
    const chipsEl = document.getElementById(type + 'ChipsFV');
    if (chipsEl) {
        const count = isActive ? Math.min(5, Math.max(1, Math.ceil(mrr * 20 + 1))) : 0;
        const chipSpd = Math.max(0.3, 1.2 - feed * 1.4).toFixed(2);
        const chipColor = material.hardness === 'soft'
            ? 'linear-gradient(90deg,#b0c8d0 0%,#d8eef4 50%,#b0c8d0 100%)'
            : material.hardness === 'very_hard'
            ? 'linear-gradient(90deg,#38363a 0%,#585258 50%,#38363a 100%)'
            : '';
        chipsEl.querySelectorAll('.lc-chip').forEach((c, i) => {
            if (i < count) {
                c.classList.remove('paused');
                c.style.animationDuration = chipSpd + 's';
                if (chipColor) c.style.background = chipColor;
                else c.style.background = '';
            } else {
                c.classList.add('paused');
            }
        });
    }

    // === 10. Coolant ===
    const coolant       = document.getElementById(type + 'CoolantFV');
    const coolantNozzle = document.getElementById(type + 'CoolantNozzle');
    const needCoolant = isActive && (
        material.hardness === 'hard' || material.hardness === 'very_hard' || mrr > 0.28);
    if (coolant)       coolant.classList.toggle('active', needCoolant);
    if (coolantNozzle) coolantNozzle.classList.toggle('active', needCoolant);

    // === 11. CSS Sparks (backup) ===
    const sparks = document.getElementById(type + 'SparksFV');
    if (sparks) sparks.classList.toggle('active', isActive && !!material.sparks && mrr > 0.005);

    // === 12. Workpiece heat glow ===
    const heat = document.getElementById(type + 'WpHeat');
    if (heat) {
        heat.className = 'lc-wp-heat';
        if (isActive) {
            if (mrr > .5 || material.hardness === 'very_hard') heat.classList.add('hot');
            else if (mrr > .08) heat.classList.add('warm');
        }
    }

    // === 13. Heat shimmer ===
    const shimmer = document.getElementById(type + 'HeatShimmer');
    if (shimmer) shimmer.classList.toggle('active', isActive && mrr > .15);

    // === 14. Ambient glow ===
    const ambient = document.getElementById(type + 'Ambient');
    if (ambient) {
        ambient.className = 'lc-ambient';
        if (isActive) ambient.classList.add(mrr > .4 ? 'hot' : 'cutting');
    }

    // === 15. Floor reflection ===
    const floorRefl = document.getElementById(type + 'FloorReflect');
    if (floorRefl) floorRefl.classList.toggle('active', isActive && mrr > .1);

    // === 16. Chip pile ===
    const pile = document.getElementById(type + 'ChipPile');
    if (pile) pile.classList.toggle('active', isActive && mrr > 0.04);

    // === 17. CNC turret LED ===
    const turretLed = document.getElementById('cncTurretLed');
    if (turretLed) turretLed.classList.toggle('active', type === 'cnc' && isActive);

    // === 18. Headstock LED strip ===
    const hsLed = document.getElementById(type + 'HsLedStrip');
    if (hsLed) hsLed.classList.toggle('active', isActive);

    // === 19. Conventional-specific ===
    if (type === 'conv') {
        const hwL   = document.getElementById('convHWLong');
        const hwT   = document.getElementById('convHWTrans');
        const lever = document.getElementById('convFeedLever');
        const rpmDp = document.getElementById('convRpmDisplay');
        const gear  = document.getElementById('convGearKnob');
        if (hwL) {
            hwL.classList.toggle('spinning', isActive);
            if (isActive && rpm > 0) {
                hwL.style.animationDuration = Math.max(.15, 3 - rpm/1000).toFixed(2) + 's';
            }
        }
        if (hwT) hwT.classList.toggle('spinning', isActive && depth > 0.2);
        if (lever) lever.classList.toggle('engaged', isActive);
        if (rpmDp) {
            rpmDp.textContent = rpm + ' RPM';
            rpmDp.style.color = rpm > 1500 ? '#ff6030'
                               : rpm < 200  ? '#80a0ff'
                               :              '#f0c040';
            rpmDp.style.textShadow = rpm > 1500
                ? '0 0 8px rgba(255,80,30,.8)' : '';
        }
        if (gear) {
            gear.style.transform = 'translateX(-50%) rotate(' + (rpm * .5 % 360) + 'deg)';
        }
    }

    // === 20. Particle system ===
    const sys = getOrCreateParticleSystem(type);
    if (sys) {
        sys.active = isActive;
        // Compute tool contact point in canvas coordinates
        if (isActive && toolAsm) {
            const canvasRect  = canvas.getBoundingClientRect();
            const toolRect    = toolAsm.getBoundingClientRect();
            const px = toolRect.left - canvasRect.left + toolRect.width / 2;
            const py = toolRect.top  - canvasRect.top;
            spawnParticles(sys, px, py, feed, depth, vc, material, mrr);
        }
        startParticleLoop();
    }
        // === 21. Nuevos instrumentos ===
    updateNewElements(type, feed, depth, vc, rpm, material, mrr, isActive);
}
// Update CNC screen
        function updateCNCScreen(vc, feed, rpm) {
            const el = document.getElementById('cncScreenFV');
            if (!el) return;
            const xPos = (50 - Math.random() * 0.3).toFixed(3);
            el.textContent = 'G96 S' + vc + '\nF' + feed.toFixed(2) + '\nX' + xPos + ' Z0.000\nRPM: ' + rpm;
        }

        // Material search
        const searchInput = document.getElementById("materialSearch");
        const materialCards = document.querySelectorAll(".material-card");
        const noResults = document.getElementById("noResults");

        function normalizeText(text) {
            return text
                .toLowerCase()
                .normalize("NFD")
                .replace(/[\u0300-\u036f]/g, "");
        }

        searchInput.addEventListener("input", function () {
            const searchValue = normalizeText(this.value.trim());
            let found = false;

            materialCards.forEach(card => {
                const dataSearch = normalizeText(card.getAttribute("data-search") || "");
                const cardText = normalizeText(card.innerText || "");

                if (dataSearch.includes(searchValue) || cardText.includes(searchValue)) {
                    card.style.display = "block";
                    found = true;
                } else {
                    card.style.display = "none";
                }
            });

            noResults.style.display = found ? "none" : "block";
        });
const wearAccum = { cnc: 15, conv: 15 }; // % desgaste acumulado
const encoderPos = { cnc: 0, conv: 0 };
let convPieceCount = 1;

function updateNewElements(type, feed, depth, vc, rpm, material, mrr, isActive) {

    // --- TEMPERATURA ---
    const tempVal = document.getElementById(type + 'TempVal');
    const tempDisp = document.getElementById(type + 'TempDisp');
    if (tempVal) {
        let temp = 25;
        if (isActive) {
            // Temperatura basada en MRR + material hardness
            const heatFactor = material.hardness === 'very_hard' ? 3.2
                             : material.hardness === 'hard'      ? 2.4
                             : material.hardness === 'medium-hard' ? 1.8
                             : material.hardness === 'soft'      ? 0.9 : 1.4;
            temp = Math.round(25 + mrr * 1200 * heatFactor + Math.random() * 8);
            temp = Math.min(1200, temp);
        }
        tempVal.textContent = String(temp).padStart(3, '0');
        tempVal.className = 'lc-temp-value' +
            (temp > 600 ? ' hot' : temp > 200 ? ' warm' : '');
    }

    // --- MANÓMETRO (presión refrigerante) ---
    const pressNeedle = document.getElementById(type + 'PressNeedle');
    if (pressNeedle) {
        const needCoolant = isActive && (
            material.hardness === 'hard' || material.hardness === 'very_hard' || mrr > .28);
        // -60° = 0 bar, +90° = max bar
        const pressureRot = needCoolant
            ? Math.round(-60 + Math.min(150, mrr * 500 + 80) + Math.random() * 6)
            : -55 + Math.random() * 4;
        pressNeedle.style.transform =
            'translateX(-50%) rotate(' + pressureRot + 'deg)';
    }

    // --- DESGASTE DE HERRAMIENTA ---
    const wearFill = document.getElementById(type + 'WearFill');
    const wearPct  = document.getElementById(type + 'WearPct');
    if (wearFill && isActive) {
        // Desgaste acumula lentamente con MRR y dureza del material
        const wearRate = mrr * 0.003 *
            (material.hardness === 'very_hard' ? 5
           : material.hardness === 'hard'      ? 3
           : material.hardness === 'medium-hard'? 1.8
           :                                      1);
        wearAccum[type] = Math.min(100, wearAccum[type] + wearRate);
        const w = wearAccum[type];
        wearFill.style.width = w.toFixed(0) + '%';
        wearFill.className   = 'lc-wear-bar-fill' +
            (w > 75 ? ' high' : w > 45 ? ' medium' : '');
        if (wearPct) wearPct.textContent = w.toFixed(0) + '%';
    }

    // --- VIBRÓMETRO ---
    const vibroVal  = document.getElementById(type + 'VibroVal');
    const vibroLine = document.getElementById(type + 'VibroLine');
    if (vibroVal) {
        let vibro = 0.00;
        if (isActive) {
            // Vibración proporcional a feed, depth, y opuesto a rigidez
            const base = feed * depth * 0.8 + (vc > 300 ? .05 : 0);
            vibro = Math.max(0, base + (Math.random() - .45) * base * .4);
            vibro = Math.min(9.99, vibro);
        }
        vibroVal.textContent = vibro.toFixed(2);
        vibroVal.className = 'lc-vibro-value' +
            (vibro > 3.5 ? ' alarm' : vibro > 1.5 ? ' warn' : '');
        if (vibroLine) {
            vibroLine.classList.toggle('active', isActive && vibro > 0.1);
            if (isActive) {
                const hue = vibro > 3.5 ? '#ff3300' : vibro > 1.5 ? '#ff9900' : '#4080ff';
                vibroLine.style.background =
                    `linear-gradient(90deg, transparent 0%, ${hue} 10%, ${hue} 90%, transparent 100%)`;
            }
        }
    }

    // --- ENCODER POSICIÓN Z ---
    const encVal = document.getElementById(type + 'EncoderVal');
    if (encVal && isActive) {
        encoderPos[type] -= feed * 0.18;
        if (encoderPos[type] < -250) encoderPos[type] = 0;
        const pos = encoderPos[type];
        const sign = pos >= 0 ? '+' : '-';
        encVal.textContent = 'Z' + sign + Math.abs(pos).toFixed(2).padStart(6, '0');
    }

    // --- LÁMPARA DE TRABAJO ---
    const lampBeam = document.getElementById(type + 'LampBeam');
    const lampTip  = document.getElementById(type + 'LampTip');
    if (lampBeam) lampBeam.classList.toggle('active', isActive);
    if (lampTip)  lampTip.classList.toggle('on', isActive);

    // --- MODO DE CORTE ---
    const cutMode = document.getElementById(type + 'CutMode');
    if (cutMode) {
        if (type === 'cnc') {
            cutMode.textContent = isActive ? 'G96 — CORTANDO' : 'G96 — EN ESPERA';
            cutMode.className = 'lc-cut-mode-text' + (isActive ? ' active' : '');
        } else {
            const warnV = vibroVal ? parseFloat(vibroVal.textContent) : 0;
            cutMode.textContent = isActive
                ? (warnV > 3.5 ? '⚠ VIBRACIÓN ALTA' : 'MANUAL — CORTANDO')
                : 'MANUAL — EN ESPERA';
            cutMode.className = 'lc-cut-mode-text' + (isActive ? ' active' : '');
        }
    }

    // --- CONTADOR CONV ---
    if (type === 'conv') {
        const convCtr = document.getElementById('convCounter');
        if (convCtr && isActive && Math.random() < .0008) {
            convPieceCount++;
            convCtr.textContent = 'PC:' + String(convPieceCount).padStart(3,'0');
        }
    }
}
        // Initialize
        function updateConvMaterial() {
            currentConvMaterial = document.getElementById('convMaterial').value;
            updateConv();
            wearAccum['conv'] = 5 + Math.random() * 10;
        }
// Re-calcular posición de herramienta al redimensionar
let resizeTimer;
window.addEventListener('resize', function() {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(function() {
        // Re-leer CSS vars y recalcular posición tool
        ['cnc', 'conv'].forEach(function(type) {
            const canvas = document.getElementById(type + 'Canvas');
            if (!canvas) return;
            const cs = getComputedStyle(canvas);
            const spindleY = parseFloat(cs.getPropertyValue('--lc-spindle')) || 168;
            const wpR      = parseFloat(cs.getPropertyValue('--lc-wp-r'))    || 29;
            const toolAsm  = document.getElementById(type + 'ToolAssembly');
            if (!toolAsm) return;

            // Recuperar profundidad actual del slider
            const depthSlider = document.getElementById(type === 'cnc' ? 'cncDepth' : 'convDepth');
            const depth = depthSlider ? parseFloat(depthSlider.value) : 2.0;

            const apPx     = (depth / 8.0) * wpR * 0.80;
            const apClamped = Math.min(wpR * 0.80, apPx);
            toolAsm.style.top = (spindleY + wpR - apClamped) + 'px';
        });

        // Redimensionar canvas de partículas
        resizeParticleCanvases();
    }, 120);
});
        // Initialize
        window.addEventListener('load', function() {
            updateCNC();
            updateConv();
        });
        function calcRPM() {
    const PI = Math.PI;
    const n  = document.getElementById('c_n').value.trim();
    const vc = document.getElementById('c_vc').value.trim();
    const d  = document.getElementById('c_d').value.trim();
    const res   = document.getElementById('rpm_result');
    const resTxt = document.getElementById('rpm_result_txt');
    const resForm = document.getElementById('rpm_result_formula');
    const err   = document.getElementById('rpm_error');

    res.style.display = 'none';
    err.style.display = 'none';

    const blanks = [n, vc, d].filter(v => v === '').length;

    if (blanks === 0) {
        err.textContent = 'Deja un campo en "?" (vacío) para calcular.';
        err.style.display = 'block'; return;
    }
    if (blanks > 1) {
        err.textContent = 'Llena al menos dos campos para poder calcular.';
        err.style.display = 'block'; return;
    }

    const nv = parseFloat(n), vcv = parseFloat(vc), dv = parseFloat(d);

    if ((n !== '' && nv <= 0) || (vc !== '' && vcv <= 0) || (d !== '' && dv <= 0)) {
        err.textContent = 'Los valores deben ser mayores a cero.';
        err.style.display = 'block'; return;
    }

    let result, label, unit, formula;

    if (n === '') {
        result = (1000 * vcv) / (PI * dv);
        label = 'n'; unit = 'RPM';
        formula = `(1000 × ${vcv}) / (π × ${dv}) = ${result.toFixed(1)} RPM`;
        document.getElementById('c_n').value = result.toFixed(1);
    } else if (vc === '') {
        result = (PI * dv * nv) / 1000;
        label = 'Vc'; unit = 'm/min';
        formula = `(π × ${dv} × ${nv}) / 1000 = ${result.toFixed(2)} m/min`;
        document.getElementById('c_vc').value = result.toFixed(2);
    } else {
        result = (1000 * vcv) / (PI * nv);
        label = 'D'; unit = 'mm';
        formula = `(1000 × ${vcv}) / (π × ${nv}) = ${result.toFixed(3)} mm`;
        document.getElementById('c_d').value = result.toFixed(3);
    }

    resTxt.textContent  = label + ' = ' + (label === 'D' ? result.toFixed(3) : label === 'Vc' ? result.toFixed(2) : result.toFixed(1)) + ' ' + unit;
    resForm.textContent = formula;
    res.style.display = 'block';
}

function clearRPM() {
    ['c_n','c_vc','c_d'].forEach(id => document.getElementById(id).value = '');
    document.getElementById('rpm_result').style.display = 'none';
    document.getElementById('rpm_error').style.display  = 'none';
}
    </script>
</body>
</html>